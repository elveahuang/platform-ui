var se=Object.defineProperty;var H=Object.getOwnPropertySymbols;var re=Object.prototype.hasOwnProperty,me=Object.prototype.propertyIsEnumerable;var N=(p,t,n)=>t in p?se(p,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):p[t]=n,g=(p,t)=>{for(var n in t||(t={}))re.call(t,n)&&N(p,n,t[n]);if(H)for(var n of H(t))me.call(t,n)&&N(p,n,t[n]);return p};var c=(p,t,n)=>new Promise((M,k)=>{var F=d=>{try{u(n.next(d))}catch(v){k(v)}},f=d=>{try{u(n.throw(d))}catch(v){k(v)}},u=d=>d.done?M(d.value):Promise.resolve(d.value).then(F,f);u((n=n.apply(p,t)).next())});import{u as de}from"./data-table-JltIg2r7.js";import{g as ce,h as pe,i as ue,j as _e,k as fe}from"./dict-Bhe_l238.js";import{d as ve,z as ye,A as S,r as _,bb as q,o as be,l as G,b as D,f as he,h as a,w as l,k as I,t as w,j as K,i as r,e as J,C as Q,F as ge,D as we,E as ke,aL as Ce,G as $e,M as Ie}from"./index-I6IEj8VZ.js";import"./ThemeDropdown.vue_vue_type_style_index_0_scoped_8799785f_lang-iZ5X_zze.js";import{_ as E}from"./AppIcon.vue_vue_type_script_setup_true_lang-RhEPluww.js";import{A as Me}from"./index-waOWpH5f.js";import{b as W}from"./dict-F3lMqrey.js";import{_ as Fe}from"./DataTable.vue_vue_type_script_setup_true_lang-Djkt64wp.js";import{C as xe}from"./index-BO2ohnF2.js";import"./index-Dft0gvTs.js";import{I as Ae}from"./index-FGXv_WaQ.js";import{_ as Pe,F as Te}from"./index-Zwy6LZlk.js";import{_ as De}from"./index-B_3gKfCi.js";import{_ as Ee}from"./index--HtiD6bX.js";import{_ as Oe}from"./index-BGqLYpX6.js";import"./index-BtzskSTj.js";import"./responsiveObserve-CRNyMOGT.js";import"./index-BEdVc3wF.js";import"./shallowequal-BUhI_f4j.js";import"./css-CjeDAR7Q.js";import"./LeftOutlined-BtdvBZmC.js";import"./RightOutlined-D6-5C2Rh.js";import"./isMobile-DTq5YDvJ.js";import"./useMemo-FxbUP89e.js";import"./useMergedState-B9wjZyMD.js";import"./index-CaSMnjGy.js";import"./move-BxKlVf9P.js";import"./index-C5f9N4i7.js";import"./index-BgZNEXyM.js";import"./dropdown-C48t8v1U.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./EyeOutlined-3IvmMei0.js";import"./Col-5ootfuGl.js";import"./useFlexGapSupport-DYU9r8rL.js";const Re={class:"!text-neutral-500"},Be=["innerHTML"],bt=ve({__name:"items",setup(p){var L,U;const{t}=ye(),{initialize:n,handleResult:M,handleParams:k}=de(),F=[{title:t("common.field_idx"),dataIndex:"idx",key:"idx",width:50,sorter:!0},{title:t("common.field_code"),dataIndex:"code",key:"code",width:100,sorter:!0},{title:t("common.field_label"),dataIndex:"title",key:"title",width:250,sorter:!0},{title:t("common.field_last_modified_at"),dataIndex:"lastModifiedAt",key:"lastModifiedAt",width:120,sorter:!0,ellipsis:!0},{title:t("common.label_action"),dataIndex:"operation",key:"operation",width:60,ellipsis:!0,fixed:"right"}],f=S(n(F)),u=_(),d=_(!1),v=((L=q.currentRoute.value.query)==null?void 0:L.typeId)||"",X=_(((U=q.currentRoute.value.query)==null?void 0:U.title)||""),Y=()=>c(this,null,function*(){yield pe(g({typeId:v},k(f))).then(e=>{M(f,e)})}),x=_(""),y=_(!1),A=_();let m=S(new W);const Z={code:[{validator:(e,o)=>c(this,null,function*(){const i=yield ce(g({},o));return i.code=="200"&&i.data===!0?Promise.resolve():Promise.reject()}),message:t("common.dict_field_code_validation_check"),transform:e=>({code:e,id:m.id})}],title:[{required:!0,message:t("common.field_label_validation")}]},O=e=>c(this,null,function*(){var o;(o=A.value)==null||o.clearValidate(),y.value=!0,e&&e>0?(x.value=t("common.dict_items_pages_edit_title"),yield ue({id:e}).then(i=>{Object.assign(m,g({},i.data))})):(Object.assign(m,g({},new W)),x.value=t("common.dict_items_pages_add_title"))}),ee=()=>{y.value=!1},R=()=>c(this,null,function*(){m.typeId=v,yield A.value.validate().then(()=>c(this,null,function*(){_e(m).then(e=>{e.code=="200"&&(y.value=!1,u.value.refresh())})})).catch(e=>{G(e)})}),B=(e=0)=>c(this,null,function*(){const o=e>0?[e]:u.value.selectedRowKeys();we(o)?ke({message:t("common.label_please_select_one_record")}).then():fe({ids:o}).then(i=>{if(i.code=="200")y.value=!1,u.value.refresh();else for(const h in i.data)i.data.hasOwnProperty(h)&&Ce.error(`${i.data[h]} - ${h}`)})}),b=_(!1),C=_(""),te=e=>c(this,null,function*(){C.value=e.title,b.value=!0}),oe=()=>c(this,null,function*(){C.value="",b.value=!1}),ae=()=>c(this,null,function*(){C.value="",b.value=!1});return be(()=>c(this,null,function*(){G("Page <<DictionaryChildrenAdminListPage>> mounted.")})),(e,o)=>{const i=$e,h=De,le=Ee,P=xe,j=Ie,z=Ae,T=Pe,ne=Oe,ie=Te;return D(),he(ge,null,[a(r(Me),null,{title:l(()=>[I(w(e.$t("common.dict_items_management"))+" - ",1),K("label",Re,w(X.value),1)]),_:1}),a(P,null,{default:l(()=>[a(r(Fe),{ref_key:"dataTableRef",ref:u,model:f,"onUpdate:model":o[3]||(o[3]=s=>f=s),onGetDataList:Y,"row-selection-enabled":d.value,"tool-bar-enabled":!0},{toolBar:l(()=>[a(i,{type:"primary",onClick:o[0]||(o[0]=s=>O(0))},{default:l(()=>[I(w(e.$t("common.button_add")),1)]),_:1}),a(i,{onClick:o[1]||(o[1]=s=>d.value=!d.value)},{default:l(()=>[I(w(d.value?e.$t("common.label_batch_operation_cancel"):e.$t("common.label_batch_operation")),1)]),_:1}),a(i,{onClick:o[2]||(o[2]=s=>B(0))},{default:l(()=>[I(w(e.$t("common.button_delete")),1)]),_:1})]),bodyCell:l(({column:s,record:$})=>[s.dataIndex==="operation"?(D(),J(le,{key:0},{default:l(()=>[a(i,{type:"primary",size:"small",onClick:V=>te($)},{icon:l(()=>[a(r(E),{icon:"mdi:eye-outline"})]),_:2},1032,["onClick"]),a(i,{type:"primary",size:"small",onClick:V=>O($.id)},{icon:l(()=>[a(r(E),{icon:"ant-design:edit-outlined"})]),_:2},1032,["onClick"]),$.source!==1?(D(),J(h,{key:0,onConfirm:V=>B($.id),title:e.$t("common.label_confirm_delete_record")},{default:l(()=>[a(i,{danger:"",type:"primary",size:"small"},{icon:l(()=>[a(r(E),{icon:"ant-design:close-outlined"})]),_:1})]),_:2},1032,["onConfirm","title"])):Q("",!0)]),_:2},1024)):Q("",!0)]),_:1},8,["model","row-selection-enabled"])]),_:1}),a(j,{class:"app-modal",open:b.value,"onUpdate:open":o[4]||(o[4]=s=>b.value=s),title:e.$t("common.label_preview"),onOk:oe,onCancel:ae},{default:l(()=>[a(P,null,{default:l(()=>[K("div",{innerHTML:C.value},null,8,Be)]),_:1})]),_:1},8,["open","title"]),a(j,{class:"app-modal",open:y.value,"onUpdate:open":o[8]||(o[8]=s=>y.value=s),title:x.value,onOk:R,onCancel:ee},{default:l(()=>[a(P,null,{default:l(()=>[a(ie,{ref_key:"entityForm",ref:A,model:r(m),rules:Z,onFinish:R,"label-col":{span:4},"wrapper-col":{span:12}},{default:l(()=>[a(T,{name:"code",label:e.$t("common.field_code")},{default:l(()=>[a(z,{readonly:r(m).source===1,maxlength:100,value:r(m).code,"onUpdate:value":o[5]||(o[5]=s=>r(m).code=s),placeholder:r(t)("common.field_code_placeholder")},null,8,["readonly","value","placeholder"])]),_:1},8,["label"]),a(T,{name:"title",label:e.$t("common.field_label")},{default:l(()=>[a(z,{maxlength:255,value:r(m).title,"onUpdate:value":o[6]||(o[6]=s=>r(m).title=s),placeholder:r(t)("common.field_label_placeholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),a(T,{name:"idx",label:e.$t("common.field_idx")},{default:l(()=>[a(ne,{max:999,min:0,value:r(m).idx,"onUpdate:value":o[7]||(o[7]=s=>r(m).idx=s),placeholder:r(t)("common.field_idx_placeholder")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})]),_:1},8,["open","title"])],64)}}});export{bt as default};
