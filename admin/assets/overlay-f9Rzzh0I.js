var ye=Object.defineProperty,ge=Object.defineProperties;var be=Object.getOwnPropertyDescriptors;var Q=Object.getOwnPropertySymbols;var Ce=Object.prototype.hasOwnProperty,he=Object.prototype.propertyIsEnumerable;var ee=(e,o,s)=>o in e?ye(e,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[o]=s,U=(e,o)=>{for(var s in o||(o={}))Ce.call(o,s)&&ee(e,s,o[s]);if(Q)for(var s of Q(o))he.call(o,s)&&ee(e,s,o[s]);return e},H=(e,o)=>ge(e,be(o));import{o as le,aC as Ee,ak as ke,aO as q,B as we,O as G,bk as Me,E as ie,au as oe,T as _,bl as Te,as as Se,bm as Be,at as Ie,b7 as K,H as J,I as X,d as Y,j as R,q as h,ay as De,az as Le,N as Ae,av as te,c as D,e as P,g as W,k as V,n as k,i as t,t as Oe,w as B,a1 as Pe,f as x,X as $e,A as Z,V as re,a8 as ue,bn as Fe,b1 as ze,P as Ne,r as I,bg as Re,U as Ye,aA as Ue,bo as He,aB as se,aK as Ve,ax as Xe,af as Ke,aP as We,a4 as je,a5 as qe,a6 as _e,a7 as xe,ac as Ze}from"./index-KGeo0VbS.js";import{P as j,F as Ge,i as Je,e as Qe}from"./space-Neet_Cpy.js";import{c as eo}from"./refs-RuQ-bek4.js";import{U as ce}from"./index-MkXr-5eC.js";import{t as oo,a as ne,u as ae}from"./index-QxvNv9ra.js";import{a as to}from"./scroll-rw7_Irft.js";const so=(e,o,s)=>{let d={offsetX:0,offsetY:0};const a=l=>{const m=l.clientX,c=l.clientY,{offsetX:f,offsetY:p}=d,y=e.value.getBoundingClientRect(),r=y.left,v=y.top,L=y.width,$=y.height,F=document.documentElement.clientWidth,A=document.documentElement.clientHeight,z=-r+f,N=-v+p,O=F-r-L+f,w=A-v-$+p,E=M=>{const n=Math.min(Math.max(f+M.clientX-m,z),O),C=Math.min(Math.max(p+M.clientY-c,N),w);d={offsetX:n,offsetY:C},e.value&&(e.value.style.transform=`translate(${q(n)}, ${q(C)})`)},b=()=>{document.removeEventListener("mousemove",E),document.removeEventListener("mouseup",b)};document.addEventListener("mousemove",E),document.addEventListener("mouseup",b)},u=()=>{o.value&&e.value&&o.value.addEventListener("mousedown",a)},i=()=>{o.value&&e.value&&o.value.removeEventListener("mousedown",a)};le(()=>{Ee(()=>{s.value?u():i()})}),ke(()=>{i()})},no=(e,o={})=>{we(e)||oo("[useLockscreen]","You need to pass a ref param to this function");const s=o.ns||G("popup"),d=Me(()=>s.bm("parent","hidden"));if(!ie||oe(document.body,d.value))return;let a=0,u=!1,i="0";const l=()=>{setTimeout(()=>{Ie(document==null?void 0:document.body,d.value),u&&document&&(document.body.style.width=i)},200)};_(e,m=>{if(!m){l();return}u=!oe(document.body,d.value),u&&(i=document.body.style.width),a=to(s.namespace.value);const c=document.documentElement.clientHeight<document.body.scrollHeight,f=Te(document.body,"overflowY");a>0&&(c||f==="scroll")&&u&&(document.body.style.width=`calc(100% - ${a}px)`),Se(document.body,d.value)}),Be(()=>l())},de=e=>{if(!e)return{onClick:K,onMousedown:K,onMouseup:K};let o=!1,s=!1;return{onClick:i=>{o&&s&&e(i),o=s=!1},onMousedown:i=>{o=i.target===i.currentTarget},onMouseup:i=>{s=i.target===i.currentTarget}}},ao=J({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:X([String,Array,Object])},zIndex:{type:X([String,Number])}}),lo={click:e=>e instanceof MouseEvent},io="overlay";var ro=Y({name:"ElOverlay",props:ao,emits:lo,setup(e,{slots:o,emit:s}){const d=G(io),a=m=>{s("click",m)},{onClick:u,onMousedown:i,onMouseup:l}=de(e.customMaskEvent?void 0:a);return()=>e.mask?R("div",{class:[d.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:u,onMousedown:i,onMouseup:l},[h(o,"default")],j.STYLE|j.CLASS|j.PROPS,["onClick","onMouseup","onMousedown"]):De("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[h(o,"default")])}});const uo=ro,fe=Symbol("dialogInjectionKey"),me=J({center:Boolean,alignCenter:Boolean,closeIcon:{type:Le},customClass:{type:String,default:""},draggable:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),co={close:()=>!0},fo=["aria-level"],mo=["aria-label"],vo=["id"],po=Y({name:"ElDialogContent"}),yo=Y(H(U({},po),{props:me,emits:co,setup(e){const o=e,{t:s}=Ae(),{Close:d}=Fe,{dialogRef:a,headerRef:u,bodyId:i,ns:l,style:m}=te(fe),{focusTrapRef:c}=te(Ge),f=D(()=>[l.b(),l.is("fullscreen",o.fullscreen),l.is("draggable",o.draggable),l.is("align-center",o.alignCenter),{[l.m("center")]:o.center},o.customClass]),p=eo(c,a),y=D(()=>o.draggable);return so(a,u,y),(r,v)=>(P(),W("div",{ref:t(p),class:k(t(f)),style:re(t(m)),tabindex:"-1"},[V("header",{ref_key:"headerRef",ref:u,class:k(t(l).e("header"))},[h(r.$slots,"header",{},()=>[V("span",{role:"heading","aria-level":r.ariaLevel,class:k(t(l).e("title"))},Oe(r.title),11,fo)]),r.showClose?(P(),W("button",{key:0,"aria-label":t(s)("el.dialog.close"),class:k(t(l).e("headerbtn")),type:"button",onClick:v[0]||(v[0]=L=>r.$emit("close"))},[R(t($e),{class:k(t(l).e("close"))},{default:B(()=>[(P(),x(Pe(r.closeIcon||t(d))))]),_:1},8,["class"])],10,mo)):Z("v-if",!0)],2),V("div",{id:t(i),class:k(t(l).e("body"))},[h(r.$slots,"default")],10,vo),r.$slots.footer?(P(),W("footer",{key:0,class:k(t(l).e("footer"))},[h(r.$slots,"footer")],2)):Z("v-if",!0)],6))}}));var go=ue(yo,[["__file","dialog-content.vue"]]);const bo=J(H(U({},me),{appendToBody:Boolean,appendTo:{type:X(String),default:"body"},beforeClose:{type:X(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1},headerAriaLevel:{type:String,default:"2"}})),Co={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[ce]:e=>ze(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},ho=(e,o)=>{var s;const a=Ue().emit,{nextZIndex:u}=Ne();let i="";const l=ne(),m=ne(),c=I(!1),f=I(!1),p=I(!1),y=I((s=e.zIndex)!=null?s:u());let r,v;const L=Re("namespace",He),$=D(()=>{const g={},S=`--${L.value}-dialog`;return e.fullscreen||(e.top&&(g[`${S}-margin-top`]=e.top),e.width&&(g[`${S}-width`]=q(e.width))),g}),F=D(()=>e.alignCenter?{display:"flex"}:{});function A(){a("opened")}function z(){a("closed"),a(ce,!1),e.destroyOnClose&&(p.value=!1)}function N(){a("close")}function O(){v==null||v(),r==null||r(),e.openDelay&&e.openDelay>0?{stop:r}=se(()=>M(),e.openDelay):M()}function w(){r==null||r(),v==null||v(),e.closeDelay&&e.closeDelay>0?{stop:v}=se(()=>n(),e.closeDelay):n()}function E(){function g(S){S||(f.value=!0,c.value=!1)}e.beforeClose?e.beforeClose(g):w()}function b(){e.closeOnClickModal&&E()}function M(){ie&&(c.value=!0)}function n(){c.value=!1}function C(){a("openAutoFocus")}function T(){a("closeAutoFocus")}function ve(g){var S;((S=g.detail)==null?void 0:S.focusReason)==="pointer"&&g.preventDefault()}e.lockScroll&&no(c);function pe(){e.closeOnPressEscape&&E()}return _(()=>e.modelValue,g=>{g?(f.value=!1,O(),p.value=!0,y.value=Je(e.zIndex)?u():y.value++,Ye(()=>{a("open"),o.value&&(o.value.scrollTop=0)})):c.value&&w()}),_(()=>e.fullscreen,g=>{o.value&&(g?(i=o.value.style.transform,o.value.style.transform=""):o.value.style.transform=i)}),le(()=>{e.modelValue&&(c.value=!0,p.value=!0,O())}),{afterEnter:A,afterLeave:z,beforeLeave:N,handleClose:E,onModalClick:b,close:w,doClose:n,onOpenAutoFocus:C,onCloseAutoFocus:T,onCloseRequested:pe,onFocusoutPrevented:ve,titleId:l,bodyId:m,closed:f,style:$,overlayDialogStyle:F,rendered:p,visible:c,zIndex:y}},Eo=["aria-label","aria-labelledby","aria-describedby"],ko=Y({name:"ElDialog",inheritAttrs:!1}),wo=Y(H(U({},ko),{props:bo,emits:Co,setup(e,{expose:o}){const s=e,d=Ve();ae({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},D(()=>!!d.title)),ae({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},D(()=>!!s.customClass));const a=G("dialog"),u=I(),i=I(),l=I(),{visible:m,titleId:c,bodyId:f,style:p,overlayDialogStyle:y,rendered:r,zIndex:v,afterEnter:L,afterLeave:$,beforeLeave:F,handleClose:A,onModalClick:z,onOpenAutoFocus:N,onCloseAutoFocus:O,onCloseRequested:w,onFocusoutPrevented:E}=ho(s,u);Xe(fe,{dialogRef:u,headerRef:i,bodyId:f,ns:a,rendered:r,style:p});const b=de(z),M=D(()=>s.draggable&&!s.fullscreen);return o({visible:m,dialogContentRef:l}),(n,C)=>(P(),x(xe,{to:n.appendTo,disabled:n.appendTo!=="body"?!1:!n.appendToBody},[R(_e,{name:"dialog-fade",onAfterEnter:t(L),onAfterLeave:t($),onBeforeLeave:t(F),persisted:""},{default:B(()=>[qe(R(t(uo),{"custom-mask-event":"",mask:n.modal,"overlay-class":n.modalClass,"z-index":t(v)},{default:B(()=>[V("div",{role:"dialog","aria-modal":"true","aria-label":n.title||void 0,"aria-labelledby":n.title?void 0:t(c),"aria-describedby":t(f),class:k(`${t(a).namespace.value}-overlay-dialog`),style:re(t(y)),onClick:C[0]||(C[0]=(...T)=>t(b).onClick&&t(b).onClick(...T)),onMousedown:C[1]||(C[1]=(...T)=>t(b).onMousedown&&t(b).onMousedown(...T)),onMouseup:C[2]||(C[2]=(...T)=>t(b).onMouseup&&t(b).onMouseup(...T))},[R(t(Qe),{loop:"",trapped:t(m),"focus-start-el":"container",onFocusAfterTrapped:t(N),onFocusAfterReleased:t(O),onFocusoutPrevented:t(E),onReleaseRequested:t(w)},{default:B(()=>[t(r)?(P(),x(go,Ke({key:0,ref_key:"dialogContentRef",ref:l},n.$attrs,{"custom-class":n.customClass,center:n.center,"align-center":n.alignCenter,"close-icon":n.closeIcon,draggable:t(M),fullscreen:n.fullscreen,"show-close":n.showClose,title:n.title,"aria-level":n.headerAriaLevel,onClose:t(A)}),We({header:B(()=>[n.$slots.title?h(n.$slots,"title",{key:1}):h(n.$slots,"header",{key:0,close:t(A),titleId:t(c),titleClass:t(a).e("title")})]),default:B(()=>[h(n.$slots,"default")]),_:2},[n.$slots.footer?{name:"footer",fn:B(()=>[h(n.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","aria-level","onClose"])):Z("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,Eo)]),_:3},8,["mask","overlay-class","z-index"]),[[je,t(m)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["to","disabled"]))}}));var Mo=ue(wo,[["__file","dialog.vue"]]);const Oo=Ze(Mo);export{Oo as E};
