var ye=Object.defineProperty,ge=Object.defineProperties;var be=Object.getOwnPropertyDescriptors;var Q=Object.getOwnPropertySymbols;var Ce=Object.prototype.hasOwnProperty,he=Object.prototype.propertyIsEnumerable;var ee=(e,o,s)=>o in e?ye(e,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[o]=s,U=(e,o)=>{for(var s in o||(o={}))Ce.call(o,s)&&ee(e,s,o[s]);if(Q)for(var s of Q(o))he.call(o,s)&&ee(e,s,o[s]);return e},H=(e,o)=>ge(e,be(o));import{o as ae,aC as ke,ak as Ee,aO as q,B as we,O as G,bk as Me,E as re,au as oe,T as _,bl as Te,as as Se,bm as Be,at as Ie,b7 as K,H as J,I as X,d as Y,j as R,q as h,ay as De,az as Le,N as Ae,av as te,c as D,e as P,g as W,k as V,n as E,i as t,t as Oe,w as B,a1 as Pe,f as x,X as $e,A as Z,V as ie,a8 as ue,bn as Fe,b1 as ze,P as Ne,r as I,bg as Re,U as Ye,aA as Ue,bo as He,aB as se,aK as Ve,ax as Xe,af as Ke,aP as We,a4 as je,a5 as qe,a6 as _e,a7 as xe,ac as Ze}from"./index-g_EFehcI.js";import{P as j,F as Ge,i as Je,e as Qe}from"./space-PpjVxf4y.js";import{c as eo}from"./refs-uUcUhAkv.js";import{U as ce}from"./index-cSUn4ffi.js";import{t as oo,a as ne,u as le}from"./index-O0maCV9B.js";import{a as to}from"./scroll-hBMBV9d6.js";const so=(e,o,s)=>{let d={offsetX:0,offsetY:0};const l=a=>{const m=a.clientX,c=a.clientY,{offsetX:f,offsetY:p}=d,y=e.value.getBoundingClientRect(),i=y.left,v=y.top,L=y.width,$=y.height,F=document.documentElement.clientWidth,A=document.documentElement.clientHeight,z=-i+f,N=-v+p,O=F-i-L+f,w=A-v-$+p,k=M=>{const n=Math.min(Math.max(f+M.clientX-m,z),O),C=Math.min(Math.max(p+M.clientY-c,N),w);d={offsetX:n,offsetY:C},e.value&&(e.value.style.transform=`translate(${q(n)}, ${q(C)})`)},b=()=>{document.removeEventListener("mousemove",k),document.removeEventListener("mouseup",b)};document.addEventListener("mousemove",k),document.addEventListener("mouseup",b)},u=()=>{o.value&&e.value&&o.value.addEventListener("mousedown",l)},r=()=>{o.value&&e.value&&o.value.removeEventListener("mousedown",l)};ae(()=>{ke(()=>{s.value?u():r()})}),Ee(()=>{r()})},no=(e,o={})=>{we(e)||oo("[useLockscreen]","You need to pass a ref param to this function");const s=o.ns||G("popup"),d=Me(()=>s.bm("parent","hidden"));if(!re||oe(document.body,d.value))return;let l=0,u=!1,r="0";const a=()=>{setTimeout(()=>{Ie(document==null?void 0:document.body,d.value),u&&document&&(document.body.style.width=r)},200)};_(e,m=>{if(!m){a();return}u=!oe(document.body,d.value),u&&(r=document.body.style.width),l=to(s.namespace.value);const c=document.documentElement.clientHeight<document.body.scrollHeight,f=Te(document.body,"overflowY");l>0&&(c||f==="scroll")&&u&&(document.body.style.width=`calc(100% - ${l}px)`),Se(document.body,d.value)}),Be(()=>a())},de=e=>{if(!e)return{onClick:K,onMousedown:K,onMouseup:K};let o=!1,s=!1;return{onClick:r=>{o&&s&&e(r),o=s=!1},onMousedown:r=>{o=r.target===r.currentTarget},onMouseup:r=>{s=r.target===r.currentTarget}}},lo=J({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:X([String,Array,Object])},zIndex:{type:X([String,Number])}}),ao={click:e=>e instanceof MouseEvent},ro="overlay";var io=Y({name:"ElOverlay",props:lo,emits:ao,setup(e,{slots:o,emit:s}){const d=G(ro),l=m=>{s("click",m)},{onClick:u,onMousedown:r,onMouseup:a}=de(e.customMaskEvent?void 0:l);return()=>e.mask?R("div",{class:[d.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:u,onMousedown:r,onMouseup:a},[h(o,"default")],j.STYLE|j.CLASS|j.PROPS,["onClick","onMouseup","onMousedown"]):De("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[h(o,"default")])}});const uo=io,fe=Symbol("dialogInjectionKey"),me=J({center:Boolean,alignCenter:Boolean,closeIcon:{type:Le},customClass:{type:String,default:""},draggable:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),co={close:()=>!0},fo=["aria-level"],mo=["aria-label"],vo=["id"],po=Y({name:"ElDialogContent"}),yo=Y(H(U({},po),{props:me,emits:co,setup(e){const o=e,{t:s}=Ae(),{Close:d}=Fe,{dialogRef:l,headerRef:u,bodyId:r,ns:a,style:m}=te(fe),{focusTrapRef:c}=te(Ge),f=D(()=>[a.b(),a.is("fullscreen",o.fullscreen),a.is("draggable",o.draggable),a.is("align-center",o.alignCenter),{[a.m("center")]:o.center},o.customClass]),p=eo(c,l),y=D(()=>o.draggable);return so(l,u,y),(i,v)=>(P(),W("div",{ref:t(p),class:E(t(f)),style:ie(t(m)),tabindex:"-1"},[V("header",{ref_key:"headerRef",ref:u,class:E(t(a).e("header"))},[h(i.$slots,"header",{},()=>[V("span",{role:"heading","aria-level":i.ariaLevel,class:E(t(a).e("title"))},Oe(i.title),11,fo)]),i.showClose?(P(),W("button",{key:0,"aria-label":t(s)("el.dialog.close"),class:E(t(a).e("headerbtn")),type:"button",onClick:v[0]||(v[0]=L=>i.$emit("close"))},[R(t($e),{class:E(t(a).e("close"))},{default:B(()=>[(P(),x(Pe(i.closeIcon||t(d))))]),_:1},8,["class"])],10,mo)):Z("v-if",!0)],2),V("div",{id:t(r),class:E(t(a).e("body"))},[h(i.$slots,"default")],10,vo),i.$slots.footer?(P(),W("footer",{key:0,class:E(t(a).e("footer"))},[h(i.$slots,"footer")],2)):Z("v-if",!0)],6))}}));var go=ue(yo,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const bo=J(H(U({},me),{appendToBody:Boolean,appendTo:{type:X(String),default:"body"},beforeClose:{type:X(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1},headerAriaLevel:{type:String,default:"2"}})),Co={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[ce]:e=>ze(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},ho=(e,o)=>{var s;const l=Ue().emit,{nextZIndex:u}=Ne();let r="";const a=ne(),m=ne(),c=I(!1),f=I(!1),p=I(!1),y=I((s=e.zIndex)!=null?s:u());let i,v;const L=Re("namespace",He),$=D(()=>{const g={},S=`--${L.value}-dialog`;return e.fullscreen||(e.top&&(g[`${S}-margin-top`]=e.top),e.width&&(g[`${S}-width`]=q(e.width))),g}),F=D(()=>e.alignCenter?{display:"flex"}:{});function A(){l("opened")}function z(){l("closed"),l(ce,!1),e.destroyOnClose&&(p.value=!1)}function N(){l("close")}function O(){v==null||v(),i==null||i(),e.openDelay&&e.openDelay>0?{stop:i}=se(()=>M(),e.openDelay):M()}function w(){i==null||i(),v==null||v(),e.closeDelay&&e.closeDelay>0?{stop:v}=se(()=>n(),e.closeDelay):n()}function k(){function g(S){S||(f.value=!0,c.value=!1)}e.beforeClose?e.beforeClose(g):w()}function b(){e.closeOnClickModal&&k()}function M(){re&&(c.value=!0)}function n(){c.value=!1}function C(){l("openAutoFocus")}function T(){l("closeAutoFocus")}function ve(g){var S;((S=g.detail)==null?void 0:S.focusReason)==="pointer"&&g.preventDefault()}e.lockScroll&&no(c);function pe(){e.closeOnPressEscape&&k()}return _(()=>e.modelValue,g=>{g?(f.value=!1,O(),p.value=!0,y.value=Je(e.zIndex)?u():y.value++,Ye(()=>{l("open"),o.value&&(o.value.scrollTop=0)})):c.value&&w()}),_(()=>e.fullscreen,g=>{o.value&&(g?(r=o.value.style.transform,o.value.style.transform=""):o.value.style.transform=r)}),ae(()=>{e.modelValue&&(c.value=!0,p.value=!0,O())}),{afterEnter:A,afterLeave:z,beforeLeave:N,handleClose:k,onModalClick:b,close:w,doClose:n,onOpenAutoFocus:C,onCloseAutoFocus:T,onCloseRequested:pe,onFocusoutPrevented:ve,titleId:a,bodyId:m,closed:f,style:$,overlayDialogStyle:F,rendered:p,visible:c,zIndex:y}},ko=["aria-label","aria-labelledby","aria-describedby"],Eo=Y({name:"ElDialog",inheritAttrs:!1}),wo=Y(H(U({},Eo),{props:bo,emits:Co,setup(e,{expose:o}){const s=e,d=Ve();le({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},D(()=>!!d.title)),le({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},D(()=>!!s.customClass));const l=G("dialog"),u=I(),r=I(),a=I(),{visible:m,titleId:c,bodyId:f,style:p,overlayDialogStyle:y,rendered:i,zIndex:v,afterEnter:L,afterLeave:$,beforeLeave:F,handleClose:A,onModalClick:z,onOpenAutoFocus:N,onCloseAutoFocus:O,onCloseRequested:w,onFocusoutPrevented:k}=ho(s,u);Xe(fe,{dialogRef:u,headerRef:r,bodyId:f,ns:l,rendered:i,style:p});const b=de(z),M=D(()=>s.draggable&&!s.fullscreen);return o({visible:m,dialogContentRef:a}),(n,C)=>(P(),x(xe,{to:n.appendTo,disabled:n.appendTo!=="body"?!1:!n.appendToBody},[R(_e,{name:"dialog-fade",onAfterEnter:t(L),onAfterLeave:t($),onBeforeLeave:t(F),persisted:""},{default:B(()=>[qe(R(t(uo),{"custom-mask-event":"",mask:n.modal,"overlay-class":n.modalClass,"z-index":t(v)},{default:B(()=>[V("div",{role:"dialog","aria-modal":"true","aria-label":n.title||void 0,"aria-labelledby":n.title?void 0:t(c),"aria-describedby":t(f),class:E(`${t(l).namespace.value}-overlay-dialog`),style:ie(t(y)),onClick:C[0]||(C[0]=(...T)=>t(b).onClick&&t(b).onClick(...T)),onMousedown:C[1]||(C[1]=(...T)=>t(b).onMousedown&&t(b).onMousedown(...T)),onMouseup:C[2]||(C[2]=(...T)=>t(b).onMouseup&&t(b).onMouseup(...T))},[R(t(Qe),{loop:"",trapped:t(m),"focus-start-el":"container",onFocusAfterTrapped:t(N),onFocusAfterReleased:t(O),onFocusoutPrevented:t(k),onReleaseRequested:t(w)},{default:B(()=>[t(i)?(P(),x(go,Ke({key:0,ref_key:"dialogContentRef",ref:a},n.$attrs,{"custom-class":n.customClass,center:n.center,"align-center":n.alignCenter,"close-icon":n.closeIcon,draggable:t(M),fullscreen:n.fullscreen,"show-close":n.showClose,title:n.title,"aria-level":n.headerAriaLevel,onClose:t(A)}),We({header:B(()=>[n.$slots.title?h(n.$slots,"title",{key:1}):h(n.$slots,"header",{key:0,close:t(A),titleId:t(c),titleClass:t(l).e("title")})]),default:B(()=>[h(n.$slots,"default")]),_:2},[n.$slots.footer?{name:"footer",fn:B(()=>[h(n.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","aria-level","onClose"])):Z("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,ko)]),_:3},8,["mask","overlay-class","z-index"]),[[je,t(m)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["to","disabled"]))}}));var Mo=ue(wo,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const Oo=Ze(Mo);export{Oo as E};
