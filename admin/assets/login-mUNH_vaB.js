var Ae=Object.defineProperty,Be=Object.defineProperties;var Me=Object.getOwnPropertyDescriptors;var be=Object.getOwnPropertySymbols;var Fe=Object.prototype.hasOwnProperty,He=Object.prototype.propertyIsEnumerable;var ke=(o,n,a)=>n in o?Ae(o,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[n]=a,W=(o,n)=>{for(var a in n||(n={}))Fe.call(n,a)&&ke(o,a,n[a]);if(be)for(var a of be(n))He.call(n,a)&&ke(o,a,n[a]);return o},re=(o,n)=>Be(o,Me(n));var V=(o,n,a)=>new Promise((l,m)=>{var h=i=>{try{x(a.next(i))}catch(L){m(L)}},c=i=>{try{x(a.throw(i))}catch(L){m(L)}},x=i=>i.done?l(i.value):Promise.resolve(i.value).then(h,c);x((a=a.apply(o,n)).next())});/* empty css             */import{E as Ye}from"./card-hmU2brBp.js";import{E as P,G as Pe,H as xe,I as q,J as ce,d as M,K as Ce,L as Xe,M as De,N as Se,O as ze,P as Ue,r as k,Q as je,S as Ke,c as b,T as he,U as $e,o as J,e as y,f as D,j as r,w as d,i as e,n as E,V as ye,W as We,k as f,A as T,X as R,Y as qe,F as G,Z as Ze,_ as Ge,g as S,$ as Je,a0 as Qe,a1 as ea,a2 as aa,a3 as ta,a4 as sa,a5 as oa,h as Ne,q as Z,a6 as na,a7 as la,a8 as Te,a9 as X,aa as Y,ab as ra,ac as Oe,ad as ia,ae as ca,t as ue,af as ua,ag as da,ah as fa,v as pa,l as we,p as ma,m as va,s as Ee,x as _a,a as ga,b as ha,ai as ya,y as Ie,z as wa,aj as ba}from"./index-OstrK1OQ.js";import{a as ka,b as Ca,c as Ea,E as Ia,e as La,g as xa,f as Sa,_ as Le}from"./menu-item-eNW7FOrc.js";import{E as za}from"./space-RF6TFP0F.js";/* empty css                   *//* empty css               */import{_ as Ve}from"./_plugin-vue_export-helper-x3n3nnut.js";import{m as Re,E as $a}from"./index-9rPCpThB.js";import{d as Na,g as Ta}from"./scroll-iXVrqGlJ.js";import{u as Oa,E as _e}from"./index--xZgEZH6.js";/* empty css                                                             *//* empty css                                                             */import{a as Va,E as ie}from"./index-lbJPmA7f.js";import"./castArray-1TVVw54j.js";import"./refs-m99Tpekf.js";const Ra=(o,n)=>{if(!P||!o||!n)return!1;const a=o.getBoundingClientRect();let l;return n instanceof Element?l=n.getBoundingClientRect():l={top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},a.top<l.bottom&&a.bottom>l.top&&a.right>l.left&&a.left<l.right};var Aa="Expected a function";function ge(o,n,a){var l=!0,m=!0;if(typeof o!="function")throw new TypeError(Aa);return Pe(a)&&(l="leading"in a?!!a.leading:l,m="trailing"in a?!!a.trailing:m),Na(o,n,{leading:l,maxWait:n,trailing:m})}const Ba=xe({urlList:{type:q(Array),default:()=>Re([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:q(String),default:"anonymous"}}),Ma={close:()=>!0,switch:o=>ce(o),rotate:o=>ce(o)},Fa=["src","crossorigin"],Ha=M({name:"ElImageViewer"}),Ya=M(re(W({},Ha),{props:Ba,emits:Ma,setup(o,{expose:n,emit:a}){const l=o,m={CONTAIN:{name:"contain",icon:Ce(Xe)},ORIGINAL:{name:"original",icon:Ce(De)}},{t:h}=Se(),c=ze("image-viewer"),{nextZIndex:x}=Ue(),i=k(),L=k([]),C=je(),w=k(!0),A=k(l.crossorigin),v=k(l.initialIndex),_=Ke(m.CONTAIN),p=k({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),z=b(()=>{const{urlList:s}=l;return s.length<=1}),F=b(()=>v.value===0),Q=b(()=>v.value===l.urlList.length-1),de=b(()=>l.urlList[v.value]),fe=b(()=>[c.e("btn"),c.e("prev"),c.is("disabled",!l.infinite&&F.value)]),U=b(()=>[c.e("btn"),c.e("next"),c.is("disabled",!l.infinite&&Q.value)]),pe=b(()=>{const{scale:s,deg:u,offsetX:g,offsetY:$,enableTransition:O}=p.value;let I=g/s,N=$/s;switch(u%360){case 90:case-270:[I,N]=[N,-I];break;case 180:case-180:[I,N]=[-I,-N];break;case 270:case-90:[I,N]=[-N,I];break}const H={transform:`scale(${s}) rotate(${u}deg) translate(${I}px, ${N}px)`,transition:O?"transform .3s":""};return _.value.name===m.CONTAIN.name&&(H.maxWidth=H.maxHeight="100%"),H}),ee=b(()=>ce(l.zIndex)?l.zIndex:x());function B(){ve(),a("close")}function me(){const s=ge(g=>{switch(g.code){case Y.esc:l.closeOnPressEscape&&B();break;case Y.space:oe();break;case Y.left:ne();break;case Y.up:t("zoomIn");break;case Y.right:le();break;case Y.down:t("zoomOut");break}}),u=ge(g=>{const $=g.deltaY||g.deltaX;t($<0?"zoomIn":"zoomOut",{zoomRate:l.zoomRate,enableTransition:!1})});C.run(()=>{X(document,"keydown",s),X(document,"wheel",u)})}function ve(){C.stop()}function ae(){w.value=!1}function te(s){w.value=!1,s.target.alt=h("el.image.error")}function se(s){if(w.value||s.button!==0||!i.value)return;p.value.enableTransition=!1;const{offsetX:u,offsetY:g}=p.value,$=s.pageX,O=s.pageY,I=ge(H=>{p.value=re(W({},p.value),{offsetX:u+H.pageX-$,offsetY:g+H.pageY-O})}),N=X(document,"mousemove",I);X(document,"mouseup",()=>{N()}),s.preventDefault()}function j(){p.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function oe(){if(w.value)return;const s=ra(m),u=Object.values(m),g=_.value.name,O=(u.findIndex(I=>I.name===g)+1)%s.length;_.value=m[s[O]],j()}function K(s){const u=l.urlList.length;v.value=(s+u)%u}function ne(){F.value&&!l.infinite||K(v.value-1)}function le(){Q.value&&!l.infinite||K(v.value+1)}function t(s,u={}){if(w.value)return;const{minScale:g,maxScale:$}=l,{zoomRate:O,rotateDeg:I,enableTransition:N}=W({zoomRate:l.zoomRate,rotateDeg:90,enableTransition:!0},u);switch(s){case"zoomOut":p.value.scale>g&&(p.value.scale=Number.parseFloat((p.value.scale/O).toFixed(3)));break;case"zoomIn":p.value.scale<$&&(p.value.scale=Number.parseFloat((p.value.scale*O).toFixed(3)));break;case"clockwise":p.value.deg+=I,a("rotate",p.value.deg);break;case"anticlockwise":p.value.deg-=I,a("rotate",p.value.deg);break}p.value.enableTransition=N}return he(de,()=>{$e(()=>{const s=L.value[0];s!=null&&s.complete||(w.value=!0)})}),he(v,s=>{j(),a("switch",s)}),J(()=>{var s,u;me(),(u=(s=i.value)==null?void 0:s.focus)==null||u.call(s)}),n({setActiveItem:K}),(s,u)=>(y(),D(la,{to:"body",disabled:!s.teleported},[r(na,{name:"viewer-fade",appear:""},{default:d(()=>[f("div",{ref_key:"wrapper",ref:i,tabindex:-1,class:E(e(c).e("wrapper")),style:ye({zIndex:e(ee)})},[f("div",{class:E(e(c).e("mask")),onClick:u[0]||(u[0]=We(g=>s.hideOnClickModal&&B(),["self"]))},null,2),T(" CLOSE "),f("span",{class:E([e(c).e("btn"),e(c).e("close")]),onClick:B},[r(e(R),null,{default:d(()=>[r(e(qe))]),_:1})],2),T(" ARROW "),e(z)?T("v-if",!0):(y(),S(G,{key:0},[f("span",{class:E(e(fe)),onClick:ne},[r(e(R),null,{default:d(()=>[r(e(Ze))]),_:1})],2),f("span",{class:E(e(U)),onClick:le},[r(e(R),null,{default:d(()=>[r(e(Ge))]),_:1})],2)],64)),T(" ACTIONS "),f("div",{class:E([e(c).e("btn"),e(c).e("actions")])},[f("div",{class:E(e(c).e("actions__inner"))},[r(e(R),{onClick:u[1]||(u[1]=g=>t("zoomOut"))},{default:d(()=>[r(e(Je))]),_:1}),r(e(R),{onClick:u[2]||(u[2]=g=>t("zoomIn"))},{default:d(()=>[r(e(Qe))]),_:1}),f("i",{class:E(e(c).e("actions__divider"))},null,2),r(e(R),{onClick:oe},{default:d(()=>[(y(),D(ea(e(_).icon)))]),_:1}),f("i",{class:E(e(c).e("actions__divider"))},null,2),r(e(R),{onClick:u[3]||(u[3]=g=>t("anticlockwise"))},{default:d(()=>[r(e(aa))]),_:1}),r(e(R),{onClick:u[4]||(u[4]=g=>t("clockwise"))},{default:d(()=>[r(e(ta))]),_:1})],2)],2),T(" CANVAS "),f("div",{class:E(e(c).e("canvas"))},[(y(!0),S(G,null,Ne(s.urlList,(g,$)=>oa((y(),S("img",{ref_for:!0,ref:O=>L.value[$]=O,key:g,src:g,style:ye(e(pe)),class:E(e(c).e("img")),crossorigin:A.value,onLoad:ae,onError:te,onMousedown:se},null,46,Fa)),[[sa,$===v.value]])),128))],2),Z(s.$slots,"default")],6)]),_:3})],8,["disabled"]))}}));var Pa=Te(Ya,[["__file","image-viewer.vue"]]);const Xa=Oe(Pa),Da=xe({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:q([String,Object])},previewSrcList:{type:q(Array),default:()=>Re([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:q(String),default:"anonymous"}}),Ua={load:o=>o instanceof Event,error:o=>o instanceof Event,switch:o=>ce(o),close:()=>!0,show:()=>!0},ja=["src","loading","crossorigin"],Ka={key:0},Wa=M({name:"ElImage",inheritAttrs:!1}),qa=M(re(W({},Wa),{props:Da,emits:Ua,setup(o,{emit:n}){const a=o;let l="";const{t:m}=Se(),h=ze("image"),c=ia(),x=Oa(),i=k(),L=k(a.crossorigin),C=k(!1),w=k(!0),A=k(!1),v=k(),_=k(),p=P&&"loading"in HTMLImageElement.prototype;let z,F;const Q=b(()=>[h.e("inner"),U.value&&h.e("preview"),w.value&&h.is("loading")]),de=b(()=>c.style),fe=b(()=>{const{fit:t}=a;return P&&t?{objectFit:t}:{}}),U=b(()=>{const{previewSrcList:t}=a;return Array.isArray(t)&&t.length>0}),pe=b(()=>{const{previewSrcList:t,initialIndex:s}=a;let u=s;return s>t.length-1&&(u=0),u}),ee=b(()=>a.loading==="eager"?!1:!p&&a.loading==="lazy"||a.lazy),B=()=>{P&&(w.value=!0,C.value=!1,i.value=a.src)};function me(t){w.value=!1,C.value=!1,n("load",t)}function ve(t){w.value=!1,C.value=!0,n("error",t)}function ae(){Ra(v.value,_.value)&&(B(),j())}const te=ca(ae,200,!0);function se(){return V(this,null,function*(){var t;if(!P)return;yield $e();const{scrollContainer:s}=a;da(s)?_.value=s:fa(s)&&s!==""?_.value=(t=document.querySelector(s))!=null?t:void 0:v.value&&(_.value=Ta(v.value)),_.value&&(z=X(_,"scroll",te),setTimeout(()=>ae(),100))})}function j(){!P||!_.value||!te||(z==null||z(),_.value=void 0)}function oe(t){if(t.ctrlKey){if(t.deltaY<0)return t.preventDefault(),!1;if(t.deltaY>0)return t.preventDefault(),!1}}function K(){U.value&&(F=X("wheel",oe,{passive:!1}),l=document.body.style.overflow,document.body.style.overflow="hidden",A.value=!0,n("show"))}function ne(){F==null||F(),document.body.style.overflow=l,A.value=!1,n("close")}function le(t){n("switch",t)}return he(()=>a.src,()=>{ee.value?(w.value=!0,C.value=!1,j(),se()):B()}),J(()=>{ee.value?se():B()}),(t,s)=>(y(),S("div",{ref_key:"container",ref:v,class:E([e(h).b(),t.$attrs.class]),style:ye(e(de))},[C.value?Z(t.$slots,"error",{key:0},()=>[f("div",{class:E(e(h).e("error"))},ue(e(m)("el.image.error")),3)]):(y(),S(G,{key:1},[i.value!==void 0?(y(),S("img",ua({key:0},e(x),{src:i.value,loading:t.loading,style:e(fe),class:e(Q),crossorigin:L.value,onClick:K,onLoad:me,onError:ve}),null,16,ja)):T("v-if",!0),w.value?(y(),S("div",{key:1,class:E(e(h).e("wrapper"))},[Z(t.$slots,"placeholder",{},()=>[f("div",{class:E(e(h).e("placeholder"))},null,2)])],2)):T("v-if",!0)],64)),e(U)?(y(),S(G,{key:2},[A.value?(y(),D(e(Xa),{key:0,"z-index":t.zIndex,"initial-index":e(pe),infinite:t.infinite,"zoom-rate":t.zoomRate,"min-scale":t.minScale,"max-scale":t.maxScale,"url-list":t.previewSrcList,"hide-on-click-modal":t.hideOnClickModal,teleported:t.previewTeleported,"close-on-press-escape":t.closeOnPressEscape,onClose:ne,onSwitch:le},{default:d(()=>[t.$slots.viewer?(y(),S("div",Ka,[Z(t.$slots,"viewer")])):T("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","zoom-rate","min-scale","max-scale","url-list","hide-on-click-modal","teleported","close-on-press-escape"])):T("v-if",!0)],64)):T("v-if",!0)],6))}}));var Za=Te(qa,[["__file","image.vue"]]);const Ga=Oe(Za),Ja=o=>pa("/api/v1/captcha/code",o),Qa={class:"flex items-center"},et=M({__name:"CodeCaptcha",props:{width:{type:Number,default:120},height:{type:Number,default:24}},emits:["change"],setup(o,{expose:n,emit:a}){const l=a,m=o,h=k(""),c=()=>V(this,null,function*(){yield Ja({}).then(i=>{h.value=i.data.image,l("change",i.data.key)})});return n({refresh:()=>V(this,null,function*(){c().then()})}),J(()=>V(this,null,function*(){we("Component <<Captcha>> mounted."),c().then()})),(i,L)=>{const C=Ga;return y(),S("div",Qa,[r(C,{alt:i.$t("common.field_captcha"),width:m.width,height:m.height,src:h.value,onClick:c},null,8,["alt","width","height","src"])])}}}),at=Ve(et,[["__scopeId","data-v-c55cdbcb"]]),tt=o=>(ma("data-v-e177fd32"),o=o(),va(),o),st={class:"app-layout-header-container"},ot={class:"app-layout-logo"},nt={class:"logo"},lt=tt(()=>f("div",{class:"app-layout-nav"},null,-1)),rt={class:"app-layout-tools"},it={class:"app-layout-content-container"},ct={class:"app-layout-footer-container"},ut=["innerHTML"],dt=M({__name:"entry",setup(o){const n=b(()=>Ee.app.getTitle()),a=b(()=>Ee.app.getCopyright());return J(()=>{we("Component - <<EntryLayout>> is mounted.")}),(l,m)=>{const h=za,c=Ia,x=La,i=xa,L=Sa;return y(),D(L,{class:"app-layout app-entry-layout"},{default:d(()=>[r(c,{class:"app-layout-header"},{default:d(()=>[f("div",st,[f("div",ot,[f("div",nt,[f("span",null,ue(e(n)),1)])]),lt,f("div",rt,[r(h,null,{default:d(()=>[r(e(ka)),r(e(Ca)),r(e(Ea))]),_:1})])])]),_:1}),r(x,{class:"app-layout-content"},{default:d(()=>[f("div",it,[Z(l.$slots,"default",{},void 0,!0)])]),_:3}),r(i,{class:"app-layout-footer"},{default:d(()=>[f("div",ct,[(y(!0),S(G,null,Ne(e(a),(C,w)=>(y(),S("div",{class:"app-text",key:w,innerHTML:C},null,8,ut))),128))])]),_:1})]),_:3})}}}),ft=Ve(dt,[["__scopeId","data-v-e177fd32"]]),pt={class:"mt-16 sm:w-full md:w-9/12 lg:w-6/12 xl:w-4/12"},mt={class:"text-center"},vt={class:"flex w-full"},_t={class:"flex-auto"},gt={class:"mx-4 flex-none"},Rt=M({__name:"login",setup(o){const{t:n}=_a(),a=ga(),{isLoginCaptchaEnabled:l}=ha(),{login:m,getUserInfo:h}=ya(),c=k(),x=k(),i=Ie(ba),L=Ie({username:[{required:!0,message:n("common.user_field_username_validation_login")}],password:[{required:!0,message:n("common.user_field_password_validation")}],captchaValue:[{required:l,message:n("common.field_captcha_validation")}]}),C=b(()=>!(i.username&&i.password)),w=()=>V(this,null,function*(){yield c.value.validate(v=>{v&&m(i).then(()=>V(this,null,function*(){yield h().then(),a.push("/").then()}))})}),A=v=>V(this,null,function*(){i.captchaKey=v});return J(()=>V(this,null,function*(){we("Page <<Login>> mounted.")})),(v,_)=>{const p=Ye;return y(),D(e(ft),null,{default:d(()=>[f("div",pt,[r(p,{shadow:"hover"},{header:d(()=>[f("div",mt,ue(v.$t("common.user_pages_login_title")),1)]),default:d(()=>[r(e(Va),{ref_key:"form",ref:c,model:i,rules:L,class:"m-8 mb-12"},{default:d(()=>[r(e(ie),{prop:"username"},{default:d(()=>[r(e(_e),{size:"large",modelValue:i.username,"onUpdate:modelValue":_[0]||(_[0]=z=>i.username=z),placeholder:e(n)("common.user_field_username_placeholder_login")},{prefix:d(()=>[r(e(Le),{icon:"mdi:account-outline"})]),_:1},8,["modelValue","placeholder"])]),_:1}),r(e(ie),{prop:"password"},{default:d(()=>[r(e(_e),{size:"large",modelValue:i.password,"onUpdate:modelValue":_[1]||(_[1]=z=>i.password=z),placeholder:e(n)("common.user_field_password_placeholder")},{prefix:d(()=>[r(e(Le),{icon:"mdi:lock-outline"})]),_:1},8,["modelValue","placeholder"])]),_:1}),e(C)?(y(),D(e(ie),{key:0,prop:"captchaValue"},{default:d(()=>[f("div",vt,[f("div",_t,[r(e(_e),{size:"large",value:i.captchaValue,"onUpdate:value":_[2]||(_[2]=z=>i.captchaValue=z),placeholder:e(n)("common.field_captcha_placeholder")},null,8,["value","placeholder"])]),f("div",gt,[r(e(at),{class:"h-full",ref_key:"captcha",ref:x,onChange:A},null,512)])])]),_:1})):T("",!0),r(e(ie),{class:"mt-8"},{default:d(()=>[r(e($a),{size:"large",disabled:e(C),onClick:w,type:"primary",class:"w-full"},{default:d(()=>[wa(ue(v.$t("common.button_login")),1)]),_:1},8,["disabled"])]),_:1})]),_:1},8,["model","rules"])]),_:1})])]),_:1})}}});export{Rt as default};
