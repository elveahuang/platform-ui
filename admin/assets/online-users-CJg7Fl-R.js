var z=Object.defineProperty;var A=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var T=(d,e,o)=>e in d?z(d,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):d[e]=o,N=(d,e)=>{for(var o in e||(e={}))G.call(e,o)&&T(d,o,e[o]);if(A)for(var o of A(e))j.call(e,o)&&T(d,o,e[o]);return d};var k=(d,e,o)=>new Promise((w,y)=>{var I=r=>{try{c(o.next(r))}catch(f){y(f)}},u=r=>{try{c(o.throw(r))}catch(f){y(f)}},c=r=>r.done?w(r.value):Promise.resolve(r.value).then(I,u);c((o=o.apply(d,e)).next())});import{u as H}from"./data-table-Cb1PdI7W.js";import{x as O,d as J,z as K,A as R,r as b,o as Q,l as W,b as v,f as S,h as a,i as n,w as m,m as X,e as x,k as M,t as Y,F as B,C as L,G as Z,M as ee}from"./index-BbLQHiyt.js";import"./ThemeDropdown.vue_vue_type_style_index_0_scoped_8799785f_lang-iZ5X_zze.js";import{_ as te}from"./DataTable.vue_vue_type_script_setup_true_lang-COAqM9AD.js";import{C as ae}from"./index-CQrlHa6L.js";import{I as le}from"./index-DMvaY5sl.js";import{_ as ne,F as oe}from"./index-DEFnLzg3.js";import"./index-CvEeTzit.js";import{_ as ie}from"./index-ZXdSfSZK.js";import{_ as se}from"./index-egDYegZn.js";import"./index--vtrO87k.js";import"./responsiveObserve-DukdiBOy.js";import"./index-DvmR5mJt.js";import"./shallowequal-DTYoBxxL.js";import"./css-CjeDAR7Q.js";import"./LeftOutlined-EfzYutZz.js";import"./RightOutlined-BX-GG-Td.js";import"./isMobile-DTq5YDvJ.js";import"./useMemo-CErI8Ot7.js";import"./useMergedState-CcB6vQ5T.js";import"./index-AEFbHGMk.js";import"./move-DM1ensEU.js";import"./index-8AsyzgNx.js";import"./index-DG3bMmkf.js";import"./dropdown-Dmh_6TQs.js";import"./EyeOutlined-Bglb0xXO.js";import"./Col-Dm0Pg39N.js";import"./useFlexGapSupport--IEOTYQz.js";const me=d=>O("/api/v1/admin/user-session/list",d),de=d=>O("/api/v1/admin/user-session/detail",d),Ee=J({__name:"online-users",setup(d){const{t:e}=K(),{initialize:o,handleResult:w,handleParams:y}=H(),I=[{title:e("common.field_user_name"),dataIndex:"username",key:"username",width:100,ellipsis:!0,fixed:"left"},{title:e("common.field_ip"),dataIndex:"host",key:"host",sorter:!0,width:100,ellipsis:!0,fixed:"left"},{title:e("common.field_user_agent"),dataIndex:"ua",key:"ua",width:100,ellipsis:!0},{title:e("common.field_client_id"),dataIndex:"clientId",key:"clientId",width:100,ellipsis:!0},{title:e("common.field_client_name"),dataIndex:"clientName",key:"clientName",width:100,ellipsis:!0},{title:e("common.field_start_datetime"),dataIndex:"startDatetime",key:"startDatetime",width:100,ellipsis:!0},{title:e("common.field_last_access_datetime"),dataIndex:"lastAccessDatetime",key:"lastAccessDatetime",width:100,ellipsis:!0},{title:e("common.field_end_datetime"),dataIndex:"endDatetime",key:"endDatetime",width:100,ellipsis:!0},{title:e("common.field_success"),dataIndex:"success",key:"success",width:100,ellipsis:!0},{title:e("common.field_last_modified_at"),dataIndex:"lastModifiedAt",key:"lastModifiedAt",width:100,ellipsis:!0},{title:e("common.label_action"),dataIndex:"operation",key:"operation",width:80,ellipsis:!0,fixed:"right"}],u=R(o(I)),c=b(),r=b(!1),f=()=>k(this,null,function*(){yield me(y(u)).then(i=>{w(u,i)})}),g=b(""),D=b(!1),U=b(),s=R({});e("common.field_title_validation"),e("common.field_description_validation");const V=i=>k(this,null,function*(){var t;(t=U.value)==null||t.clearValidate(),D.value=!0,i&&i>0?(g.value=e("common.announcement_pages_edit_title"),yield de({id:i}).then(F=>{Object.assign(s,N({},F.data))})):g.value=e("common.announcement_pages_add_title")});return Q(()=>k(this,null,function*(){W("Page <<AnnouncementAdminListPage>> mounted.")})),(i,t)=>{const F=ie,E=Z,h=se,$=ae,p=le,_=ne,P=oe,q=ee;return v(),S(B,null,[a(F,{title:n(e)("common.field_online_users")},null,8,["title"]),a($,null,{default:m(()=>[a(n(te),{ref_key:"dataTableRef",ref:c,model:n(u),"onUpdate:model":t[0]||(t[0]=l=>X(u)?u.value=l:null),onGetDataList:f,"row-selection-enabled":r.value},{bodyCell:m(({column:l,record:C})=>[l.dataIndex==="operation"?(v(),x(h,{key:0},{default:m(()=>[a(E,{type:"primary",onClick:re=>V(C.id)},{default:m(()=>[M(Y(i.$t("查看")),1)]),_:2},1032,["onClick"])]),_:2},1024)):l.dataIndex==="success"?(v(),S(B,{key:1},[C.success?(v(),x(h,{key:0},{default:m(()=>[M("成功")]),_:1})):C.success?L("",!0):(v(),x(h,{key:1},{default:m(()=>[M("失败")]),_:1}))],64)):L("",!0)]),_:1},8,["model","row-selection-enabled"])]),_:1}),a(q,{class:"app-modal",open:D.value,"onUpdate:open":t[8]||(t[8]=l=>D.value=l),title:g.value,onOk:i.handleFormSubmit,onCancel:i.handleFormCancel},{default:m(()=>[a($,null,{default:m(()=>[a(P,{ref_key:"entityForm",ref:U,model:n(s),onFinish:i.handleFormSubmit,"label-col":{span:4},"wrapper-col":{span:12}},{default:m(()=>[a(_,{name:"address",label:i.$t("common.field_user_name")},{default:m(()=>[a(p,{disabled:"",value:n(s).username,"onUpdate:value":t[1]||(t[1]=l=>n(s).username=l)},null,8,["value"])]),_:1},8,["label"]),a(_,{name:"chain",label:i.$t("common.field_ip")},{default:m(()=>[a(p,{disabled:"",value:n(s).host,"onUpdate:value":t[2]||(t[2]=l=>n(s).host=l)},null,8,["value"])]),_:1},8,["label"]),a(_,{name:"title",label:i.$t("common.field_user_agent")},{default:m(()=>[a(p,{disabled:"",value:n(s).ua,"onUpdate:value":t[3]||(t[3]=l=>n(s).ua=l)},null,8,["value"])]),_:1},8,["label"]),a(_,{name:"title",label:i.$t("common.field_client_id")},{default:m(()=>[a(p,{disabled:"",value:n(s).clientId,"onUpdate:value":t[4]||(t[4]=l=>n(s).clientId=l)},null,8,["value"])]),_:1},8,["label"]),a(_,{name:"title",label:i.$t("common.field_client_name")},{default:m(()=>[a(p,{disabled:"",value:n(s).clientName,"onUpdate:value":t[5]||(t[5]=l=>n(s).clientName=l)},null,8,["value"])]),_:1},8,["label"]),a(_,{name:"title",label:i.$t("common.field_start_datetime")},{default:m(()=>[a(p,{disabled:"",value:n(s).startDatetime,"onUpdate:value":t[6]||(t[6]=l=>n(s).startDatetime=l)},null,8,["value"])]),_:1},8,["label"]),a(_,{name:"title",label:i.$t("common.field_last_access_datetime")},{default:m(()=>[a(p,{disabled:"",value:n(s).startDatetime,"onUpdate:value":t[7]||(t[7]=l=>n(s).startDatetime=l)},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model","onFinish"])]),_:1})]),_:1},8,["open","title","onOk","onCancel"])],64)}}});export{Ee as default};
