var p=(l,n,c)=>new Promise((m,_)=>{var d=o=>{try{i(c.next(o))}catch(t){_(t)}},r=o=>{try{i(c.throw(o))}catch(t){_(t)}},i=o=>o.done?m(o.value):Promise.resolve(o.value).then(d,r);i((c=c.apply(l,n)).next())});import{a6 as H,d as S,r as C,o as F,l as V,e as f,g as x,k as e,ac as q,c as $,s as B,f as k,w as s,m as u,t as N,i as a,ad as K,h as P,F as R,x as G,y as O,A as j,ae as J,B as Q,C as W,D as X,_ as Y,G as Z,a as ee,af as ae,b as te,H as A,ag as oe,a9 as se,n as ne,O as le,P as ce,ah as re,ai as pe,L as de,S as ie,M as ue}from"./index-D9PIeplA.js";/* empty css                *//* empty css                     *//* empty css                  *//* empty css               *//* empty css                 */import"./el-progress-W5oXDTJT.js";/* empty css                 */import{_ as _e,A as me,a as he}from"./el-menu-item-CLgVu4vq.js";/* empty css                                                             *//* empty css                                                             */import"./AppIcon.vue_vue_type_script_setup_true_lang-DnRPjHcy.js";const fe=l=>H("/api/v1/captcha/code",l),ge={class:"flex items-center"},ye=S({__name:"CodeCaptcha",props:{width:{type:Number,default:120},height:{type:Number,default:32}},emits:["change"],setup(l,{expose:n,emit:c}){const m=c,_=l,d=C(""),r=()=>p(this,null,function*(){yield fe({}).then(o=>{d.value=o.data.image,m("change",o.data.key)})});return n({refresh:()=>p(this,null,function*(){r().then()})}),F(()=>p(this,null,function*(){V("Component <<Captcha>> mounted."),r().then()})),(o,t)=>{const g=q;return f(),x("div",ge,[e(g,{preview:!1,alt:o.$t("common.field_captcha"),width:_.width,height:_.height,src:d.value,onClick:r},null,8,["alt","width","height","src"])])}}}),we=l=>(W("data-v-9f57d84d"),l=l(),X(),l),ve={class:"app-layout-header-container"},Ce={class:"app-layout-logo"},Ve={class:"logo"},Ee=we(()=>u("div",{class:"app-layout-nav"},null,-1)),be={class:"app-layout-tools"},xe={class:"app-layout-content-container"},ke={class:"app-layout-footer-container"},Se=["innerHTML"],Fe=S({__name:"entry",setup(l){const n=$(()=>B.app.getTitle()),c=$(()=>B.app.getCopyright());return F(()=>{V("Component <<EntryLayout>> is mounted.")}),(m,_)=>{const d=G,r=O,i=j,o=J,t=Q;return f(),k(t,{class:"app-layout"},{default:s(()=>[e(r,{class:"app-layout-header"},{default:s(()=>[u("div",ve,[u("div",Ce,[u("div",Ve,[u("span",null,N(a(n)),1)])]),Ee,u("div",be,[e(d,null,{default:s(()=>[e(a(_e)),e(a(me)),e(a(he))]),_:1})])])]),_:1}),e(i,{class:"app-layout-content"},{default:s(()=>[u("div",xe,[K(m.$slots,"default",{},void 0,!0)])]),_:3}),e(o,{class:"app-layout-footer"},{default:s(()=>[u("div",ke,[(f(!0),x(R,null,P(a(c),(g,E)=>(f(),x("div",{key:E,class:"app-text",innerHTML:g},null,8,Se))),128))])]),_:1})]),_:3})}}}),Ie=Y(Fe,[["__scopeId","data-v-9f57d84d"]]),Le={class:"mb-36 content-center sm:w-full md:w-9/12 lg:w-6/12 xl:w-4/12"},Re=S({__name:"login",setup(l){const{t:n}=Z(),c=ee(),{login:m,getUserInfo:_}=ae(),{isLoginCaptchaEnabled:d}=te(),r=C(),i=C(),o=C(!1),t=A(oe),g=A({username:[{required:!0,message:n("common.user_field_username_validation_login")}],password:[{required:!0,message:n("common.user_field_password_validation")}],captchaValue:[{required:!0,message:n("common.field_captcha_validation")}]}),E=y=>p(this,null,function*(){V(y)}),I=()=>p(this,null,function*(){yield r.value.validate().then(()=>p(this,null,function*(){yield m(t).then(()=>p(this,null,function*(){yield _().then(),yield c.push("/").then()})).finally(()=>{t.captchaKey="",t.captchaValue="",o.value=!1,d&&i.value.refresh()})}))}),D=y=>p(this,null,function*(){t.captchaKey=y});return F(()=>p(this,null,function*(){V("Page <<Login>> mounted.")})),(y,h)=>{const b=le,v=ce,L=re,M=pe,T=de,U=ie,z=ue;return f(),k(a(Ie),null,{default:s(()=>[u("div",Le,[e(z,{shadow:"never",header:y.$t("common.button_login")},{default:s(()=>[e(U,{ref_key:"form",ref:r,model:a(t),rules:a(g),onFinish:I,onFinishFailed:E},{default:s(()=>[e(v,{prop:"username"},{default:s(()=>[e(b,{size:"large",modelValue:a(t).username,"onUpdate:modelValue":h[0]||(h[0]=w=>a(t).username=w),placeholder:a(n)("common.user_field_username_placeholder_login")},null,8,["modelValue","placeholder"])]),_:1}),e(v,{prop:"password"},{default:s(()=>[e(b,{size:"large",modelValue:a(t).password,"onUpdate:modelValue":h[1]||(h[1]=w=>a(t).password=w),placeholder:a(n)("common.user_field_password_placeholder")},null,8,["modelValue","placeholder"])]),_:1}),a(d)?(f(),k(v,{key:0,name:"captchaValue"},{default:s(()=>[e(M,{wrap:!1},{default:s(()=>[e(L,{flex:"auto"},{default:s(()=>[e(b,{size:"large",modelValue:a(t).captchaValue,"onUpdate:modelValue":h[2]||(h[2]=w=>a(t).captchaValue=w),placeholder:a(n)("common.field_captcha_placeholder")},null,8,["modelValue","placeholder"])]),_:1}),e(L,{flex:"none",class:"mx-4"},{default:s(()=>[e(a(ye),{ref_key:"captcha",ref:i,onChange:D},null,512)]),_:1})]),_:1})]),_:1})):se("",!0),e(v,null,{default:s(()=>[e(T,{size:"large","html-type":"submit",type:"primary",disabled:o.value,class:"w-full",onClick:I},{default:s(()=>[ne(N(a(n)("common.button_login")),1)]),_:1},8,["disabled"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["header"])])]),_:1})}}});export{Re as default};
