var oe=Object.defineProperty;var I=Object.getOwnPropertySymbols;var ne=Object.prototype.hasOwnProperty,ie=Object.prototype.propertyIsEnumerable;var z=(d,n,r)=>n in d?oe(d,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):d[n]=r,j=(d,n)=>{for(var r in n||(n={}))ne.call(n,r)&&z(d,r,n[r]);if(I)for(var r of I(n))ie.call(n,r)&&z(d,r,n[r]);return d};var p=(d,n,r)=>new Promise((F,h)=>{var v=m=>{try{C(r.next(m))}catch(c){h(c)}},y=m=>{try{C(r.throw(m))}catch(c){h(c)}},C=m=>m.done?F(m.value):Promise.resolve(m.value).then(v,y);C((r=r.apply(d,n)).next())});import{d as re,U as se,r as b,V as N,e as _,g as U,i as l,w as o,m as M,t as A,j as s,F as K,h as de,f as $,k as me,ak as ue,l as pe,al as ce,am as _e,D as fe,an as be,G as ve,ao as ye,H as we,ai as Ce,Y as ke,Z as $e,ap as he,a1 as ge}from"./index-D3_r0cba.js";/* empty css                     *//* empty css                 */import{B as G,S as Ee,_ as Me,a as q,b as Y,c as Ae,d as Fe,e as Oe,f as Be}from"./constants-Q-EE-TBP.js";import"./el-progress-3qeBbLjJ.js";/* empty css                */import{A as Re,_ as Te}from"./el-popover-Chqh5Hvn.js";/* empty css                 *//* empty css                  */import{u as De}from"./data-table-CYvhiD6o.js";import{_ as S}from"./Icon.vue_vue_type_script_setup_true_lang-DSUqlfA8.js";import{A as Ne}from"./AEditor-BctFRMEJ.js";import"./index.min-C9ZtcG9k.js";const Ue=["innerHTML"],Qe=re({__name:"tag",setup(d){const{t:n}=se(),{initialize:r,handleResult:F,handleParams:h}=De(),v=b(),y=b(!1),C=()=>p(this,null,function*(){yield Ae(h(c)).then(t=>{F(c,t)})}),m=[{title:n("common.serial_number"),dataKey:"sortOrder",key:"sortOrder",width:100,ellipsis:!0,sorter:!0},{title:n("common.field_title"),dataKey:"title",key:"title",width:150,ellipsis:!0,sorter:!0},{title:n("common.field_last_modified_at"),dataKey:"lastModifiedAt",key:"lastModifiedAt",width:120,sorter:!0,ellipsis:!0},{title:n("common.label_action"),dataKey:"operation",key:"operation",width:50,ellipsis:!0,fixed:"right"}],c=N(r(m)),i=N(new G),O=b(""),f=b(!1),B=b(),L=t=>p(this,null,function*(){var e;(e=B.value)==null||e.clearValidate(),t&&t>0?(O.value=n("common.banner_edit"),yield Fe({id:t}).then(u=>{f.value=!0,Object.assign(i,j({},u.data))})):(O.value=n("common.banner_add"),Object.assign(i,new G),f.value=!0)}),P=()=>p(this,null,function*(){yield B.value.validate().then(()=>p(this,null,function*(){Oe(i).then(t=>{t.code=="200"&&(f.value=!1,v.value.refresh())})})).catch(t=>{pe(t)})}),Z=()=>{f.value=!1},J=N({title:[{required:!0,message:n("common.field_title_validation")}]}),R=(t=0)=>p(this,null,function*(){const e=t>0?[t]:v.value.selectedRowKeys();if(ce(e)){_e({message:n("common.label_please_select_one_record")}).then();return}Be({ids:e}).then(u=>{u.code=="200"&&(f.value=!1,v.value.refresh())})}),k=b(!1),g=b(""),Q=t=>p(this,null,function*(){g.value=t.description,k.value=!0}),W=()=>p(this,null,function*(){g.value="",k.value=!1}),X=()=>p(this,null,function*(){g.value="",k.value=!1});return(t,e)=>{const u=fe,x=be,ee=ve,V=ye,T=we,H=Ce,te=ke,w=$e,ae=he,le=ge;return _(),U(K,null,[l(s(Re),null,{title:o(()=>[M(A(t.$t("common.banner_management")),1)]),_:1}),l(T,null,{default:o(()=>[l(s(Te),{ref_key:"dataTableRef",ref:v,model:c,"onUpdate:model":e[3]||(e[3]=a=>c=a),"row-selection-enabled":y.value,"toolbar-enabled":!0,onGetDataList:C},{toolbar:o(()=>[l(u,{type:"primary",onClick:e[0]||(e[0]=a=>L(0))},{default:o(()=>[M(A(t.$t("common.banner_add")),1)]),_:1}),l(u,{onClick:e[1]||(e[1]=a=>y.value=!y.value)},{default:o(()=>[M(A(y.value?t.$t("common.label_batch_operation_cancel"):t.$t("common.label_batch_operation")),1)]),_:1}),l(u,{danger:"",onClick:e[2]||(e[2]=a=>R(0))},{default:o(()=>[M(A(t.$t("common.button_delete")),1)]),_:1})]),body:o(()=>[(_(),U(K,null,de(m,a=>(_(),U(K,null,[a.dataKey==="operation"?(_(),$(V,{key:a.dataKey,label:a.title,fixed:"right"},{default:o(E=>[l(ee,null,{default:o(()=>[l(u,{type:"primary",size:"small",onClick:D=>Q(E.row)},{icon:o(()=>[l(s(S),{icon:"mdi:eye-outline"})]),_:2},1032,["onClick"]),l(u,{type:"primary",size:"small",onClick:D=>L(E.row.id)},{icon:o(()=>[l(s(S),{icon:"ant-design:edit-outlined"})]),_:2},1032,["onClick"]),l(x,{title:t.$t("common.label_confirm_delete_record"),onConfirm:D=>R(E.row.id)},{default:o(()=>[l(u,{danger:"",type:"primary",size:"small",onConfirm:D=>R(E.row.id)},{icon:o(()=>[l(s(S),{icon:"ant-design:close-outlined"})]),_:2},1032,["onConfirm"])]),_:2},1032,["title","onConfirm"])]),_:2},1024)]),_:2},1032,["label"])):(_(),$(V,{key:a.dataKey,label:a.title,prop:a.dataKey,width:a.width},null,8,["label","prop","width"]))],64))),64))]),_:1},8,["model","row-selection-enabled"])]),_:1}),l(H,{open:k.value,"onUpdate:open":e[4]||(e[4]=a=>k.value=a),class:"app-modal",title:t.$t("common.label_preview"),onOk:W,onCancel:X},{default:o(()=>[l(T,null,{default:o(()=>[me("div",{innerHTML:g.value},null,8,Ue)]),_:1})]),_:1},8,["open","title"]),l(H,{open:f.value,"onUpdate:open":e[11]||(e[11]=a=>f.value=a),class:"app-modal",title:O.value,onOk:P,onCancel:Z},{default:o(()=>[l(T,null,{default:o(()=>[l(le,ue({ref_key:"entityForm",ref:B,model:i,rules:J},{labelCol:{span:4},wrapperCol:{span:16}},{onFinish:P}),{default:o(()=>[l(w,{name:"title",label:t.$t("common.field_title")},{default:o(()=>[l(te,{value:i.title,"onUpdate:value":e[5]||(e[5]=a=>i.title=a),placeholder:s(n)("common.field_title_placeholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),l(w,{name:"type",label:t.$t("common.field_type")},{default:o(()=>[(_(),$(s(Me),{key:i.id,relation:i.type,"onUpdate:relation":e[6]||(e[6]=a=>i.type=a),"multiple-ind":!0,code:s(Ee).BANNER},null,8,["relation","code"]))]),_:1},8,["label"]),l(w,{name:"description",label:t.$t("common.field_content")},{default:o(()=>[l(s(Ne),{value:i.description,"onUpdate:value":e[7]||(e[7]=a=>i.description=a)},null,8,["value"])]),_:1},8,["label"]),l(w,{name:"idx",label:t.$t("common.serial_number")},{default:o(()=>[l(ae,{value:i.sortOrder,"onUpdate:value":e[8]||(e[8]=a=>i.sortOrder=a),max:999,min:0,placeholder:s(n)("common.input_serial_number")},null,8,["value","placeholder"])]),_:1},8,["label"]),l(w,{name:"cover",label:t.$t("common.field_cover")},{default:o(()=>[(_(),$(s(Y),{key:i.id,attachment:i.cover,"onUpdate:attachment":e[9]||(e[9]=a=>i.cover=a),code:s(q).BANNER_COVER},null,8,["attachment","code"]))]),_:1},8,["label"]),l(w,{name:"mobileCover",label:t.$t("common.field_mobile_cover")},{default:o(()=>[(_(),$(s(Y),{key:i.id,attachment:i.mobileCover,"onUpdate:attachment":e[10]||(e[10]=a=>i.mobileCover=a),code:s(q).BANNER_MOBILE_COVER},null,8,["attachment","code"]))]),_:1},8,["label"])]),_:1},16,["model","rules"])]),_:1})]),_:1},8,["open","title"])],64)}}});export{Qe as default};
