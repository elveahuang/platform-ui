var H=Object.defineProperty;var S=Object.getOwnPropertySymbols;var K=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable;var z=(o,t,s)=>t in o?H(o,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[t]=s,L=(o,t)=>{for(var s in t||(t={}))K.call(t,s)&&z(o,s,t[s]);if(S)for(var s of S(t))J.call(t,s)&&z(o,s,t[s]);return o};var f=(o,t,s)=>new Promise((C,g)=>{var w=m=>{try{d(s.next(m))}catch(u){g(u)}},v=m=>{try{d(s.throw(m))}catch(u){g(u)}},d=m=>m.done?C(m.value):Promise.resolve(m.value).then(w,v);d((s=s.apply(o,t)).next())});/* empty css             */import{u as Q,_ as W,E as X,a as Y}from"./checkbox-nWboU3BA.js";import{a as Z,E as x}from"./pagination-kciLWH27.js";import{E as ee}from"./card-W_bhW2aY.js";import{E as te}from"./page-header-5RamJJTS.js";import{p as E,d as ae,q as le,v as A,r as k,o as oe,l as ne,e as P,g as se,j as a,w as n,k as ie,x as y,t as b,i as r,f as me,y as de,z as re,F as ue,A as ce,B as pe}from"./index-Z8sLUYNh.js";import{E as _e,a as fe,b as ye}from"./index-otofz8T0.js";import"./index-dIgdIK-c.js";import"./event-Bjhng1YN.js";import"./strings-mI3Mw8DK.js";const be=o=>E("/api/v1/admin/user/list",o),ve=o=>E("/api/v1/admin/user/details",o),ke=o=>E("/api/v1/admin/user/save",o),ge=o=>E("/api/v1/admin/user/delete",o),$e={class:"pb-4"},Ve=ae({__name:"index",setup(o){const{t}=le(),{initialize:s,handleResult:C,handleParams:g}=Q(),w=[{title:t("common.field_title"),dataIndex:"username",key:"username",width:300,sorter:!0},{title:t("common.field_content"),dataIndex:"displayName",key:"displayName"},{title:t("common.field_last_modified_at"),dataIndex:"lastModifiedAt",key:"lastModifiedAt",sorter:!0},{title:t("common.label_action"),dataIndex:"operation",key:"operation",width:200}],v=A(s(w)),d=k(),m=()=>f(this,null,function*(){yield be(g(v)).then(e=>{C(v,e)})}),u=k(""),c=k(!1),M=k(),$=k(!1),p=A({}),U=A({title:[{required:!0,message:t("common.field_title_validation")}],content:[{required:!0,message:t("common.field_description_validation")}]}),N=e=>f(this,null,function*(){c.value=!0,e&&e>0?(u.value=t("common.announcement_pages_edit_title"),yield ve({id:e}).then(l=>{Object.assign(p,L({},l.data))})):u.value=t("common.announcement_pages_add_title")}),q=()=>{c.value=!1},T=()=>f(this,null,function*(){yield M.value.validate().then(()=>f(this,null,function*(){ke(p).then(e=>{e.code=="200"&&(c.value=!1,d.value.refresh())})}))}),D=(e=0)=>f(this,null,function*(){const l=e>0?[e]:d.value.selectedRowKeys();if(ce(l)){pe({message:"请选择"}).then();return}ge({ids:l}).then(F=>{F.code=="200"&&(c.value=!1,d.value.refresh())})});return oe(()=>f(this,null,function*(){ne("Page <<AnnouncementAdminListPage>> mounted.")})),(e,l)=>{const F=te,_=Z,I=x,h=X,V=ee,B=_e,R=fe,j=ye,O=Y;return P(),se(ue,null,[a(F,{title:e.$t("common.announcement_management")},null,8,["title"]),a(V,null,{default:n(()=>[ie("div",$e,[a(I,null,{default:n(()=>[a(_,{type:"primary",onClick:l[0]||(l[0]=i=>N(0))},{default:n(()=>[y(b(e.$t("common.button_add")),1)]),_:1}),a(_,{onClick:l[1]||(l[1]=i=>$.value=!r($))},{default:n(()=>[y(b(r($)?e.$t("common.label_batch_operation_cancel"):e.$t("common.label_batch_operation")),1)]),_:1}),a(_,{onClick:l[2]||(l[2]=i=>D(0))},{default:n(()=>[y(b(e.$t("common.button_delete")),1)]),_:1})]),_:1})]),a(r(W),{ref_key:"dataTableRef",ref:d,model:v,"onUpdate:model":l[3]||(l[3]=i=>v=i),onGetDataList:m},{default:n(()=>[r($)?(P(),me(h,{key:0,type:"selection",width:"30",class:"text-center"})):de("",!0),a(h,{label:e.$t("common.field_title"),prop:"username"},null,8,["label"]),a(h,{label:e.$t("common.field_content"),prop:"displayName"},null,8,["label"]),a(h,{fixed:"right",label:e.$t("common.label_action"),width:"200"},{default:n(i=>[a(_,{link:"",type:"primary",size:"small",onClick:G=>N(i.row.id)},{default:n(()=>[y(b(e.$t("common.button_edit")),1)]),_:2},1032,["onClick"]),a(_,{link:"",type:"primary",size:"small",onClick:G=>D(i.row.id)},{default:n(()=>[y(b(e.$t("common.button_delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),a(O,{class:"app-modal",modelValue:r(c),"onUpdate:modelValue":l[6]||(l[6]=i=>re(c)?c.value=i:null),title:r(u)},{footer:n(()=>[a(I,null,{default:n(()=>[a(_,{type:"primary",onClick:T},{default:n(()=>[y(b(e.$t("common.button_submit")),1)]),_:1}),a(_,{onClick:q},{default:n(()=>[y(b(e.$t("common.button_cancel")),1)]),_:1})]),_:1})]),default:n(()=>[a(V,null,{default:n(()=>[a(j,{ref_key:"entityForm",ref:M,model:p,rules:U,onFinish:T},{default:n(()=>[a(R,{name:"title",label:e.$t("common.field_title")},{default:n(()=>[a(B,{value:p.username,"onUpdate:value":l[4]||(l[4]=i=>p.username=i),placeholder:r(t)("common.field_title_placeholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),a(R,{name:"content",label:e.$t("common.field_content")},{default:n(()=>[a(B,{value:p.displayName,"onUpdate:value":l[5]||(l[5]=i=>p.displayName=i),placeholder:r(t)("common.field_content_placeholder")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1})]),_:1},8,["modelValue","title"])],64)}}});export{Ve as default};
