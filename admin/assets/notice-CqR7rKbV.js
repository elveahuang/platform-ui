var oe=Object.defineProperty;var H=Object.getOwnPropertySymbols;var ne=Object.prototype.hasOwnProperty,ie=Object.prototype.propertyIsEnumerable;var z=(m,n,r)=>n in m?oe(m,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):m[n]=r,j=(m,n)=>{for(var r in n||(n={}))ne.call(n,r)&&z(m,r,n[r]);if(H)for(var r of H(n))ie.call(n,r)&&z(m,r,n[r]);return m};var p=(m,n,r)=>new Promise((F,h)=>{var v=d=>{try{C(r.next(d))}catch(c){h(c)}},y=d=>{try{C(r.throw(d))}catch(c){h(c)}},C=d=>d.done?F(d.value):Promise.resolve(d.value).then(v,y);C((r=r.apply(m,n)).next())});import{d as re,G as se,r as b,H as K,b as _,f as U,j as l,w as o,m as M,t as O,h as s,F as D,g as me,k as de,I as ue,e as $,l as pe,J as ce,K as _e,L as fe,M as be,N as ve,O as ye,P as we,Q as Ce,S as ke,T as $e,x as he,U as ge}from"./index-BeP6e3P3.js";/* empty css                     *//* empty css                 */import{B as G,S as Ee,_ as Me,a as q,b as J,c as Oe,d as Fe,e as Ae,f as Te}from"./constants-DObKiF6h.js";import"./el-progress-BpWGod9n.js";/* empty css                */import{A as Be,_ as Ne}from"./el-popover-ZzUaI3wE.js";/* empty css                 *//* empty css                  */import{u as Re}from"./data-table-B_qhr1Nx.js";import{_ as S}from"./AppIcon.vue_vue_type_script_setup_true_lang-Cl2e8xei.js";import{_ as Ke}from"./AEditor.vue_vue_type_script_setup_true_lang-DI4KkNHQ.js";import"./index.min-B41PbxWl.js";const Ue=["innerHTML"],Xe=re({__name:"notice",setup(m){const{t:n}=se(),{initialize:r,handleResult:F,handleParams:h}=Re(),v=b(),y=b(!1),C=()=>p(this,null,function*(){yield Oe(h(c)).then(t=>{F(c,t)})}),d=[{title:n("common.serial_number"),dataKey:"sortOrder",key:"sortOrder",width:100,ellipsis:!0,sorter:!0},{title:n("common.field_title"),dataKey:"title",key:"title",width:150,ellipsis:!0,sorter:!0},{title:n("common.field_last_modified_at"),dataKey:"lastModifiedAt",key:"lastModifiedAt",width:120,sorter:!0,ellipsis:!0},{title:n("common.label_action"),dataKey:"operation",key:"operation",width:50,ellipsis:!0,fixed:"right"}],c=K(r(d)),i=K(new G),A=b(""),f=b(!1),T=b(),L=t=>p(this,null,function*(){var e;(e=T.value)==null||e.clearValidate(),t&&t>0?(A.value=n("common.banner_edit"),yield Te({id:t}).then(u=>{f.value=!0,Object.assign(i,j({},u.data))})):(A.value=n("common.banner_add"),Object.assign(i,new G),f.value=!0)}),P=()=>p(this,null,function*(){yield T.value.validate().then(()=>p(this,null,function*(){Fe(i).then(t=>{t.code=="200"&&(f.value=!1,v.value.refresh())})})).catch(t=>{pe(t)})}),Q=()=>{f.value=!1},W=K({title:[{required:!0,message:n("common.field_title_validation")}]}),B=(t=0)=>p(this,null,function*(){const e=t>0?[t]:v.value.selectedRowKeys();if(ce(e)){_e({message:n("common.label_please_select_one_record")}).then();return}Ae({ids:e}).then(u=>{u.code=="200"&&(f.value=!1,v.value.refresh())})}),k=b(!1),g=b(""),X=t=>p(this,null,function*(){g.value=t.description,k.value=!0}),Y=()=>p(this,null,function*(){g.value="",k.value=!1}),Z=()=>p(this,null,function*(){g.value="",k.value=!1});return(t,e)=>{const u=fe,x=$e,ee=he,I=ge,N=be,V=ve,te=ye,w=we,ae=Ce,le=ke;return _(),U(D,null,[l(s(Be),null,{title:o(()=>[M(O(t.$t("common.banner_management")),1)]),_:1}),l(N,null,{default:o(()=>[l(s(Ne),{ref_key:"dataTableRef",ref:v,model:c,"onUpdate:model":e[3]||(e[3]=a=>c=a),onGetDataList:C,"row-selection-enabled":y.value,"toolbar-enabled":!0},{toolbar:o(()=>[l(u,{type:"primary",onClick:e[0]||(e[0]=a=>L(0))},{default:o(()=>[M(O(t.$t("common.banner_add")),1)]),_:1}),l(u,{onClick:e[1]||(e[1]=a=>y.value=!y.value)},{default:o(()=>[M(O(y.value?t.$t("common.label_batch_operation_cancel"):t.$t("common.label_batch_operation")),1)]),_:1}),l(u,{danger:"",onClick:e[2]||(e[2]=a=>B(0))},{default:o(()=>[M(O(t.$t("common.button_delete")),1)]),_:1})]),body:o(()=>[(_(),U(D,null,me(d,a=>(_(),U(D,null,[a.dataKey==="operation"?(_(),$(I,{key:a.dataKey,label:a.title,fixed:"right"},{default:o(E=>[l(ee,null,{default:o(()=>[l(u,{type:"primary",size:"small",onClick:R=>X(E.row)},{icon:o(()=>[l(s(S),{icon:"mdi:eye-outline"})]),_:2},1032,["onClick"]),l(u,{type:"primary",size:"small",onClick:R=>L(E.row.id)},{icon:o(()=>[l(s(S),{icon:"ant-design:edit-outlined"})]),_:2},1032,["onClick"]),l(x,{title:t.$t("common.label_confirm_delete_record"),onConfirm:R=>B(E.row.id)},{default:o(()=>[l(u,{danger:"",type:"primary",size:"small",onConfirm:R=>B(E.row.id)},{icon:o(()=>[l(s(S),{icon:"ant-design:close-outlined"})]),_:2},1032,["onConfirm"])]),_:2},1032,["title","onConfirm"])]),_:2},1024)]),_:2},1032,["label"])):(_(),$(I,{label:a.title,key:a.dataKey,prop:a.dataKey,width:a.width},null,8,["label","prop","width"]))],64))),64))]),_:1},8,["model","row-selection-enabled"])]),_:1}),l(V,{class:"app-modal",open:k.value,"onUpdate:open":e[4]||(e[4]=a=>k.value=a),title:t.$t("common.label_preview"),onOk:Y,onCancel:Z},{default:o(()=>[l(N,null,{default:o(()=>[de("div",{innerHTML:g.value},null,8,Ue)]),_:1})]),_:1},8,["open","title"]),l(V,{class:"app-modal",open:f.value,"onUpdate:open":e[11]||(e[11]=a=>f.value=a),title:A.value,onOk:P,onCancel:Q},{default:o(()=>[l(N,null,{default:o(()=>[l(le,ue({ref_key:"entityForm",ref:T,model:i,rules:W,onFinish:P},{labelCol:{span:4},wrapperCol:{span:16}}),{default:o(()=>[l(w,{name:"title",label:t.$t("common.field_title")},{default:o(()=>[l(te,{value:i.title,"onUpdate:value":e[5]||(e[5]=a=>i.title=a),placeholder:s(n)("common.field_title_placeholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),l(w,{name:"type",label:t.$t("common.field_type")},{default:o(()=>[(_(),$(s(Me),{"multiple-ind":!0,key:i.id,relation:i.type,"onUpdate:relation":e[6]||(e[6]=a=>i.type=a),code:s(Ee).BANNER},null,8,["relation","code"]))]),_:1},8,["label"]),l(w,{name:"description",label:t.$t("common.field_content")},{default:o(()=>[l(s(Ke),{value:i.description,"onUpdate:value":e[7]||(e[7]=a=>i.description=a)},null,8,["value"])]),_:1},8,["label"]),l(w,{name:"idx",label:t.$t("common.serial_number")},{default:o(()=>[l(ae,{max:999,min:0,value:i.sortOrder,"onUpdate:value":e[8]||(e[8]=a=>i.sortOrder=a),placeholder:s(n)("common.input_serial_number")},null,8,["value","placeholder"])]),_:1},8,["label"]),l(w,{name:"cover",label:t.$t("common.field_cover")},{default:o(()=>[(_(),$(s(J),{key:i.id,attachment:i.cover,"onUpdate:attachment":e[9]||(e[9]=a=>i.cover=a),code:s(q).BANNER_COVER},null,8,["attachment","code"]))]),_:1},8,["label"]),l(w,{name:"mobileCover",label:t.$t("common.field_mobile_cover")},{default:o(()=>[(_(),$(s(J),{key:i.id,attachment:i.mobileCover,"onUpdate:attachment":e[10]||(e[10]=a=>i.mobileCover=a),code:s(q).BANNER_MOBILE_COVER},null,8,["attachment","code"]))]),_:1},8,["label"])]),_:1},16,["model","rules"])]),_:1})]),_:1},8,["open","title"])],64)}}});export{Xe as default};
