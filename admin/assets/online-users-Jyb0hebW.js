var ne=Object.defineProperty;var H=Object.getOwnPropertySymbols;var oe=Object.prototype.hasOwnProperty,ie=Object.prototype.propertyIsEnumerable;var z=(m,o,r)=>o in m?ne(m,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):m[o]=r,j=(m,o)=>{for(var r in o||(o={}))oe.call(o,r)&&z(m,r,o[r]);if(H)for(var r of H(o))ie.call(o,r)&&z(m,r,o[r]);return m};var p=(m,o,r)=>new Promise((F,h)=>{var v=d=>{try{C(r.next(d))}catch(c){h(c)}},y=d=>{try{C(r.throw(d))}catch(c){h(c)}},C=d=>d.done?F(d.value):Promise.resolve(d.value).then(v,y);C((r=r.apply(m,o)).next())});import{d as re,D as se,r as b,G as D,e as _,g as K,k as l,w as n,n as M,t as O,i as s,F as U,h as me,m as de,H as ue,f as $,l as pe,I as ce,J as _e,K as fe,L as be,M as ve,N as ye,O as we,P as Ce,Q as ke,S as $e,T as he,U as ge}from"./index-B9ipHYVR.js";/* empty css                     *//* empty css                 */import{B as G,S as Ee,_ as Me,a as q,b as J,c as Oe,d as Fe,e as Ae,f as Te}from"./constants-BKES_qea.js";import"./el-progress-RB8E1rRg.js";/* empty css                */import{A as Be,_ as Ne}from"./el-popover-B_tydEzd.js";/* empty css                 *//* empty css                  */import{u as Re}from"./data-table-DbBX-KIg.js";import{_ as S}from"./AppIcon.vue_vue_type_script_setup_true_lang-CndpDNil.js";import{_ as De}from"./AEditor.vue_vue_type_script_setup_true_lang-Bj_kMsz8.js";import"./index.min-K71O_KM3.js";const Ke=["innerHTML"],Xe=re({__name:"online-users",setup(m){const{t:o}=se(),{initialize:r,handleResult:F,handleParams:h}=Re(),v=b(),y=b(!1),C=()=>p(this,null,function*(){yield Oe(h(c)).then(t=>{F(c,t)})}),d=[{title:o("common.serial_number"),dataKey:"sortOrder",key:"sortOrder",width:100,ellipsis:!0,sorter:!0},{title:o("common.field_title"),dataKey:"title",key:"title",width:150,ellipsis:!0,sorter:!0},{title:o("common.field_last_modified_at"),dataKey:"lastModifiedAt",key:"lastModifiedAt",width:120,sorter:!0,ellipsis:!0},{title:o("common.label_action"),dataKey:"operation",key:"operation",width:50,ellipsis:!0,fixed:"right"}],c=D(r(d)),i=D(new G),A=b(""),f=b(!1),T=b(),L=t=>p(this,null,function*(){var e;(e=T.value)==null||e.clearValidate(),t&&t>0?(A.value=o("common.banner_edit"),yield Te({id:t}).then(u=>{f.value=!0,Object.assign(i,j({},u.data))})):(A.value=o("common.banner_add"),Object.assign(i,new G),f.value=!0)}),P=()=>p(this,null,function*(){yield T.value.validate().then(()=>p(this,null,function*(){Fe(i).then(t=>{t.code=="200"&&(f.value=!1,v.value.refresh())})})).catch(t=>{pe(t)})}),Q=()=>{f.value=!1},W=D({title:[{required:!0,message:o("common.field_title_validation")}]}),B=(t=0)=>p(this,null,function*(){const e=t>0?[t]:v.value.selectedRowKeys();if(ce(e)){_e({message:o("common.label_please_select_one_record")}).then();return}Ae({ids:e}).then(u=>{u.code=="200"&&(f.value=!1,v.value.refresh())})}),k=b(!1),g=b(""),X=t=>p(this,null,function*(){g.value=t.description,k.value=!0}),Y=()=>p(this,null,function*(){g.value="",k.value=!1}),Z=()=>p(this,null,function*(){g.value="",k.value=!1});return(t,e)=>{const u=fe,x=$e,ee=he,I=ge,N=be,V=ve,te=ye,w=we,ae=Ce,le=ke;return _(),K(U,null,[l(s(Be),null,{title:n(()=>[M(O(t.$t("common.banner_management")),1)]),_:1}),l(N,null,{default:n(()=>[l(s(Ne),{ref_key:"dataTableRef",ref:v,model:c,"onUpdate:model":e[3]||(e[3]=a=>c=a),"row-selection-enabled":y.value,"toolbar-enabled":!0,onGetDataList:C},{toolbar:n(()=>[l(u,{type:"primary",onClick:e[0]||(e[0]=a=>L(0))},{default:n(()=>[M(O(t.$t("common.banner_add")),1)]),_:1}),l(u,{onClick:e[1]||(e[1]=a=>y.value=!y.value)},{default:n(()=>[M(O(y.value?t.$t("common.label_batch_operation_cancel"):t.$t("common.label_batch_operation")),1)]),_:1}),l(u,{danger:"",onClick:e[2]||(e[2]=a=>B(0))},{default:n(()=>[M(O(t.$t("common.button_delete")),1)]),_:1})]),body:n(()=>[(_(),K(U,null,me(d,a=>(_(),K(U,null,[a.dataKey==="operation"?(_(),$(I,{key:a.dataKey,label:a.title,fixed:"right"},{default:n(E=>[l(ee,null,{default:n(()=>[l(u,{type:"primary",size:"small",onClick:R=>X(E.row)},{icon:n(()=>[l(s(S),{icon:"mdi:eye-outline"})]),_:2},1032,["onClick"]),l(u,{type:"primary",size:"small",onClick:R=>L(E.row.id)},{icon:n(()=>[l(s(S),{icon:"ant-design:edit-outlined"})]),_:2},1032,["onClick"]),l(x,{title:t.$t("common.label_confirm_delete_record"),onConfirm:R=>B(E.row.id)},{default:n(()=>[l(u,{danger:"",type:"primary",size:"small",onConfirm:R=>B(E.row.id)},{icon:n(()=>[l(s(S),{icon:"ant-design:close-outlined"})]),_:2},1032,["onConfirm"])]),_:2},1032,["title","onConfirm"])]),_:2},1024)]),_:2},1032,["label"])):(_(),$(I,{key:a.dataKey,label:a.title,prop:a.dataKey,width:a.width},null,8,["label","prop","width"]))],64))),64))]),_:1},8,["model","row-selection-enabled"])]),_:1}),l(V,{open:k.value,"onUpdate:open":e[4]||(e[4]=a=>k.value=a),class:"app-modal",title:t.$t("common.label_preview"),onOk:Y,onCancel:Z},{default:n(()=>[l(N,null,{default:n(()=>[de("div",{innerHTML:g.value},null,8,Ke)]),_:1})]),_:1},8,["open","title"]),l(V,{open:f.value,"onUpdate:open":e[11]||(e[11]=a=>f.value=a),class:"app-modal",title:A.value,onOk:P,onCancel:Q},{default:n(()=>[l(N,null,{default:n(()=>[l(le,ue({ref_key:"entityForm",ref:T,model:i,rules:W},{labelCol:{span:4},wrapperCol:{span:16}},{onFinish:P}),{default:n(()=>[l(w,{name:"title",label:t.$t("common.field_title")},{default:n(()=>[l(te,{value:i.title,"onUpdate:value":e[5]||(e[5]=a=>i.title=a),placeholder:s(o)("common.field_title_placeholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),l(w,{name:"type",label:t.$t("common.field_type")},{default:n(()=>[(_(),$(s(Me),{key:i.id,relation:i.type,"onUpdate:relation":e[6]||(e[6]=a=>i.type=a),"multiple-ind":!0,code:s(Ee).BANNER},null,8,["relation","code"]))]),_:1},8,["label"]),l(w,{name:"description",label:t.$t("common.field_content")},{default:n(()=>[l(s(De),{value:i.description,"onUpdate:value":e[7]||(e[7]=a=>i.description=a)},null,8,["value"])]),_:1},8,["label"]),l(w,{name:"idx",label:t.$t("common.serial_number")},{default:n(()=>[l(ae,{value:i.sortOrder,"onUpdate:value":e[8]||(e[8]=a=>i.sortOrder=a),max:999,min:0,placeholder:s(o)("common.input_serial_number")},null,8,["value","placeholder"])]),_:1},8,["label"]),l(w,{name:"cover",label:t.$t("common.field_cover")},{default:n(()=>[(_(),$(s(J),{key:i.id,attachment:i.cover,"onUpdate:attachment":e[9]||(e[9]=a=>i.cover=a),code:s(q).BANNER_COVER},null,8,["attachment","code"]))]),_:1},8,["label"]),l(w,{name:"mobileCover",label:t.$t("common.field_mobile_cover")},{default:n(()=>[(_(),$(s(J),{key:i.id,attachment:i.mobileCover,"onUpdate:attachment":e[10]||(e[10]=a=>i.mobileCover=a),code:s(q).BANNER_MOBILE_COVER},null,8,["attachment","code"]))]),_:1},8,["label"])]),_:1},16,["model","rules"])]),_:1})]),_:1},8,["open","title"])],64)}}});export{Xe as default};
