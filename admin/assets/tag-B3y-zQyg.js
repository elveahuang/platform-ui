var ne=Object.defineProperty;var N=Object.getOwnPropertySymbols;var ie=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable;var S=(d,e,o)=>e in d?ne(d,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):d[e]=o,C=(d,e)=>{for(var o in e||(e={}))ie.call(e,o)&&S(d,o,e[o]);if(N)for(var o of N(e))se.call(e,o)&&S(d,o,e[o]);return d};var c=(d,e,o)=>new Promise((E,b)=>{var M=p=>{try{u(o.next(p))}catch(v){b(v)}},f=p=>{try{u(o.throw(p))}catch(v){b(v)}},u=p=>p.done?E(p.value):Promise.resolve(p.value).then(M,f);u((o=o.apply(d,e)).next())});import{d as re,H as de,I as $,r as _,aB as H,o as me,l as ce,P as pe,b as O,f as ue,h as t,w as n,k as _e,t as V,j as z,i,e as j,Q as q,F as fe,S as ve,T as ye,U as ge,v as he,M as be,N as we,J as ke,K as Ce,ah as Ee,L as Me}from"./index-CLSrHFfR.js";/* empty css                     *//* empty css                 *//* empty css                        *//* empty css                   *//* empty css                */import"./el-progress-DrA7EKYw.js";/* empty css                  */import{u as Fe}from"./data-table-dArUXrry.js";import{_ as P}from"./AppIcon.vue_vue_type_script_setup_true_lang-ClHVUtK5.js";import{A as Ie}from"./index-CpDm3dUt.js";import{_ as Te}from"./DataTable.vue_vue_type_script_setup_true_lang-CQLF19He.js";import{d as K,e as xe,f as $e,g as Oe,h as Pe}from"./tag.type-BhCxM5eo.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Ae={class:"!text-neutral-500"},De=["innerHTML"],We=re({__name:"tag",setup(d){var D,R;const{t:e}=de(),{initialize:o,handleResult:E,handleParams:b}=Fe(),M=[{title:e("common.field_idx"),dataIndex:"sortOrder",key:"sortOrder",width:50,sorter:!0},{title:e("common.field_title"),dataIndex:"title",key:"title",width:250,sorter:!0},{title:e("common.field_description"),dataIndex:"description",key:"description",width:250},{title:e("common.field_last_modified_at"),dataIndex:"lastModifiedAt",key:"lastModifiedAt",width:120,sorter:!0,ellipsis:!0},{title:e("common.label_action"),dataIndex:"operation",key:"operation",width:60,ellipsis:!0,fixed:"right"}],f=$(o(M)),u=_(),p=_(!1),v=((D=H.currentRoute.value.query)==null?void 0:D.typeId)||"",G=_(((R=H.currentRoute.value.query)==null?void 0:R.title)||""),J=()=>c(this,null,function*(){yield xe(C({typeId:v},b(f))).then(a=>{E(f,a)})}),F=_(""),y=_(!1),I=_();let r=$(new K);const Q=$({title:[{required:!0,message:e("common.field_label_validation")}]}),W=a=>c(this,null,function*(){var l;(l=I.value)==null||l.clearValidate(),y.value=!0,a&&a>0?(F.value=e("common.tag_pages_edit_title"),yield $e({id:a}).then(m=>{Object.assign(r,C({},m.data))})):(Object.assign(r,C({},new K)),F.value=e("common.tag_pages_add_title"))}),X=()=>{y.value=!1},A=()=>c(this,null,function*(){r.tagTypeId=v,yield I.value.validate().then(()=>c(this,null,function*(){Oe(r).then(a=>{a.code=="200"&&(y.value=!1,u.value.refresh())})}))}),Y=(a=0)=>c(this,null,function*(){const l=a>0?[a]:u.value.selectedRowKeys();ve(l)?ye({message:e("common.label_please_select_one_record")}).then():Pe({ids:l}).then(m=>{if(m.code=="200")y.value=!1,u.value.refresh();else for(const h in m.data)m.data.hasOwnProperty(h)&&message.error(`${m.data[h]} - ${h}`)})}),g=_(!1),w=_(""),Z=a=>c(this,null,function*(){w.value=a.description,g.value=!0}),ee=()=>c(this,null,function*(){w.value="",g.value=!1}),te=()=>c(this,null,function*(){w.value="",g.value=!1});return me(()=>c(this,null,function*(){ce("Page <<DictionaryChildrenAdminListPage>> mounted.")})),(a,l)=>{const m=ge,h=pe("a-popconfirm"),ae=he,T=be,U=we,B=ke,x=Ce,le=Ee,oe=Me;return O(),ue(fe,null,[t(i(Ie),null,{title:n(()=>[_e(V(a.$t("common.tag_management"))+" - ",1),z("label",Ae,V(G.value),1)]),_:1}),t(T,null,{default:n(()=>[t(i(Te),{ref_key:"dataTableRef",ref:u,model:f,"onUpdate:model":l[0]||(l[0]=s=>f=s),onGetDataList:J,"row-selection-enabled":p.value,"tool-bar-enabled":!0},{bodyCell:n(({column:s,record:k})=>[s.dataIndex==="operation"?(O(),j(ae,{key:0},{default:n(()=>[t(m,{type:"primary",size:"small",onClick:L=>Z(k)},{icon:n(()=>[t(i(P),{icon:"mdi:eye-outline"})]),_:2},1032,["onClick"]),t(m,{type:"primary",size:"small",onClick:L=>W(k.id)},{icon:n(()=>[t(i(P),{icon:"ant-design:edit-outlined"})]),_:2},1032,["onClick"]),k.source!==1?(O(),j(h,{key:0,onConfirm:L=>Y(k.id),title:a.$t("common.label_confirm_delete_record")},{default:n(()=>[t(m,{danger:"",type:"primary",size:"small"},{icon:n(()=>[t(i(P),{icon:"ant-design:close-outlined"})]),_:1})]),_:2},1032,["onConfirm","title"])):q("",!0)]),_:2},1024)):q("",!0)]),_:1},8,["model","row-selection-enabled"])]),_:1}),t(U,{class:"app-modal",open:g.value,"onUpdate:open":l[1]||(l[1]=s=>g.value=s),title:a.$t("common.label_preview"),onOk:ee,onCancel:te},{default:n(()=>[t(T,null,{default:n(()=>[z("div",{innerHTML:w.value},null,8,De)]),_:1})]),_:1},8,["open","title"]),t(U,{class:"app-modal",open:y.value,"onUpdate:open":l[5]||(l[5]=s=>y.value=s),title:F.value,onOk:A,onCancel:X},{default:n(()=>[t(T,null,{default:n(()=>[t(oe,{ref_key:"entityForm",ref:I,model:i(r),rules:Q,onFinish:A,"label-col":{span:4},"wrapper-col":{span:12}},{default:n(()=>[t(x,{name:"title",label:a.$t("common.field_title")},{default:n(()=>[t(B,{maxlength:255,value:i(r).title,"onUpdate:value":l[2]||(l[2]=s=>i(r).title=s),placeholder:i(e)("common.field_title_placeholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),t(x,{name:"idx",label:a.$t("common.field_idx")},{default:n(()=>[t(le,{max:999,min:0,value:i(r).sortOrder,"onUpdate:value":l[3]||(l[3]=s=>i(r).sortOrder=s),placeholder:i(e)("common.field_idx_placeholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),t(x,{name:"description",label:a.$t("common.field_description")},{default:n(()=>[t(B,{maxlength:250,value:i(r).description,"onUpdate:value":l[4]||(l[4]=s=>i(r).description=s),placeholder:i(e)("common.field_description_placeholder")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1})]),_:1},8,["open","title"])],64)}}});export{We as default};
