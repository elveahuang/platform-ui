var L=Object.defineProperty;var b=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var O=(n,t,e)=>t in n?L(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,$=(n,t)=>{for(var e in t||(t={}))R.call(t,e)&&O(n,e,t[e]);if(b)for(var e of b(t))j.call(t,e)&&O(n,e,t[e]);return n};var r=(n,t,e)=>new Promise((o,s)=>{var c=a=>{try{i(e.next(a))}catch(u){s(u)}},d=a=>{try{i(e.throw(a))}catch(u){s(u)}},i=a=>a.done?o(a.value):Promise.resolve(a.value).then(c,d);i((e=e.apply(n,t)).next())});import{d as g,b as H,c as T,r as M,aj as q,Y as S,a1 as E,b1 as A,o as y,l as h,ao as x,e as p,g as _,m as v,a$ as P,G as F,b8 as I,am as U,an as V,ap as w,b9 as D,ba as G,aq as Y,i as l,F as N,h as z,f as J,H as K,t as W,k as f}from"./index-B9ipHYVR.js";import{g as X,a as Z,_ as k}from"./AEditor.vue_vue_type_script_setup_true_lang-Bj_kMsz8.js";import{Q as tt,E as et}from"./index.min-K71O_KM3.js";const nt={class:"editor"},ot=g({__name:"QEditor",props:{options:{type:Object,default(){return{}}},value:{type:String,default:""}},emits:["update:value"],setup(n,{emit:t}){const e=n,{locale:o}=H(),s=T(()=>o),c=M(),d=T(()=>e.value),i=q(),a=m=>r(this,null,function*(){const C={};i.value=new tt(c.value,X(P(C,m)))}),u=()=>r(this,null,function*(){E(i.value)});return S(d,m=>{!E(i.value)&&!A(i.value.getSemanticHTML(),m)&&(i.value.getText(),i.value.focus(),i.value.setText(m))}),S(s,m=>{}),y(()=>r(this,null,function*(){h("Component <<QuillEditor>> mounted."),yield a(e.options).then()})),x(()=>r(this,null,function*(){h("Component <<QuillEditor>> onBeforeUnmount."),yield u().then()})),(m,C)=>(p(),_("div",nt,[v("div",{ref_key:"editorRef",ref:c,class:"quill-editor"},null,512)]))}});function B(n){return G((t,e)=>({get(){return t(),n},set(o){n=o,requestAnimationFrame(()=>{requestAnimationFrame(()=>{e()})})}}))}class Q extends et{constructor(t={}){return super(t),this.vueRenderers=F(new Map),this.contentComponent=null,this.reactiveState=B(this.view.state),this.reactiveExtensionStorage=B(this.extensionStorage),this.on("transaction",()=>{this.reactiveState.value=this.view.state,this.reactiveExtensionStorage.value=this.extensionStorage}),I(this)}get state(){return this.reactiveState?this.reactiveState.value:this.view.state}get storage(){return this.reactiveExtensionStorage?this.reactiveExtensionStorage.value:super.storage}registerPlugin(t,e){super.registerPlugin(t,e),this.reactiveState.value=this.view.state}unregisterPlugin(t){super.unregisterPlugin(t),this.reactiveState.value=this.view.state}}const st=g({name:"EditorContent",props:{editor:{default:null,type:Object}},setup(n){const t=M(),e=U();return V(()=>{const o=n.editor;o&&o.options.element&&t.value&&Y(()=>{if(!t.value||!o.options.element.firstChild)return;const s=l(t.value);t.value.append(...o.options.element.childNodes),o.contentComponent=e.ctx._,o.setOptions({element:s}),o.createNodeViews()})}),x(()=>{const o=n.editor;if(!o||(o.isDestroyed||o.view.setProps({nodeViews:{}}),o.contentComponent=null,!o.options.element.firstChild))return;const s=document.createElement("div");s.append(...o.options.element.childNodes),o.setOptions({element:s})}),{rootEl:t}},render(){const n=[];return this.editor&&this.editor.vueRenderers.forEach(t=>{const e=w(D,{to:t.teleportElement,key:t.id},w(t.component,$({ref:t.id},t.props)));n.push(e)}),w("div",{ref:t=>{this.rootEl=t}},...n)}}),it={class:"editor-menu"},at=g({__name:"TipTapMenu",props:{editor:{type:Q,default:null}},setup(n){const t=n,e=F([{icon:"bold",title:"Bold",action:()=>t.editor.chain().focus().toggleBold().run(),isActive:()=>t.editor.isActive("bold")},{icon:"italic",title:"Italic",action:()=>t.editor.chain().focus().toggleItalic().run(),isActive:()=>t.editor.isActive("italic")}]),o=()=>r(this,null,function*(){});return y(()=>r(this,null,function*(){h("Component <<TipTapEditor>> mounted."),yield o().then()})),(s,c)=>(p(),_("div",it,[v("div",null,[(p(!0),_(N,null,z(e,(d,i)=>(p(),J(l(rt),K({key:i,ref_for:!0},d),null,16))),128))])]))}}),rt=g({__name:"TipTapMenuItem",props:{icon:{type:String,required:!0},title:{type:String,required:!0},action:{type:Function,required:!0,default:()=>{}},isActive:{type:Function,default:()=>{}}},setup(n){return(t,e)=>(p(),_("a",null,W(n.title),1))}}),ct={class:"editor"},ut=g({__name:"TEditor",props:{options:{type:Object,default(){return{}}},value:{type:String,default:""}},emits:["update:value"],setup(n,{emit:t}){const e=t,o=n,s=q(),c=T(()=>o.value),d=a=>r(this,null,function*(){const u={content:c.value,onUpdate:()=>{e("update:value",s.value.getHTML())}};s.value=new Q(Z(P(u,a)))}),i=()=>r(this,null,function*(){E(s.value)||s.value.destroy()});return S(c,a=>{!E(s.value)&&!A(s.value.getHTML(),a)&&s.value.setOptions({content:a})}),y(()=>r(this,null,function*(){h("Component <<TipTapEditor>> onMounted."),yield d(o.options).then()})),x(()=>r(this,null,function*(){h("Component <<TipTapEditor>> onBeforeUnmount."),yield i().then()})),(a,u)=>(p(),_("div",ct,[f(l(at)),f(l(st),{editor:s.value},null,8,["editor"])]))}}),lt={class:"m-6"},dt={class:"m-6"},pt={class:"m-6"},mt={class:"m-6"},gt=g({__name:"editor",setup(n){return y(()=>r(this,null,function*(){h("Page <<Editor>> mounted.")})),(t,e)=>(p(),_(N,null,[v("div",lt,[f(l(k))]),v("div",dt,[f(l(k))]),v("div",pt,[f(l(ot))]),v("div",mt,[f(l(ut))])],64))}});export{gt as default};
