var G=Object.defineProperty;var M=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var A=(d,e,n)=>e in d?G(d,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):d[e]=n,N=(d,e)=>{for(var n in e||(e={}))j.call(e,n)&&A(d,n,e[n]);if(M)for(var n of M(e))z.call(e,n)&&A(d,n,e[n]);return d};var y=(d,e,n)=>new Promise((k,v)=>{var I=m=>{try{p(n.next(m))}catch(_){v(_)}},c=m=>{try{p(n.throw(m))}catch(_){v(_)}},p=m=>m.done?k(m.value):Promise.resolve(m.value).then(I,c);p((n=n.apply(d,e)).next())});import{G as O,d as H,H as J,I as C,r as f,o as K,l as Q,P as W,b,f as T,h as a,i as S,w as s,e as U,k as E,t as X,F as L,Q as B,U as Y,v as Z,M as ee,J as te,K as ae,L as le,N as ne}from"./index-CLSrHFfR.js";/* empty css                   *//* empty css                     *//* empty css                 *//* empty css                */import"./el-progress-DrA7EKYw.js";/* empty css                  */import{u as ie}from"./data-table-dArUXrry.js";import{_ as oe}from"./DataTable.vue_vue_type_script_setup_true_lang-CQLF19He.js";const se=d=>O("/api/v1/admin/user-session/list",d),de=d=>O("/api/v1/admin/user-session/detail",d),Ie=H({__name:"online-users",setup(d){const{t:e}=J(),{initialize:n,handleResult:k,handleParams:v}=ie(),I=[{title:e("common.field_user_name"),dataIndex:"username",key:"username",width:100,ellipsis:!0,fixed:"left"},{title:e("common.field_ip"),dataIndex:"host",key:"host",sorter:!0,width:100,ellipsis:!0,fixed:"left"},{title:e("common.field_user_agent"),dataIndex:"ua",key:"ua",width:100,ellipsis:!0},{title:e("common.field_client_id"),dataIndex:"clientId",key:"clientId",width:100,ellipsis:!0},{title:e("common.field_client_name"),dataIndex:"clientName",key:"clientName",width:100,ellipsis:!0},{title:e("common.field_start_datetime"),dataIndex:"startDatetime",key:"startDatetime",width:100,ellipsis:!0},{title:e("common.field_last_access_datetime"),dataIndex:"lastAccessDatetime",key:"lastAccessDatetime",width:100,ellipsis:!0},{title:e("common.field_end_datetime"),dataIndex:"endDatetime",key:"endDatetime",width:100,ellipsis:!0},{title:e("common.field_success"),dataIndex:"success",key:"success",width:100,ellipsis:!0},{title:e("common.field_last_modified_at"),dataIndex:"lastModifiedAt",key:"lastModifiedAt",width:100,ellipsis:!0},{title:e("common.label_action"),dataIndex:"operation",key:"operation",width:80,ellipsis:!0,fixed:"right"}],c=C(n(I)),p=f(),m=f(!1),_=()=>y(this,null,function*(){yield se(v(c)).then(i=>{k(c,i)})}),w=f(""),g=f(!1),$=f(),o=C({});C({title:[{required:!0,message:e("common.field_title_validation")}],content:[{required:!0,message:e("common.field_description_validation")}]});const P=i=>y(this,null,function*(){var t;(t=$.value)==null||t.clearValidate(),g.value=!0,i&&i>0?(w.value=e("common.announcement_pages_edit_title"),yield de({id:i}).then(D=>{Object.assign(o,N({},D.data))})):w.value=e("common.announcement_pages_add_title")});return K(()=>y(this,null,function*(){Q("Page <<AnnouncementAdminListPage>> mounted.")})),(i,t)=>{const D=W("a-page-header"),R=Y,F=Z,x=ee,u=te,r=ae,V=le,q=ne;return b(),T(L,null,[a(D,{title:S(e)("common.field_online_users")},null,8,["title"]),a(x,null,{default:s(()=>[a(S(oe),{ref_key:"dataTableRef",ref:p,model:c,"onUpdate:model":t[0]||(t[0]=l=>c=l),onGetDataList:_,"row-selection-enabled":m.value},{bodyCell:s(({column:l,record:h})=>[l.dataIndex==="operation"?(b(),U(F,{key:0},{default:s(()=>[a(R,{type:"primary",onClick:me=>P(h.id)},{default:s(()=>[E(X(i.$t("查看")),1)]),_:2},1032,["onClick"])]),_:2},1024)):l.dataIndex==="success"?(b(),T(L,{key:1},[h.success?(b(),U(F,{key:0},{default:s(()=>[E("成功")]),_:1})):h.success?B("",!0):(b(),U(F,{key:1},{default:s(()=>[E("失败")]),_:1}))],64)):B("",!0)]),_:1},8,["model","row-selection-enabled"])]),_:1}),a(q,{class:"app-modal",open:g.value,"onUpdate:open":t[8]||(t[8]=l=>g.value=l),title:w.value,onOk:i.handleFormSubmit,onCancel:i.handleFormCancel},{default:s(()=>[a(x,null,{default:s(()=>[a(V,{ref_key:"entityForm",ref:$,model:o,onFinish:i.handleFormSubmit,"label-col":{span:4},"wrapper-col":{span:12}},{default:s(()=>[a(r,{name:"address",label:i.$t("common.field_user_name")},{default:s(()=>[a(u,{disabled:"",value:o.username,"onUpdate:value":t[1]||(t[1]=l=>o.username=l)},null,8,["value"])]),_:1},8,["label"]),a(r,{name:"chain",label:i.$t("common.field_ip")},{default:s(()=>[a(u,{disabled:"",value:o.host,"onUpdate:value":t[2]||(t[2]=l=>o.host=l)},null,8,["value"])]),_:1},8,["label"]),a(r,{name:"title",label:i.$t("common.field_user_agent")},{default:s(()=>[a(u,{disabled:"",value:o.ua,"onUpdate:value":t[3]||(t[3]=l=>o.ua=l)},null,8,["value"])]),_:1},8,["label"]),a(r,{name:"title",label:i.$t("common.field_client_id")},{default:s(()=>[a(u,{disabled:"",value:o.clientId,"onUpdate:value":t[4]||(t[4]=l=>o.clientId=l)},null,8,["value"])]),_:1},8,["label"]),a(r,{name:"title",label:i.$t("common.field_client_name")},{default:s(()=>[a(u,{disabled:"",value:o.clientName,"onUpdate:value":t[5]||(t[5]=l=>o.clientName=l)},null,8,["value"])]),_:1},8,["label"]),a(r,{name:"title",label:i.$t("common.field_start_datetime")},{default:s(()=>[a(u,{disabled:"",value:o.startDatetime,"onUpdate:value":t[6]||(t[6]=l=>o.startDatetime=l)},null,8,["value"])]),_:1},8,["label"]),a(r,{name:"title",label:i.$t("common.field_last_access_datetime")},{default:s(()=>[a(u,{disabled:"",value:o.startDatetime,"onUpdate:value":t[7]||(t[7]=l=>o.startDatetime=l)},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model","onFinish"])]),_:1})]),_:1},8,["open","title","onOk","onCancel"])],64)}}});export{Ie as default};
