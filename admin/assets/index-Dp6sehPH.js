var Z=Object.defineProperty;var S=Object.getOwnPropertySymbols;var J=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable;var O=(m,o,i)=>o in m?Z(m,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):m[o]=i,K=(m,o)=>{for(var i in o||(o={}))J.call(o,i)&&O(m,i,o[i]);if(S)for(var i of S(o))Q.call(o,i)&&O(m,i,o[i]);return m};var f=(m,o,i)=>new Promise((w,g)=>{var T=r=>{try{u(i.next(r))}catch(p){g(p)}},k=r=>{try{u(i.throw(r))}catch(p){g(p)}},u=r=>r.done?w(r.value):Promise.resolve(r.value).then(T,k);u((i=i.apply(m,o)).next())});import{P as W,d as X,U as x,V as E,r as b,o as ee,l as te,ah as oe,e as ae,g as le,k as a,i as t,w as n,j as F,n as v,t as y,m as C,F as ne,ak as se,al as ie,D as de,H as me,ai as re,Y as ue,Z as pe,ao as ce,ap as _e,a1 as fe,G as be}from"./index-Avz7Fwku.js";/* empty css                 *//* empty css                     */import{e as ve,A as ye,a as Ve,d as ge,f as we,g as ke}from"./validation-D02R3BSN.js";/* empty css                 */import"./el-progress-Dh_ZdxWN.js";/* empty css                */import{u as $e}from"./data-table-CKqjPWDq.js";import{A as he}from"./AEditor-Kjw0w8lC.js";import"./index.min-ClyED5Os.js";const Ee=m=>W("/api/v1/admin/banner/list",m),Fe=["innerHTML"],Ce={class:"app-modal-body"},Te={class:"app-modal-footer"},He=X({__name:"index",setup(m){const{t:o}=x(),{initialize:i,handleResult:w,handleParams:g}=$e(),k={columns:[{title:o("common.serial_number"),dataKey:"sortOrder",key:"sortOrder",width:100},{title:o("common.field_title"),dataKey:"title",key:"title",width:150},{title:o("common.field_last_modified_at"),dataKey:"lastModifiedAt",key:"lastModifiedAt"},{title:o("common.label_action"),dataKey:"operation",key:"operation"}]},u=E(i(k)),r=b(),p=b(!1),L=()=>f(this,null,function*(){yield Ee(g(u)).then(l=>{w(u,l)})}),D=b(""),c=b(!1),$=b(),d=E({}),P=E({title:[{required:!0,message:o("common.field_title_validation")}],content:[{required:!0,message:o("common.field_description_validation"),validator:ve}]}),B=l=>f(this,null,function*(){var e;(e=$.value)==null||e.clearValidate(),D.value=o("common.announcement_pages_add_title"),Object.assign(d,K({},ge)),c.value=!0}),H=()=>{c.value=!1},M=()=>f(this,null,function*(){yield $.value.validate(l=>f(this,null,function*(){l&&we(d).then(e=>{e.code=="200"&&(c.value=!1,r.value.refresh())})}))}),I=(l=0)=>f(this,null,function*(){const e=l>0?[l]:r.value.selectedRowKeys();if(se(e)){ie({message:o("common.label_please_select_one_record")}).then();return}ke({ids:e}).then(_=>{_.code=="200"&&(c.value=!1,r.value.refresh())})}),h=b(!1),N=b("");return ee(()=>f(this,null,function*(){te("Page <<UserSessionIndexPage>> mounted.")})),(l,e)=>{const _=de,G=me,A=re,R=ue,V=pe,U=ce,j=_e,q=oe("app-date-range-picker"),z=fe,Y=be;return ae(),le(ne,null,[a(t(ye),{title:l.$t("common.banner_management")},null,8,["title"]),a(G,{shadow:"never"},{default:n(()=>[a(t(Ve),{ref_key:"dataTableRef",ref:r,modelValue:t(u),"onUpdate:modelValue":e[3]||(e[3]=s=>F(u)?u.value=s:null),"row-selection-enabled":t(p),"toolbar-enabled":!0,onGetDataList:L},{toolbar:n(()=>[a(_,{type:"primary",onClick:e[0]||(e[0]=s=>B(0))},{default:n(()=>[v(y(l.$t("common.button_add")),1)]),_:1}),a(_,{onClick:e[1]||(e[1]=s=>p.value=!t(p))},{default:n(()=>[v(y(t(p)?l.$t("common.label_batch_operation_cancel"):l.$t("common.label_batch_operation")),1)]),_:1}),a(_,{danger:"",onClick:e[2]||(e[2]=s=>I(0))},{default:n(()=>[v(y(l.$t("common.button_delete")),1)]),_:1})]),body:n(()=>[]),_:1},8,["modelValue","row-selection-enabled"])]),_:1}),a(A,{modelValue:t(h),"onUpdate:modelValue":e[4]||(e[4]=s=>F(h)?h.value=s:null),class:"app-modal",title:l.$t("common.label_preview"),"destroy-on-close":""},{default:n(()=>[C("div",{innerHTML:t(N)},null,8,Fe)]),_:1},8,["modelValue","title"]),a(A,{modelValue:t(c),"onUpdate:modelValue":e[11]||(e[11]=s=>F(c)?c.value=s:null),class:"app-modal",title:t(D),"destroy-on-close":""},{default:n(()=>[C("div",Ce,[a(z,{ref_key:"entityFormRef",ref:$,"label-width":"auto",model:t(d),rules:t(P),onFinish:M},{default:n(()=>[a(V,{prop:"title",label:l.$t("common.field_title")},{default:n(()=>[a(R,{modelValue:t(d).title,"onUpdate:modelValue":e[5]||(e[5]=s=>t(d).title=s),placeholder:t(o)("common.field_title_placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(V,{prop:"content",label:l.$t("common.field_content")},{default:n(()=>[a(t(he),{value:t(d).content,"onUpdate:value":e[6]||(e[6]=s=>t(d).content=s)},null,8,["value"])]),_:1},8,["label"]),a(V,{prop:"status",label:l.$t("common.field_publish_status")},{default:n(()=>[a(j,{modelValue:t(d).status,"onUpdate:modelValue":e[7]||(e[7]=s=>t(d).status=s)},{default:n(()=>[a(U,{value:1},{default:n(()=>[v(y(t(o)("common.field_publish_status_finish")),1)]),_:1}),a(U,{value:0},{default:n(()=>[v(y(t(o)("common.field_publish_status_unfinished")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"]),a(V,{label:l.$t("common.field_publish_period")},{default:n(()=>[a(q,{from:t(d).startDatetime,"onUpdate:from":e[8]||(e[8]=s=>t(d).startDatetime=s),to:t(d).endDatetime,"onUpdate:to":e[9]||(e[9]=s=>t(d).endDatetime=s),type:"datetime"},null,8,["from","to"])]),_:1},8,["label"]),a(V,{prop:"description",label:l.$t("common.field_description")},{default:n(()=>[a(R,{modelValue:t(d).description,"onUpdate:modelValue":e[10]||(e[10]=s=>t(d).description=s),placeholder:t(o)("common.field_description_placeholder"),"allow-clear":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])])]),footer:n(()=>[C("div",Te,[a(Y,null,{default:n(()=>[a(_,{"native-type":"submit",type:"primary",onClick:M},{default:n(()=>[v(y(l.$t("common.button_submit")),1)]),_:1}),a(_,{"native-type":"reset",onClick:H},{default:n(()=>[v(y(l.$t("common.button_cancel")),1)]),_:1})]),_:1})])]),_:1},8,["modelValue","title"])],64)}}});export{He as default};
