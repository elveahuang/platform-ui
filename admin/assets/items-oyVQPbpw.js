var ie=Object.defineProperty;var j=Object.getOwnPropertySymbols;var se=Object.prototype.hasOwnProperty,de=Object.prototype.propertyIsEnumerable;var z=(c,t,n)=>t in c?ie(c,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):c[t]=n,C=(c,t)=>{for(var n in t||(t={}))se.call(t,n)&&z(c,n,t[n]);if(j)for(var n of j(t))de.call(t,n)&&z(c,n,t[n]);return c};var u=(c,t,n)=>new Promise(($,g)=>{var E=d=>{try{p(n.next(d))}catch(v){g(v)}},f=d=>{try{p(n.throw(d))}catch(v){g(v)}},p=d=>d.done?$(d.value):Promise.resolve(d.value).then(E,f);p((n=n.apply(c,t)).next())});import{d as me,H as re,I as D,r as _,aC as q,o as ce,l as K,P as ue,b as A,f as pe,h as a,w as o,k as I,t as h,j as G,i as s,e as J,Q,F as _e,S as fe,T as ve,U as ye,v as be,M as he,N as ge,J as we,K as ke,ah as Ce,L as Ie}from"./index-BeC3e9Y-.js";/* empty css                     *//* empty css                 *//* empty css                        *//* empty css                   *//* empty css                */import"./el-progress-Bzk5aJF9.js";/* empty css                  */import{u as $e}from"./data-table-K8IhbJ5d.js";import{g as W,h as Ee,i as Me,j as Fe,k as xe}from"./dict-DwKSRgcb.js";/* empty css                        */import{_ as P}from"./AppIcon.vue_vue_type_script_setup_true_lang-Ddl_DFWV.js";import{A as Te}from"./index-Deri3loS.js";import{_ as De}from"./DataTable.vue_vue_type_script_setup_true_lang-Cg-fagcS.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Ae={class:"!text-neutral-500"},Pe=["innerHTML"],We=me({__name:"items",setup(c){var B,L;const{t}=re(),{initialize:n,handleResult:$,handleParams:g}=$e(),E=[{title:t("common.field_idx"),dataIndex:"idx",key:"idx",width:50,sorter:!0},{title:t("common.field_code"),dataIndex:"code",key:"code",width:100,sorter:!0},{title:t("common.field_label"),dataIndex:"title",key:"title",width:250,sorter:!0},{title:t("common.field_last_modified_at"),dataIndex:"lastModifiedAt",key:"lastModifiedAt",width:120,sorter:!0,ellipsis:!0},{title:t("common.label_action"),dataIndex:"operation",key:"operation",width:60,ellipsis:!0,fixed:"right"}],f=D(n(E)),p=_(),d=_(!1),v=((B=q.currentRoute.value.query)==null?void 0:B.typeId)||"",X=_(((L=q.currentRoute.value.query)==null?void 0:L.title)||""),Y=()=>u(this,null,function*(){yield Ee(C({typeId:v},g(f))).then(e=>{$(f,e)})}),M=_(""),y=_(!1),F=_();let m=D(new W);D({title:[{required:!0,message:t("common.field_label_validation")}]});const R=e=>u(this,null,function*(){var l;(l=F.value)==null||l.clearValidate(),y.value=!0,e&&e>0?(M.value=t("common.dict_items_pages_edit_title"),yield Me({id:e}).then(r=>{Object.assign(m,C({},r.data))})):(Object.assign(m,C({},new W)),M.value=t("common.dict_items_pages_add_title"))}),Z=()=>{y.value=!1},O=()=>u(this,null,function*(){m.typeId=v,yield F.value.validate().then(()=>u(this,null,function*(){Fe(m).then(e=>{e.code=="200"&&(y.value=!1,p.value.refresh())})})).catch(e=>{K(e)})}),U=(e=0)=>u(this,null,function*(){const l=e>0?[e]:p.value.selectedRowKeys();fe(l)?ve({message:t("common.label_please_select_one_record")}).then():xe({ids:l}).then(r=>{if(r.code=="200")y.value=!1,p.value.refresh();else for(const N in r.data);})}),b=_(!1),w=_(""),ee=e=>u(this,null,function*(){w.value=e.title,b.value=!0}),te=()=>u(this,null,function*(){w.value="",b.value=!1}),le=()=>u(this,null,function*(){w.value="",b.value=!1});return ce(()=>u(this,null,function*(){K("Page <<DictionaryChildrenAdminListPage>> mounted.")})),(e,l)=>{const r=ye,N=ue("a-popconfirm"),ae=be,x=he,S=ge,H=we,T=ke,oe=Ce,ne=Ie;return A(),pe(_e,null,[a(s(Te),null,{title:o(()=>[I(h(e.$t("common.dict_items_management"))+" - ",1),G("label",Ae,h(X.value),1)]),_:1}),a(x,null,{default:o(()=>[a(s(De),{ref_key:"dataTableRef",ref:p,model:f,"onUpdate:model":l[3]||(l[3]=i=>f=i),onGetDataList:Y,"row-selection-enabled":d.value,"tool-bar-enabled":!0},{toolBar:o(()=>[a(r,{type:"primary",onClick:l[0]||(l[0]=i=>R(0))},{default:o(()=>[I(h(e.$t("common.button_add")),1)]),_:1}),a(r,{onClick:l[1]||(l[1]=i=>d.value=!d.value)},{default:o(()=>[I(h(d.value?e.$t("common.label_batch_operation_cancel"):e.$t("common.label_batch_operation")),1)]),_:1}),a(r,{onClick:l[2]||(l[2]=i=>U(0))},{default:o(()=>[I(h(e.$t("common.button_delete")),1)]),_:1})]),bodyCell:o(({column:i,record:k})=>[i.dataIndex==="operation"?(A(),J(ae,{key:0},{default:o(()=>[a(r,{type:"primary",size:"small",onClick:V=>ee(k)},{icon:o(()=>[a(s(P),{icon:"mdi:eye-outline"})]),_:2},1032,["onClick"]),a(r,{type:"primary",size:"small",onClick:V=>R(k.id)},{icon:o(()=>[a(s(P),{icon:"ant-design:edit-outlined"})]),_:2},1032,["onClick"]),k.source!==1?(A(),J(N,{key:0,onConfirm:V=>U(k.id),title:e.$t("common.label_confirm_delete_record")},{default:o(()=>[a(r,{danger:"",type:"primary",size:"small"},{icon:o(()=>[a(s(P),{icon:"ant-design:close-outlined"})]),_:1})]),_:2},1032,["onConfirm","title"])):Q("",!0)]),_:2},1024)):Q("",!0)]),_:1},8,["model","row-selection-enabled"])]),_:1}),a(S,{class:"app-modal",open:b.value,"onUpdate:open":l[4]||(l[4]=i=>b.value=i),title:e.$t("common.label_preview"),onOk:te,onCancel:le},{default:o(()=>[a(x,null,{default:o(()=>[G("div",{innerHTML:w.value},null,8,Pe)]),_:1})]),_:1},8,["open","title"]),a(S,{class:"app-modal",open:y.value,"onUpdate:open":l[8]||(l[8]=i=>y.value=i),title:M.value,onOk:O,onCancel:Z},{default:o(()=>[a(x,null,{default:o(()=>[a(ne,{ref_key:"entityForm",ref:F,model:s(m),rules:e.entityFormRules,onFinish:O,"label-col":{span:4},"wrapper-col":{span:12}},{default:o(()=>[a(T,{name:"code",label:e.$t("common.field_code")},{default:o(()=>[a(H,{readonly:s(m).source===1,maxlength:100,value:s(m).code,"onUpdate:value":l[5]||(l[5]=i=>s(m).code=i),placeholder:s(t)("common.field_code_placeholder")},null,8,["readonly","value","placeholder"])]),_:1},8,["label"]),a(T,{name:"title",label:e.$t("common.field_label")},{default:o(()=>[a(H,{maxlength:255,value:s(m).title,"onUpdate:value":l[6]||(l[6]=i=>s(m).title=i),placeholder:s(t)("common.field_label_placeholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),a(T,{name:"idx",label:e.$t("common.field_idx")},{default:o(()=>[a(oe,{max:999,min:0,value:s(m).idx,"onUpdate:value":l[7]||(l[7]=i=>s(m).idx=i),placeholder:s(t)("common.field_idx_placeholder")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1})]),_:1},8,["open","title"])],64)}}});export{We as default};
