var q=Object.defineProperty,N=Object.defineProperties;var I=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var v=(a,e,t)=>e in a?q(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,h=(a,e)=>{for(var t in e||(e={}))j.call(e,t)&&v(a,t,e[t]);if(C)for(var t of C(e))U.call(e,t)&&v(a,t,e[t]);return a},E=(a,e)=>N(a,I(e));var u=(a,e,t)=>v(a,typeof e!="symbol"?e+"":e,t);var b=(a,e,t)=>new Promise((s,l)=>{var p=o=>{try{c(t.next(o))}catch(d){l(d)}},n=o=>{try{c(t.throw(o))}catch(d){l(d)}},c=o=>o.done?s(o.value):Promise.resolve(o.value).then(p,n);c((t=t.apply(a,e)).next())});import{ac as O,ad as F,ae as G,d as V,af as T,ag as H,K as x,r as S,c as J,o as B,l as M,b as R,f as Q,ah as W,ai as X,j as _,z as k,q as w,w as y,e as A,M as Y,h as f,aj as Z,ak as ee,al as ae,_ as te,x as oe,I as ne,t as K,k as le,i as se,S as ie,v as ce,U as de}from"./index-C6FQ8e5o.js";/* empty css                */import"./el-progress-D09lRTnh.js";/* empty css                 */class re{constructor(){u(this,"loading",!1);u(this,"finished",!1);u(this,"pagination",{page:1,size:10,total:0});u(this,"sort",{property:"",order:""});u(this,"columns",[]);u(this,"items",[])}}const pe={columns:[],pagination:{page:1,size:10},sort:{property:"",order:""}},ge=a=>{a=h(h({},pe),a),console.log("DataTable.initialize..."),console.log(a);const e=new re;return O(a.columns)||(e.columns=a.columns),a.pagination.page>0&&(e.pagination.page=a.pagination.page),a.pagination.size>0&&(e.pagination.size=a.pagination.size),e},me=(a,e,t)=>{var l,p,n,c,o,d,r;console.log("DataTable.handleResult..."),console.log(a);const s=[];if((l=e==null?void 0:e.data)!=null&&l.content.length)for(const m of e.data.content)t&&F(t)?s.push(t(m)):s.push(m);return Object.assign(a,{items:s,pagination:{page:((n=(p=e==null?void 0:e.data)==null?void 0:p.pageable)==null?void 0:n.pageNumber)+1,size:(o=(c=e==null?void 0:e.data)==null?void 0:c.pageable)==null?void 0:o.pageSize,total:G((d=e==null?void 0:e.data)==null?void 0:d.totalElements)},loading:!1,finished:(r=e==null?void 0:e.data)==null?void 0:r.last}),a},ue=a=>(console.log("DataTable.handleParams..."),console.log(a),{page:a.pagination.page<=1?1:a.pagination.page,size:a.pagination.size,sort:a.sort.property,order:a.sort.order}),fe=(a,e=!1)=>E(h({},a),{loading:e}),be=()=>({initialize:ge,setLoadingStatus:fe,handleResult:me,handleParams:ue}),ye={class:"app-data-table"},_e={class:"app-data-table-toolbar"},we={class:"app-data-table-body"},he={class:"app-data-table-footer"},ve=V({__name:"Table",props:T({toolbarEnabled:{type:Boolean,require:!1,default:!1},rowSelectionEnabled:{type:Boolean,require:!1,default:!0},rowSelectionMultipleEnabled:{type:Boolean,require:!1,default:!0},rowSelection:{type:Object,require:!1,default:null},rowKey:{type:String,require:!1,default:"id"},fixed:{type:Boolean,require:!1,default:!1}},{modelValue:{},modelModifiers:{}}),emits:T(["getDataList"],["update:modelValue"]),setup(a,{expose:e,emit:t}){const s=t,l=H(a,"modelValue"),p=a,n=x({tableSelectedRowKeys:[],tableSelectedRows:[]}),c=S(),o=J(()=>({pageSize:l.value.pagination.size,current:l.value.pagination.page,total:l.value.pagination.total})),d=g=>{console.log("DataTable.onSelectionChange..."),n.tableSelectedRows=g,n.tableSelectedRowKeys=g.filter(i=>i[p.rowKey]).map(i=>i[p.rowKey])},r=(g,i)=>{console.log("DataTable.onTableChange..."),l.value.pagination.size=i,l.value.pagination.page=g,s("getDataList")};return e({refresh:()=>b(this,null,function*(){l.value.pagination.page=1,s("getDataList")}),selectedRowKeys:()=>(console.log("DataTable.selectedRowKeys..."),console.log(Array.from(n.tableSelectedRowKeys)),Array.from(n.tableSelectedRowKeys)),selectedRows:()=>(console.log("DataTable.selectedRows..."),console.log(Array.from(n.tableSelectedRows)),Array.from(n.tableSelectedRows))}),B(()=>b(this,null,function*(){M("Component <<Table>> mounted."),s("getDataList")})),(g,i)=>{const L=ee,P=ae;return R(),Q("div",ye,[W(_("div",_e,[k(g.$slots,"toolbar",{},void 0,!0)],512),[[X,a.toolbarEnabled]]),_("div",we,[w(f(Z),{ref_key:"tableRef",ref:c,class:"w-full",border:"",data:l.value.items,"row-key":a.rowKey,onSelectionChange:d},{default:y(()=>[a.rowSelectionEnabled?(R(),A(L,{key:0,"column-key":a.rowKey,type:"selection",fixed:"left"},null,8,["column-key"])):Y("",!0),k(g.$slots,"body",{},void 0,!0)]),_:3},8,["data","row-key"])]),_("div",he,[w(P,{modelValue:o.value.current,"onUpdate:modelValue":i[0]||(i[0]=$=>o.value.current=$),total:o.value.total,"page-size":o.value.pageSize,onChange:r},null,8,["modelValue","total","page-size"])])])}}}),Se=te(ve,[["__scopeId","data-v-8e72050a"]]),Re=a=>oe("/api/v1/notice/list",a),ze={class:"pb-4"},Ke=V({__name:"notice",setup(a){const{t:e}=ne(),{initialize:t,handleResult:s,handleParams:l}=be(),p=[{title:e("common.field_content"),dataIndex:"content",key:"content"},{title:e("common.field_last_modified_at"),dataIndex:"lastModifiedAt",key:"lastModifiedAt",sorter:!0},{title:e("common.label_action"),dataIndex:"operation",key:"operation",width:200,fixed:"right"}],n=x(t(p)),c=S(),o=S(!1),d=()=>b(this,null,function*(){yield Re(l(n)).then(r=>{s(n,r)})});return B(()=>b(this,null,function*(){M("Page <<UserCenterNoticePage>> mounted.")})),(r,m)=>{const z=ie,D=ce,g=de;return R(),A(g,{shadow:"never"},{title:y(()=>[_("div",null,K(r.$t("common.user_pages_change_password_title")),1)]),default:y(()=>[_("div",ze,[w(D,null,{default:y(()=>[w(z,{onClick:m[0]||(m[0]=i=>o.value=!f(o))},{default:y(()=>[le(K(f(o)?r.$t("common.label_batch_operation_cancel"):r.$t("common.label_batch_operation")),1)]),_:1})]),_:1})]),w(f(Se),{ref_key:"dataTableRef",ref:c,model:f(n),"onUpdate:model":m[1]||(m[1]=i=>se(n)?n.value=i:null),"row-selection-enabled":f(o),onGetDataList:d},null,8,["model","row-selection-enabled"])]),_:1})}}});export{Ke as default};
