var I=Object.defineProperty,j=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var E=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var S=(a,e,t)=>e in a?I(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,w=(a,e)=>{for(var t in e||(e={}))O.call(e,t)&&S(a,t,e[t]);if(E)for(var t of E(e))F.call(e,t)&&S(a,t,e[t]);return a},T=(a,e)=>j(a,U(e));var u=(a,e,t)=>S(a,typeof e!="symbol"?e+"":e,t);var b=(a,e,t)=>new Promise((s,l)=>{var p=o=>{try{c(t.next(o))}catch(d){l(d)}},n=o=>{try{c(t.throw(o))}catch(d){l(d)}},c=o=>o.done?s(o.value):Promise.resolve(o.value).then(p,n);c((t=t.apply(a,e)).next())});import{ac as G,ad as H,ae as J,d as B,af as k,ag as Q,K as L,r as R,c as W,o as M,l as A,b as h,f as X,ah as K,ai as Y,j as y,z as V,e as z,w as _,M as Z,h as f,aj as ee,q as v,ak as ae,al as te,am as oe,_ as ne,x as le,I as se,t as x,k as ie,i as ce,S as de,v as re,U as pe}from"./index-IgV-ZQPS.js";/* empty css                */import"./el-progress-Br8gpGPu.js";/* empty css                 */class ge{constructor(){u(this,"loading",!1);u(this,"finished",!1);u(this,"pagination",{page:1,size:10,total:0});u(this,"sort",{property:"",order:""});u(this,"columns",[]);u(this,"items",[])}}const me={columns:[],pagination:{page:1,size:10},sort:{property:"",order:""}},ue=a=>{a=w(w({},me),a),console.log("DataTable.initialize..."),console.log(a);const e=new ge;return G(a.columns)||(e.columns=a.columns),a.pagination.page>0&&(e.pagination.page=a.pagination.page),a.pagination.size>0&&(e.pagination.size=a.pagination.size),e},fe=(a,e,t)=>{var l,p,n,c,o,d,r;console.log("DataTable.handleResult..."),console.log(a);const s=[];if((l=e==null?void 0:e.data)!=null&&l.content.length)for(const m of e.data.content)t&&H(t)?s.push(t(m)):s.push(m);return Object.assign(a,{items:s,pagination:{page:((n=(p=e==null?void 0:e.data)==null?void 0:p.pageable)==null?void 0:n.pageNumber)+1,size:(o=(c=e==null?void 0:e.data)==null?void 0:c.pageable)==null?void 0:o.pageSize,total:J((d=e==null?void 0:e.data)==null?void 0:d.totalElements)},loading:!1,finished:(r=e==null?void 0:e.data)==null?void 0:r.last}),a},be=a=>(console.log("DataTable.handleParams..."),console.log(a),{page:a.pagination.page<=1?1:a.pagination.page,size:a.pagination.size,sort:a.sort.property,order:a.sort.order}),_e=(a,e=!1)=>T(w({},a),{loading:e}),ye=()=>({initialize:ue,setLoadingStatus:_e,handleResult:fe,handleParams:be}),we={class:"app-data-table"},he={class:"app-data-table-toolbar"},ve={class:"app-data-table-body"},Se={class:"app-data-table-footer"},Re=B({__name:"Table",props:k({toolbarEnabled:{type:Boolean,require:!1,default:!1},rowSelectionEnabled:{type:Boolean,require:!1,default:!0},rowSelectionMultipleEnabled:{type:Boolean,require:!1,default:!0},rowSelection:{type:Object,require:!1,default:null},rowKey:{type:String,require:!1,default:"id"},fixed:{type:Boolean,require:!1,default:!1}},{modelValue:{},modelModifiers:{}}),emits:k(["getDataList"],["update:modelValue"]),setup(a,{expose:e,emit:t}){const s=t,l=Q(a,"modelValue"),p=a,n=L({tableSelectedRowKeys:[],tableSelectedRows:[]}),c=R(),o=W(()=>({pageSize:l.value.pagination.size,current:l.value.pagination.page,total:l.value.pagination.total})),d=g=>{console.log("DataTable.onSelectionChange..."),n.tableSelectedRows=g,n.tableSelectedRowKeys=g.filter(i=>i[p.rowKey]).map(i=>i[p.rowKey])},r=(g,i)=>{console.log("DataTable.onTableChange..."),l.value.pagination.size=i,l.value.pagination.page=g,s("getDataList")};return e({refresh:()=>b(this,null,function*(){l.value.pagination.page=1,s("getDataList")}),selectedRowKeys:()=>(console.log("DataTable.selectedRowKeys..."),console.log(Array.from(n.tableSelectedRowKeys)),Array.from(n.tableSelectedRowKeys)),selectedRows:()=>(console.log("DataTable.selectedRows..."),console.log(Array.from(n.tableSelectedRows)),Array.from(n.tableSelectedRows))}),M(()=>b(this,null,function*(){A("Component <<Table>> mounted."),s("getDataList")})),(g,i)=>{const P=ae,$=te,q=oe;return h(),X("div",we,[K(y("div",he,[V(g.$slots,"toolbar",{},void 0,!0)],512),[[Y,a.toolbarEnabled]]),y("div",ve,[K((h(),z(f(ee),{ref_key:"tableRef",ref:c,class:"w-full",data:l.value.items,"row-key":a.rowKey,onSelectionChange:d},{default:_(()=>[a.rowSelectionEnabled?(h(),z(P,{key:0,"column-key":a.rowKey,type:"selection",fixed:"left"},null,8,["column-key"])):Z("",!0),V(g.$slots,"body",{},void 0,!0)]),_:3},8,["data","row-key"])),[[q,l.value.loading]])]),y("div",Se,[v($,{modelValue:o.value.current,"onUpdate:modelValue":i[0]||(i[0]=N=>o.value.current=N),total:o.value.total,"page-size":o.value.pageSize,onChange:r},null,8,["modelValue","total","page-size"])])])}}}),ze=ne(Re,[["__scopeId","data-v-9305a909"]]),De=a=>le("/api/v1/notice/list",a),Ce={class:"pb-4"},xe=B({__name:"notice",setup(a){const{t:e}=se(),{initialize:t,handleResult:s,handleParams:l}=ye(),p=[{title:e("common.field_content"),dataIndex:"content",key:"content"},{title:e("common.field_last_modified_at"),dataIndex:"lastModifiedAt",key:"lastModifiedAt",sorter:!0},{title:e("common.label_action"),dataIndex:"operation",key:"operation",width:200,fixed:"right"}],n=L(t(p)),c=R(),o=R(!1),d=()=>b(this,null,function*(){yield De(l(n)).then(r=>{s(n,r)})});return M(()=>b(this,null,function*(){A("Page <<UserCenterNoticePage>> mounted.")})),(r,m)=>{const D=de,C=re,g=pe;return h(),z(g,{shadow:"never"},{title:_(()=>[y("div",null,x(r.$t("common.user_pages_change_password_title")),1)]),default:_(()=>[y("div",Ce,[v(C,null,{default:_(()=>[v(D,{onClick:m[0]||(m[0]=i=>o.value=!f(o))},{default:_(()=>[ie(x(f(o)?r.$t("common.label_batch_operation_cancel"):r.$t("common.label_batch_operation")),1)]),_:1})]),_:1})]),v(f(ze),{ref_key:"dataTableRef",ref:c,model:f(n),"onUpdate:model":m[1]||(m[1]=i=>ce(n)?n.value=i:null),"row-selection-enabled":f(o),onGetDataList:d},null,8,["model","row-selection-enabled"])]),_:1})}}});export{xe as default};
