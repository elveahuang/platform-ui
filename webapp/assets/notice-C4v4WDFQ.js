var N=Object.defineProperty,I=Object.defineProperties;var j=Object.getOwnPropertyDescriptors;var T=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var S=(a,e,t)=>e in a?N(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,h=(a,e)=>{for(var t in e||(e={}))U.call(e,t)&&S(a,t,e[t]);if(T)for(var t of T(e))O.call(e,t)&&S(a,t,e[t]);return a},k=(a,e)=>I(a,j(e));var f=(a,e,t)=>S(a,typeof e!="symbol"?e+"":e,t);var b=(a,e,t)=>new Promise((i,r)=>{var p=n=>{try{l(t.next(n))}catch(s){r(s)}},o=n=>{try{l(t.throw(n))}catch(s){r(s)}},l=n=>n.done?i(n.value):Promise.resolve(n.value).then(p,o);l((t=t.apply(a,e)).next())});import{ac as F,ad as G,ae as H,d as B,af as K,ag as J,K as v,r as R,c as Q,o as M,l as A,b as z,f as W,ah as X,ai as Y,j as _,z as V,q as w,w as y,e as L,M as Z,h as u,aj as ee,ak as ae,al as te,_ as oe,x as ne,I as le,t as x,k as se,i as ie,S as ce,v as de,U as re}from"./index-CWb1sS06.js";/* empty css                */import"./el-progress-D9MmiTE4.js";/* empty css                 */class pe{constructor(){f(this,"loading",!1);f(this,"finished",!1);f(this,"pagination",{page:1,size:10,total:0});f(this,"sort",{property:"",order:""});f(this,"columns",[]);f(this,"items",[])}}const ge={columns:[],pagination:{page:1,size:10},sort:{property:"",order:""}},me=a=>{a=h(h({},ge),a),console.log("DataTable.initialize..."),console.log(a);const e=new pe;return F(a.columns)||(e.columns=a.columns),a.pagination.page>0&&(e.pagination.page=a.pagination.page),a.pagination.size>0&&(e.pagination.size=a.pagination.size),e},fe=(a,e,t)=>{var r,p,o,l,n,s,c;console.log("DataTable.handleResult..."),console.log(a);const i=[];if((r=e==null?void 0:e.data)!=null&&r.content.length)for(const g of e.data.content)t&&G(t)?i.push(t(g)):i.push(g);return Object.assign(a,{items:i,pagination:{page:((o=(p=e==null?void 0:e.data)==null?void 0:p.pageable)==null?void 0:o.pageNumber)+1,size:(n=(l=e==null?void 0:e.data)==null?void 0:l.pageable)==null?void 0:n.pageSize,total:H((s=e==null?void 0:e.data)==null?void 0:s.totalElements)},loading:!1,finished:(c=e==null?void 0:e.data)==null?void 0:c.last}),a},ue=a=>(console.log("DataTable.handleParams..."),console.log(a),{page:a.pagination.page<=1?1:a.pagination.page,size:a.pagination.size,sort:a.sort.property,order:a.sort.order}),be=(a,e=!1)=>k(h({},a),{loading:e}),ye=()=>({initialize:me,setLoadingStatus:be,handleResult:fe,handleParams:ue}),_e={class:"data-table"},we={class:"data-table-toolbar"},he={class:"data-table-body"},Se={class:"data-table-footer"},ve=B({__name:"Table",props:K({toolbarEnabled:{type:Boolean,require:!1,default:!1},rowSelectionEnabled:{type:Boolean,require:!1,default:!0},rowSelectionMultipleEnabled:{type:Boolean,require:!1,default:!0},rowSelection:{type:Object,require:!1,default:null},rowKey:{type:String,require:!1,default:"id"},fixed:{type:Boolean,require:!1,default:!1}},{modelValue:{},modelModifiers:{}}),emits:K(["getDataList"],["update:modelValue"]),setup(a,{expose:e,emit:t}){const i=t,r=J(a,"modelValue"),p=a,o=v(r),l=v({tableSelectedRowKeys:[],tableSelectedRows:[]}),n=R(),s=Q(()=>({pageSize:o.pagination.size,current:o.pagination.page,total:o.pagination.total})),c=d=>{console.log("DataTable.onSelectionChange..."),l.tableSelectedRows=d,l.tableSelectedRowKeys=d.filter(m=>m[p.rowKey]).map(m=>m[p.rowKey])},g=(d,m)=>{console.log("DataTable.onTableChange..."),o.pagination.size=m,o.pagination.page=d,i("getDataList")};return e({refresh:()=>b(this,null,function*(){o.pagination.page=1,i("getDataList")}),selectedRowKeys:()=>(console.log("DataTable.selectedRowKeys..."),console.log(Array.from(l.tableSelectedRowKeys)),Array.from(l.tableSelectedRowKeys)),selectedRows:()=>(console.log("DataTable.selectedRows..."),console.log(Array.from(l.tableSelectedRows)),Array.from(l.tableSelectedRows))}),M(()=>b(this,null,function*(){A("Component <<Table>> mounted."),i("getDataList")})),(d,m)=>{const P=ae,$=te;return z(),W("div",_e,[X(_("div",we,[V(d.$slots,"toolbar",{},void 0,!0)],512),[[Y,a.toolbarEnabled]]),_("div",he,[w(u(ee),{ref_key:"tableRef",ref:n,class:"w-full",data:u(o).items,"row-key":a.rowKey,onSelectionChange:c},{default:y(()=>[a.rowSelectionEnabled?(z(),L(P,{key:0,"column-key":a.rowKey,type:"selection",fixed:"left"},null,8,["column-key"])):Z("",!0),V(d.$slots,"body",{},void 0,!0)]),_:3},8,["data","row-key"])]),_("div",Se,[w($,{modelValue:s.value.current,"onUpdate:modelValue":m[0]||(m[0]=q=>s.value.current=q),total:s.value.total,"page-size":s.value.pageSize,onChange:g},null,8,["modelValue","total","page-size"])])])}}}),Re=oe(ve,[["__scopeId","data-v-a485a7a4"]]),ze=a=>ne("/api/v1/notice/list",a),De={class:"pb-4"},Ve=B({__name:"notice",setup(a){const{t:e}=le(),{initialize:t,handleResult:i,handleParams:r}=ye(),p=[{title:e("common.field_content"),dataIndex:"content",key:"content"},{title:e("common.field_last_modified_at"),dataIndex:"lastModifiedAt",key:"lastModifiedAt",sorter:!0},{title:e("common.label_action"),dataIndex:"operation",key:"operation",width:200,fixed:"right"}],o=v(t(p)),l=R(),n=R(!1),s=()=>b(this,null,function*(){yield ze(r(o)).then(c=>{i(o,c)})});return M(()=>b(this,null,function*(){A("Page <<UserCenterNoticePage>> mounted.")})),(c,g)=>{const D=ce,C=de,E=re;return z(),L(E,{shadow:"never"},{title:y(()=>[_("div",null,x(c.$t("common.user_pages_change_password_title")),1)]),default:y(()=>[_("div",De,[w(C,null,{default:y(()=>[w(D,{onClick:g[0]||(g[0]=d=>n.value=!u(n))},{default:y(()=>[se(x(u(n)?c.$t("common.label_batch_operation_cancel"):c.$t("common.label_batch_operation")),1)]),_:1})]),_:1})]),w(u(Re),{ref_key:"dataTableRef",ref:l,model:u(o),"onUpdate:model":g[1]||(g[1]=d=>ie(o)?o.value=d:null),"row-selection-enabled":u(n),onGetDataList:s},null,8,["model","row-selection-enabled"])]),_:1})}}});export{Ve as default};
