var $=Object.defineProperty;var N=(e,t,a)=>t in e?$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var f=(e,t,a)=>(N(e,typeof t!="symbol"?t+"":t,a),a);var g=(e,t,a)=>new Promise((r,n)=>{var i=o=>{try{l(a.next(o))}catch(c){n(c)}},s=o=>{try{l(a.throw(o))}catch(c){n(c)}},l=o=>o.done?r(o.value):Promise.resolve(o.value).then(i,s);l((a=a.apply(e,t)).next())});import{a7 as A,a8 as L,a9 as M,d as x,H as v,r as z,c as R,o as C,l as D,b as B,f as V,aa as I,ab as U,j as _,A as E,q as w,w as b,ac as j,ad as F,x as G,D as H,e as O,P as J,t as k,h,k as Q,N as W,v as X}from"./index-CqV8-mTv.js";/* empty css                */import"./el-progress-B6PqwgUZ.js";/* empty css                 */class P{constructor(){f(this,"loading",!1);f(this,"finished",!1);f(this,"pagination",{page:1,size:10,total:0});f(this,"sort",{property:"",order:""});f(this,"columns",[]);f(this,"items",[])}}const q=(e=[],t={page:1,size:10})=>{const a=new P;return A(e)||(a.columns=e),t.page>0&&(a.pagination.page=t.page),t.size>0&&(a.pagination.size=t.size),a},Y=(e,t,a)=>{var r,n,i,s,l,o,c;if((r=t==null?void 0:t.data)!=null&&r.content.length){e.items=[];for(const d of t.data.content)a&&L(a)?e.items.push(a(d)):e.items.push(d)}else e.items=[];return e.pagination.page=((i=(n=t==null?void 0:t.data)==null?void 0:n.pageable)==null?void 0:i.pageNumber)+1,e.pagination.size=(l=(s=t==null?void 0:t.data)==null?void 0:s.pageable)==null?void 0:l.pageSize,e.pagination.total=M((o=t==null?void 0:t.data)==null?void 0:o.totalElements),e.loading=!1,(c=t==null?void 0:t.data)!=null&&c.last&&(e.finished=!0),e},Z=e=>(e.loading=!0,{page:e.pagination.page<=1?1:e.pagination.page,size:e.pagination.size,sort:e.sort.property,order:e.sort.order}),T=()=>({initialize:q,handleResult:Y,handleParams:Z}),ee={class:"data-table"},te={class:"data-table-toolbar"},ae={class:"data-table-body"},oe={class:"data-table-footer"},ne=x({__name:"Table",props:{model:{type:P,require:!1,default:()=>q()},toolbarEnabled:{type:Boolean,require:!1,default:!1},rowSelectionEnabled:{type:Boolean,require:!1,default:!1},rowSelectionMultipleEnabled:{type:Boolean,require:!1,default:!0},rowSelection:{type:Object,require:!1,default:null},rowKey:{type:String,require:!1,default:"id"},fixed:{type:Boolean,require:!1,default:!1}},emits:["getDataList"],setup(e,{expose:t,emit:a}){const r=a,n=e,i=v(n.model),s=v({tableSelectedRowKeys:[],tableSelectedRows:[]}),l=z(),o=R(()=>({showSizeChanger:!1,defaultPageSize:10,pageSize:i.pagination.size,current:i.pagination.page,total:i.pagination.total}));return R(()=>n.rowSelectionEnabled?n.rowSelection?n.rowSelection:{type:n.rowSelectionMultipleEnabled?"checkbox":"radio",onChange:(p,m)=>{s.tableSelectedRowKeys=p,s.tableSelectedRows=m},getCheckboxProps:p=>({id:p[n.rowKey]})}:null),t({refresh:()=>g(this,null,function*(){i.pagination.page=1,r("getDataList")}),selectedRowKeys:()=>Array.from(s.tableSelectedRowKeys),selectedRows:()=>Array.from(s.tableSelectedRows)}),C(()=>g(this,null,function*(){D("Component <<DataTable>> mounted."),r("getDataList")})),(p,m)=>{const S=j,y=F;return B(),V("div",ee,[I(_("div",te,[E(p.$slots,"toolbar")],512),[[U,e.toolbarEnabled]]),_("div",ae,[w(S,{ref_key:"tableRef",ref:l,class:"w-full",fixed:e.fixed,columns:i.columns,data:i.items,"row-key":e.rowKey,onSelectionChange:e.rowSelection},{default:b(()=>[E(p.$slots,"body")]),_:3},8,["fixed","columns","data","row-key","onSelectionChange"])]),_("div",oe,[w(y,{modelValue:o.value.current,"onUpdate:modelValue":m[0]||(m[0]=K=>o.value.current=K),total:o.value.total,"page-size":o.value.pageSize},null,8,["modelValue","total","page-size"])])])}}}),se=e=>G("/api/v1/notice/list",e),ie={class:"pb-4"},fe=x({__name:"notice",setup(e){const{t}=H(),{initialize:a,handleResult:r,handleParams:n}=T(),i=[{title:t("common.field_content"),dataIndex:"content",key:"content"},{title:t("common.field_last_modified_at"),dataIndex:"lastModifiedAt",key:"lastModifiedAt",sorter:!0},{title:t("common.label_action"),dataIndex:"operation",key:"operation",width:200,fixed:"right"}],s=v(a(i)),l=z(),o=z(!1),c=()=>g(this,null,function*(){yield se(n(s)).then(d=>{r(s,d)})});return C(()=>g(this,null,function*(){D("Page <<UserCenterNoticePage>> mounted.")})),(d,u)=>{const p=W,m=X,S=J;return B(),O(S,{shadow:"never"},{title:b(()=>[_("div",null,k(d.$t("common.user_pages_change_password_title")),1)]),default:b(()=>[_("div",ie,[w(m,null,{default:b(()=>[w(p,{onClick:u[0]||(u[0]=y=>o.value=!h(o))},{default:b(()=>[Q(k(h(o)?d.$t("common.label_batch_operation_cancel"):d.$t("common.label_batch_operation")),1)]),_:1})]),_:1})]),w(h(ne),{ref_key:"dataTableRef",ref:l,model:s,"onUpdate:model":u[1]||(u[1]=y=>s=y),onGetDataList:c,"row-selection-enabled":h(o)},null,8,["model","row-selection-enabled"])]),_:1})}}});export{fe as default};
