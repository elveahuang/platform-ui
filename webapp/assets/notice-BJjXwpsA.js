var V=Object.defineProperty,I=Object.defineProperties;var M=Object.getOwnPropertyDescriptors;var E=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var S=(a,e,t)=>e in a?V(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,h=(a,e)=>{for(var t in e||(e={}))j.call(e,t)&&S(a,t,e[t]);if(E)for(var t of E(e))U.call(e,t)&&S(a,t,e[t]);return a},T=(a,e)=>I(a,M(e));var m=(a,e,t)=>(S(a,typeof e!="symbol"?e+"":e,t),t);var u=(a,e,t)=>new Promise((s,i)=>{var l=o=>{try{r(t.next(o))}catch(d){i(d)}},n=o=>{try{r(t.throw(o))}catch(d){i(d)}},r=o=>o.done?s(o.value):Promise.resolve(o.value).then(l,n);r((t=t.apply(a,e)).next())});import{ac as O,ad as F,ae as G,d as x,K as v,r as R,c as H,o as B,l as q,b as z,f as J,af as Q,ag as W,j as y,z as k,q as w,w as b,e as A,M as X,h as _,ah as Y,ai as Z,aj as ee,_ as ae,x as te,I as oe,t as K,k as ne,S as le,v as se,U as ie}from"./index-Cd8RLLpK.js";/* empty css                */import"./el-progress-B_qhy6OW.js";/* empty css                 */class L{constructor(){m(this,"loading",!1);m(this,"finished",!1);m(this,"pagination",{page:1,size:10,total:0});m(this,"sort",{property:"",order:""});m(this,"columns",[]);m(this,"items",[])}}const ce={columns:[],pagination:{page:1,size:10},sort:{property:"",order:""}},re=a=>{a=h(h({},ce),a),console.log("DataTable.initialize..."),console.log(a);const e=new L;return O(a.columns)||(e.columns=a.columns),a.pagination.page>0&&(e.pagination.page=a.pagination.page),a.pagination.size>0&&(e.pagination.size=a.pagination.size),e},de=(a,e,t)=>{var i,l,n,r,o,d,p;console.log("DataTable.handleResult..."),console.log(a);const s=[];if((i=e==null?void 0:e.data)!=null&&i.content.length)for(const f of e.data.content)t&&F(t)?s.push(t(f)):s.push(f);return Object.assign(a,{items:s,pagination:{page:((n=(l=e==null?void 0:e.data)==null?void 0:l.pageable)==null?void 0:n.pageNumber)+1,size:(o=(r=e==null?void 0:e.data)==null?void 0:r.pageable)==null?void 0:o.pageSize,total:G((d=e==null?void 0:e.data)==null?void 0:d.totalElements)},loading:!1,finished:(p=e==null?void 0:e.data)==null?void 0:p.last}),a},pe=a=>(console.log("DataTable.handleParams..."),console.log(a),{page:a.pagination.page<=1?1:a.pagination.page,size:a.pagination.size,sort:a.sort.property,order:a.sort.order}),ge=(a,e=!1)=>T(h({},a),{loading:e}),fe=()=>({initialize:re,setLoadingStatus:ge,handleResult:de,handleParams:pe}),me={class:"data-table"},ue={class:"data-table-toolbar"},be={class:"data-table-body"},_e={class:"data-table-footer"},ye=x({__name:"Table",props:{model:{type:L,require:!1,default:()=>{}},toolbarEnabled:{type:Boolean,require:!1,default:!1},rowSelectionEnabled:{type:Boolean,require:!1,default:!0},rowSelectionMultipleEnabled:{type:Boolean,require:!1,default:!0},rowSelection:{type:Object,require:!1,default:null},rowKey:{type:String,require:!1,default:"id"},fixed:{type:Boolean,require:!1,default:!1}},emits:["getDataList"],setup(a,{expose:e,emit:t}){const s=t,i=a,l=v(i.model),n=v({tableSelectedRowKeys:[],tableSelectedRows:[]}),r=R(),o=H(()=>({pageSize:l.pagination.size,current:l.pagination.page,total:l.pagination.total})),d=g=>{console.log("DataTable.onSelectionChange..."),n.tableSelectedRows=g,n.tableSelectedRowKeys=g.filter(c=>c[i.rowKey]).map(c=>c[i.rowKey])},p=(g,c)=>{console.log("DataTable.onTableChange..."),l.pagination.size=c,l.pagination.page=g,s("getDataList")};return e({refresh:()=>u(this,null,function*(){l.pagination.page=1,s("getDataList")}),selectedRowKeys:()=>(console.log("DataTable.selectedRowKeys..."),console.log(Array.from(n.tableSelectedRowKeys)),Array.from(n.tableSelectedRowKeys)),selectedRows:()=>(console.log("DataTable.selectedRows..."),console.log(Array.from(n.tableSelectedRows)),Array.from(n.tableSelectedRows))}),B(()=>u(this,null,function*(){q("Component <<Table>> mounted."),s("getDataList")})),(g,c)=>{const P=Z,$=ee;return z(),J("div",me,[Q(y("div",ue,[k(g.$slots,"toolbar",{},void 0,!0)],512),[[W,a.toolbarEnabled]]),y("div",be,[w(_(Y),{ref_key:"tableRef",ref:r,class:"w-full",data:l.items,"row-key":a.rowKey,onSelectionChange:d},{default:b(()=>[a.rowSelectionEnabled?(z(),A(P,{key:0,"column-key":a.rowKey,type:"selection",fixed:"left"},null,8,["column-key"])):X("",!0),k(g.$slots,"body",{},void 0,!0)]),_:3},8,["data","row-key"])]),y("div",_e,[w($,{modelValue:o.value.current,"onUpdate:modelValue":c[0]||(c[0]=N=>o.value.current=N),total:o.value.total,"page-size":o.value.pageSize,onChange:p},null,8,["modelValue","total","page-size"])])])}}}),we=ae(ye,[["__scopeId","data-v-27f90ced"]]),he=a=>te("/api/v1/notice/list",a),Se={class:"pb-4"},Ee=x({__name:"notice",setup(a){const{t:e}=oe(),{initialize:t,handleResult:s,handleParams:i}=fe(),l=[{title:e("common.field_content"),dataIndex:"content",key:"content"},{title:e("common.field_last_modified_at"),dataIndex:"lastModifiedAt",key:"lastModifiedAt",sorter:!0},{title:e("common.label_action"),dataIndex:"operation",key:"operation",width:200,fixed:"right"}],n=v(t(l)),r=R(),o=R(!1),d=()=>u(this,null,function*(){yield he(i(n)).then(p=>{s(n,p)})});return B(()=>u(this,null,function*(){q("Page <<UserCenterNoticePage>> mounted.")})),(p,f)=>{const D=le,C=se,g=ie;return z(),A(g,{shadow:"never"},{title:b(()=>[y("div",null,K(p.$t("common.user_pages_change_password_title")),1)]),default:b(()=>[y("div",Se,[w(C,null,{default:b(()=>[w(D,{onClick:f[0]||(f[0]=c=>o.value=!_(o))},{default:b(()=>[ne(K(_(o)?p.$t("common.label_batch_operation_cancel"):p.$t("common.label_batch_operation")),1)]),_:1})]),_:1})]),w(_(we),{ref_key:"dataTableRef",ref:r,model:n,"onUpdate:model":f[1]||(f[1]=c=>n=c),"row-selection-enabled":_(o),onGetDataList:d},null,8,["model","row-selection-enabled"])]),_:1})}}});export{Ee as default};
