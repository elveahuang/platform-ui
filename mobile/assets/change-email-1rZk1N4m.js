var _=(f,l,r)=>new Promise((m,e)=>{var c=a=>{try{o(r.next(a))}catch(i){e(i)}},u=a=>{try{o(r.throw(a))}catch(i){e(i)}},o=a=>a.done?m(a.value):Promise.resolve(a.value).then(c,u);o((r=r.apply(f,l)).next())});import{d as C,a2 as E,r as k,H as h,o as B,l as P,ap as N,a as F,y as K,b as s,w as d,O as t,G as w,a3 as S,V as U,Q as q,a4 as g,a5 as x,_ as $,a0 as A}from"./index-pyS-jaTs.js";/* empty css              *//* empty css                                                                 *//* empty css              *//* empty css              */import{F as G,a as I}from"./index-07gBjG2u.js";/* empty css              */import{N as M}from"./index-OSWY0qnD.js";import{e as O}from"./user-sOTWs_LV.js";/* empty css              */import{_ as j}from"./MailCaptcha.vue_vue_type_script_setup_true_lang-7_fZxAaq.js";import{S as D}from"./index-CykelOPx.js";import{C as H}from"./index-DNHVO5Wz.js";import"./index-QQK-Ut9J.js";import"./use-id-zCBKX6Jo.js";import"./captcha-GBL6ap-N.js";const L=w("div",{class:"app-divider"},null,-1),Q={class:"m-4"},ie=C({__name:"change-email",setup(f){const{t:l}=E(),r=k(),m=h({originalPassword:[{required:!0,message:l("common.user_field_original_password_validation")}],newPassword:[{required:!0,message:l("common.user_field_new_password_validation")}],confirmPassword:[{required:!0,message:l("common.user_field_confirm_password_validation")}]}),e=h({email:"",password:"",newEmail:"",captchaKey:"",captchaValue:""}),c=o=>_(this,null,function*(){e.captchaKey=o}),u=()=>{const o={email:e.email,password:e.password,newEmail:e.newEmail,captchaKey:e.captchaKey,captchaValue:e.captchaValue};O(o).then(a=>{a.code==200?g({message:l("common.user_pages_change_email_success")},()=>{$.push({path:"/me"})}):g({message:l("common.user_pages_change_email_fail")})})};return B(()=>_(this,null,function*(){P("Page <<ChangePasswordPage>> mounted."),N().then(o=>{Object.assign(e,o.data)})})),(o,a)=>{const i=M,b=D,p=G,V=H,v=x,y=I;return F(),K(q,null,[s(b,null,{default:d(()=>[s(i,{title:o.$t("common.user_pages_change_email_title"),"left-arrow":"",onClickLeft:a[0]||(a[0]=n=>t(A)())},null,8,["title"])]),_:1}),L,s(y,{ref_key:"form",ref:r,onSubmit:u},{default:d(()=>[s(V,{inset:""},{default:d(()=>[s(p,{modelValue:e.email,"onUpdate:modelValue":a[1]||(a[1]=n=>e.email=n),label:t(l)("common.user_field_current_email"),border:"","label-width":"4em","label-align":"right",readonly:"",placeholder:e.email,rules:m.email},null,8,["modelValue","label","placeholder","rules"]),s(p,{modelValue:e.password,"onUpdate:modelValue":a[2]||(a[2]=n=>e.password=n),label:t(l)("common.user_field_password"),"label-width":"4em","label-align":"right",type:"password",placeholder:t(l)("common.user_field_password_placeholder"),rules:m.password},null,8,["modelValue","label","placeholder","rules"]),s(p,{modelValue:e.newEmail,"onUpdate:modelValue":a[3]||(a[3]=n=>e.newEmail=n),label:t(l)("common.user_field_new_email"),"label-width":"4em","label-align":"right",placeholder:t(l)("common.user_field_new_email_placeholder"),rules:m.newEmail},null,8,["modelValue","label","placeholder","rules"]),s(p,{modelValue:e.captchaValue,"onUpdate:modelValue":a[4]||(a[4]=n=>e.captchaValue=n),label:t(l)("common.field_captcha"),"label-width":"4em","label-align":"right",placeholder:t(l)("common.field_captcha_placeholder"),rules:m.captchaValue},{button:d(()=>[s(t(j),{email:e.newEmail,onChange:c},null,8,["email"])]),_:1},8,["modelValue","label","placeholder","rules"])]),_:1}),w("div",Q,[s(v,{block:"",type:"primary","native-type":"submit"},{default:d(()=>[S(U(t(l)("common.button_submit")),1)]),_:1})])]),_:1},512)],64)}}});export{ie as default};
