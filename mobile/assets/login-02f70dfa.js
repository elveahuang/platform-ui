var V=(p,d,s)=>new Promise((c,_)=>{var n=r=>{try{i(s.next(r))}catch(v){_(v)}},o=r=>{try{i(s.throw(r))}catch(v){_(v)}},i=r=>r.done?c(r.value):Promise.resolve(r.value).then(n,o);i((s=s.apply(p,d)).next())});import{m as G,d as B,n as K,p as H,h as t,q as J,s as L,v as Q,x as W,y as Y,j as y,z as X,o as $,c as x,w as a,u as m,I as C,F as N,A,B as Z,C as F,P as D,D as ee,E as te,G as ne,H as oe,J as se,K as le,L as ae,M as re,f as R,N as ue,g as ie,l as ce,a as q,O as M,Q as I,t as me}from"./index-9f8d664e.js";import{B as E,F as de,S as pe,C as _e,R as fe}from"./index-169361ae.js";/* empty css              *//* empty css              */import{C as ve}from"./index-c9b2661a.js";import"./index-54c63fa9.js";import{N as ge}from"./index-98a3ec2a.js";/* empty css                                                                 */import{P as U,u as he,a as we,b as ye}from"./useTheme-25f7aea2.js";import"./use-route-e0417d80.js";import"./use-placeholder-55253c18.js";const[ke,Ve]=G("form"),be={colon:Boolean,disabled:Boolean,readonly:Boolean,required:[Boolean,String],showError:Boolean,labelWidth:J,labelAlign:String,inputAlign:String,scrollToError:Boolean,validateFirst:Boolean,submitOnEnter:L,showErrorMessage:L,errorMessageAlign:String,validateTrigger:{type:[String,Array],default:"onBlur"}};var Ce=B({name:ke,props:be,emits:["submit","failed"],setup(p,{emit:d,slots:s}){const{children:c,linkChildren:_}=K(W),n=e=>e?c.filter(l=>e.includes(l.name)):c,o=e=>new Promise((l,f)=>{const w=[];n(e).reduce((b,j)=>b.then(()=>{if(!w.length)return j.validate().then(z=>{z&&w.push(z)})}),Promise.resolve()).then(()=>{w.length?f(w):l()})}),i=e=>new Promise((l,f)=>{const w=n(e);Promise.all(w.map(g=>g.validate())).then(g=>{g=g.filter(Boolean),g.length?f(g):l()})}),r=e=>{const l=c.find(f=>f.name===e);return l?new Promise((f,w)=>{l.validate().then(g=>{g?w(g):f()})}):Promise.reject()},v=e=>typeof e=="string"?r(e):p.validateFirst?o(e):i(e),h=e=>{typeof e=="string"&&(e=[e]),n(e).forEach(f=>{f.resetValidation()})},u=()=>c.reduce((e,l)=>(e[l.name]=l.getValidationStatus(),e),{}),S=(e,l)=>{c.some(f=>f.name===e?(f.$el.scrollIntoView(l),!0):!1)},k=()=>c.reduce((e,l)=>(l.name!==void 0&&(e[l.name]=l.formValue.value),e),{}),P=()=>{const e=k();v().then(()=>d("submit",e)).catch(l=>{d("failed",{values:e,errors:l}),p.scrollToError&&l[0].name&&S(l[0].name)})},T=e=>{Q(e),P()};return _({props:p}),H({submit:P,validate:v,getValues:k,scrollToField:S,resetValidation:h,getValidationStatus:u}),()=>{var e;return t("form",{class:Ve(),onSubmit:T},[(e=s.default)==null?void 0:e.call(s)])}}});const Pe=Y(Ce),Be=B({__name:"DarkModePicker",setup(p){const{setDarkMode:d}=he(),s=y(!1),c=y(X.map(n=>({text:n.title,value:n.mode}))),_=n=>V(this,null,function*(){if(s.value=!1,A(n.selectedValues)){const o=Z(n.selectedValues[0]);yield d(o).then()}});return(n,o)=>{const i=F,r=E,v=U,h=D;return $(),x(N,null,[t(r,{plain:"",hairline:"",type:"primary",size:"small",onClick:o[0]||(o[0]=u=>s.value=!0)},{icon:a(()=>[t(i,null,{default:a(()=>[t(m(C),{icon:"line-md:light-dark-loop"})]),_:1})]),_:1}),t(h,{show:s.value,"onUpdate:show":o[2]||(o[2]=u=>s.value=u),round:"",position:"bottom"},{default:a(()=>[t(v,{columns:c.value,onConfirm:_,onCancel:o[1]||(o[1]=u=>s.value=!1)},null,8,["columns"])]),_:1},8,["show"])],64)}}}),Se=B({__name:"LocalePicker",setup(p){const{setLocale:d}=we(),s=y(!1),c=y(ee.map(n=>({text:n.title,value:n.locale}))),_=n=>V(this,null,function*(){s.value=!1,A(n.selectedValues)&&(yield d(te(n.selectedValues[0])).then())});return(n,o)=>{const i=F,r=E,v=U,h=D;return $(),x(N,null,[t(r,{plain:"",hairline:"",type:"primary",size:"small",onClick:o[0]||(o[0]=u=>s.value=!0)},{icon:a(()=>[t(i,null,{default:a(()=>[t(m(C),{icon:"mdi:translate"})]),_:1})]),_:1}),t(h,{show:s.value,"onUpdate:show":o[2]||(o[2]=u=>s.value=u),round:"",position:"bottom"},{default:a(()=>[t(v,{columns:c.value,onConfirm:_,onCancel:o[1]||(o[1]=u=>s.value=!1)},null,8,["columns"])]),_:1},8,["show"])],64)}}}),$e=B({__name:"ThemePicker",setup(p){const{setTheme:d}=ye(),s=y(!1),c=y(ne.map(n=>({text:n.title,value:n.theme}))),_=n=>V(this,null,function*(){s.value=!1,A(n.selectedValues)&&(yield d(oe(n.selectedValues[0])).then())});return(n,o)=>{const i=F,r=E,v=U,h=D;return $(),x(N,null,[t(r,{plain:"",hairline:"",type:"primary",size:"small",onClick:o[0]||(o[0]=u=>s.value=!0)},{icon:a(()=>[t(i,null,{default:a(()=>[t(m(C),{icon:"ant-design:skin-outlined"})]),_:1})]),_:1}),t(h,{show:s.value,"onUpdate:show":o[2]||(o[2]=u=>s.value=u),round:"",position:"bottom"},{default:a(()=>[t(v,{columns:c.value,onConfirm:_,onCancel:o[1]||(o[1]=u=>s.value=!1)},null,8,["columns"])]),_:1},8,["show"])],64)}}});function O(p){return typeof p=="function"?p():m(p)}function xe(p=!1,d={}){const{truthyValue:s=!0,falsyValue:c=!1}=d,_=se(p),n=y(p);function o(i){if(arguments.length)return n.value=i,n.value;{const r=O(s);return n.value=n.value===r?O(c):r,n.value}}return _?o:[n,o]}const Fe={class:"mt-6"},Ee={class:"m-4"},je=B({__name:"login",setup(p){const{t:d}=le(),s=ae(),c=re(),[_,n]=xe(!1),o=y(),i=R(ue),r=R({username:[{required:!0,message:"Please input username"}],password:[{required:!0,message:"Please input password"}]}),v=()=>V(this,null,function*(){yield o.value.validate(),s.login(i).then(()=>V(this,null,function*(){yield s.getUserInfo().then(),c.push("/").then()}))});return ie(()=>V(this,null,function*(){ce("Page <<Login>> mounted.")})),(h,u)=>{const S=ge,k=F,P=de,T=ve,e=E,l=pe,f=_e,w=fe,g=Pe;return $(),x("div",null,[t(S,{title:m(d)("common.title")},null,8,["title"]),q("div",Fe,[t(g,{ref_key:"form",ref:o},{default:a(()=>[t(T,{inset:""},{default:a(()=>[t(P,{modelValue:i.username,"onUpdate:modelValue":u[0]||(u[0]=b=>i.username=b),placeholder:m(d)("common.user_field_username"),rules:r.username},{default:a(()=>[M(h.$slots,"left-icon",{},()=>[t(k,null,{default:a(()=>[t(m(C),{icon:"ion:person-outline"})]),_:1})])]),_:3},8,["modelValue","placeholder","rules"]),t(P,{modelValue:i.password,"onUpdate:modelValue":u[2]||(u[2]=b=>i.password=b),placeholder:m(d)("common.user_field_password"),rules:r.password,type:m(_)?"password":"text"},{default:a(()=>[M(h.$slots,"left-icon",{},()=>[t(k,null,{default:a(()=>[t(m(C),{icon:"ion:lock-closed-outline"})]),_:1})]),M(h.$slots,"right-icon",{},()=>[t(k,{name:m(_)?"closed-eye":"eye",onClick:u[1]||(u[1]=b=>m(n)(!m(_)))},null,8,["name"]),t(k,null,{default:a(()=>[t(m(C),{icon:"ion:lock-closed-outline"})]),_:1})])]),_:3},8,["modelValue","placeholder","rules","type"])]),_:3}),q("div",Ee,[t(e,{onClick:v,type:"primary",block:""},{default:a(()=>[I(me(m(d)("common.button_login")),1)]),_:1})]),t(w,{class:"px-4 pt-4"},{default:a(()=>[t(f,{span:"12",class:"text-left"},{default:a(()=>[t(l,null,{default:a(()=>[t(m(Se)),t(m(Be)),t(m($e))]),_:1})]),_:1}),t(f,{span:"12",class:"text-right"},{default:a(()=>[t(e,{size:"small"},{default:a(()=>[I("忘记密码")]),_:1}),t(e,{size:"small"},{default:a(()=>[I("注册")]),_:1})]),_:1})]),_:1})]),_:3},512)])])}}});export{je as default};
