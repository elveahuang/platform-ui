import{r as Ie,u as we}from"./use-route-2554362a.js";import{c as F,X as ae,a5 as x,n as M,d as j,aY as Ee,b as f,l as p,p as W,a9 as Pe,w as q,at as Te,aZ as Ve,aO as Be,av as Re,a_ as $e,a$ as Me,a4 as Y,aQ as Le,B as _e,r as U,a0 as ie,N as I,ak as G,a as Ae,aU as ze,b0 as Ne,a7 as Oe,ac as D,D as De,a2 as pe,F as We,W as V,b1 as ee,b2 as Fe,ab as je,J as qe,b3 as Ue,t as Ke,u as Ye}from"./index-a42af1e3.js";import{c as He,C as Je}from"./index-d8bd459b.js";const[Qe,B]=F("button"),Xe=ae({},Ie,{tag:x("button"),text:String,icon:String,type:x("default"),size:x("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:x("button"),loadingSize:M,loadingText:String,loadingType:String,iconPosition:x("left")});var Ze=j({name:Qe,props:Xe,emits:["click"],setup(e,{emit:n,slots:a}){const m=we(),i=()=>a.loading?a.loading():f(Pe,{size:e.loadingSize,type:e.loadingType,class:B("loading")},null),s=()=>{if(e.loading)return i();if(a.icon)return f("div",{class:B("icon")},[a.icon()]);if(e.icon)return f(p,{name:e.icon,class:B("icon"),classPrefix:e.iconPrefix},null)},h=()=>{let r;if(e.loading?r=e.loadingText:r=a.default?a.default():e.text,r)return f("span",{class:B("text")},[r])},d=()=>{const{color:r,plain:u}=e;if(r){const C={color:u?r:"white"};return u||(C.background=r),r.includes("gradient")?C.border=0:C.borderColor=r,C}},c=r=>{e.loading?W(r):e.disabled||(n("click",r),m())};return()=>{const{tag:r,type:u,size:C,block:w,round:R,plain:E,square:L,loading:_,disabled:P,hairline:A,nativeType:T,iconPosition:z}=e,$=[B([u,C,{plain:E,block:w,round:R,square:L,loading:_,disabled:P,hairline:A}]),{[Ee]:A}];return f(r,{type:T,class:$,style:d(),disabled:P,onClick:c},{default:()=>[f("div",{class:B("content")},[z==="left"&&s(),h(),z==="right"&&s()])]})}}});const xt=q(Ze);let Ge=0;function et(){const e=Te(),{name:n="unknown"}=(e==null?void 0:e.type)||{};return`${n}-${++Ge}`}function le(e){return Array.isArray(e)?!e.length:e===0?!1:!e}function tt(e,n){if(le(e)){if(n.required)return!1;if(n.validateEmpty===!1)return!0}return!(n.pattern&&!n.pattern.test(String(e)))}function nt(e,n){return new Promise(a=>{const m=n.validator(e,n);if($e(m)){m.then(a);return}a(m)})}function te(e,n){const{message:a}=n;return Me(a)?a(e,n):a||""}function at({target:e}){e.composing=!0}function ne({target:e}){e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}function it(e,n){const a=Ve();e.style.height="auto";let m=e.scrollHeight;if(Re(n)){const{maxHeight:i,minHeight:s}=n;i!==void 0&&(m=Math.min(m,i)),s!==void 0&&(m=Math.max(m,s))}m&&(e.style.height=`${m}px`,Be(a))}function lt(e){return e==="number"?{type:"text",inputmode:"decimal"}:e==="digit"?{type:"tel",inputmode:"numeric"}:{type:e}}function k(e){return[...e].length}function K(e,n){return[...e].slice(0,n).join("")}const[rt,y]=F("field"),ot={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:M,formatter:Function,clearIcon:x("clear"),modelValue:Y(""),inputAlign:String,placeholder:String,autocomplete:String,autocapitalize:String,autocorrect:String,errorMessage:String,enterkeyhint:String,spellcheck:{type:Boolean,default:null},clearTrigger:x("focus"),formatTrigger:x("onChange"),error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null}},st=ae({},He,ot,{rows:M,type:x("text"),rules:Array,autosize:[Boolean,Object],labelWidth:M,labelClass:Le,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var ct=j({name:rt,props:st,emits:["blur","focus","clear","keypress","clickInput","endValidate","startValidate","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:n,slots:a}){const m=et(),i=_e({status:"unvalidated",focused:!1,validateMessage:""}),s=U(),h=U(),d=U(),{parent:c}=ie(We),r=()=>{var t;return String((t=e.modelValue)!=null?t:"")},u=t=>{if(V(e[t]))return e[t];if(c&&V(c.props[t]))return c.props[t]},C=I(()=>{const t=u("readonly");if(e.clearable&&!t){const o=r()!=="",l=e.clearTrigger==="always"||e.clearTrigger==="focus"&&i.focused;return o&&l}return!1}),w=I(()=>d.value&&a.input?d.value():e.modelValue),R=t=>t.reduce((o,l)=>o.then(()=>{if(i.status==="failed")return;let{value:g}=w;if(l.formatter&&(g=l.formatter(g,l)),!tt(g,l)){i.status="failed",i.validateMessage=te(g,l);return}if(l.validator)return le(g)&&l.validateEmpty===!1?void 0:nt(g,l).then(b=>{b&&typeof b=="string"?(i.status="failed",i.validateMessage=b):b===!1&&(i.status="failed",i.validateMessage=te(g,l))})}),Promise.resolve()),E=()=>{i.status="unvalidated",i.validateMessage=""},L=()=>n("endValidate",{status:i.status,message:i.validateMessage}),_=(t=e.rules)=>new Promise(o=>{E(),t?(n("startValidate"),R(t).then(()=>{i.status==="failed"?(o({name:e.name,message:i.validateMessage}),L()):(i.status="passed",o(),L())})):o()}),P=t=>{if(c&&e.rules){const{validateTrigger:o}=c.props,l=ee(o).includes(t),g=e.rules.filter(b=>b.trigger?ee(b.trigger).includes(t):l);g.length&&_(g)}},A=t=>{var o;const{maxlength:l}=e;if(V(l)&&k(t)>+l){const g=r();if(g&&k(g)===+l)return g;const b=(o=s.value)==null?void 0:o.selectionEnd;if(i.focused&&b){const v=[...t],S=v.length-+l;return v.splice(b-S,S),v.join("")}return K(t,+l)}return t},T=(t,o="onChange")=>{const l=t;t=A(t);const g=k(l)-k(t);if(e.type==="number"||e.type==="digit"){const v=e.type==="number";t=Fe(t,v,v)}let b=0;if(e.formatter&&o===e.formatTrigger){const{formatter:v,maxlength:S}=e;if(t=v(t),V(S)&&k(t)>+S&&(t=K(t,+S)),s.value&&i.focused){const{selectionEnd:O}=s.value,Z=K(l,O);b=k(v(Z))-k(Z)}}if(s.value&&s.value.value!==t)if(i.focused){let{selectionStart:v,selectionEnd:S}=s.value;if(s.value.value=t,V(v)&&V(S)){const O=k(t);g?(v-=g,S-=g):b&&(v+=b,S+=b),s.value.setSelectionRange(Math.min(v,O),Math.min(S,O))}}else s.value.value=t;t!==e.modelValue&&n("update:modelValue",t)},z=t=>{t.target.composing||T(t.target.value)},$=()=>{var t;return(t=s.value)==null?void 0:t.blur()},H=()=>{var t;return(t=s.value)==null?void 0:t.focus()},N=()=>{const t=s.value;e.type==="textarea"&&e.autosize&&t&&it(t,e.autosize)},se=t=>{i.focused=!0,n("focus",t),D(N),u("readonly")&&$()},ce=t=>{i.focused=!1,T(r(),"onBlur"),n("blur",t),!u("readonly")&&(P("onBlur"),D(N),Ue())},J=t=>n("clickInput",t),ue=t=>n("clickLeftIcon",t),de=t=>n("clickRightIcon",t),fe=t=>{W(t),n("update:modelValue",""),n("clear",t)},Q=I(()=>{if(typeof e.error=="boolean")return e.error;if(c&&c.props.showError&&i.status==="failed")return!0}),ge=I(()=>{const t=u("labelWidth"),o=u("labelAlign");if(t&&o!=="top")return{width:G(t)}}),me=t=>{t.keyCode===13&&(!(c&&c.props.submitOnEnter)&&e.type!=="textarea"&&W(t),e.type==="search"&&$()),n("keypress",t)},X=()=>e.id||`${m}-input`,he=()=>i.status,be=()=>{const t=y("control",[u("inputAlign"),{error:Q.value,custom:!!a.input,"min-height":e.type==="textarea"&&!e.autosize}]);if(a.input)return f("div",{class:t,onClick:J},[a.input()]);const o={id:X(),ref:s,name:e.name,rows:e.rows!==void 0?+e.rows:void 0,class:t,disabled:u("disabled"),readonly:u("readonly"),autofocus:e.autofocus,placeholder:e.placeholder,autocomplete:e.autocomplete,autocapitalize:e.autocapitalize,autocorrect:e.autocorrect,enterkeyhint:e.enterkeyhint,spellcheck:e.spellcheck,"aria-labelledby":e.label?`${m}-label`:void 0,onBlur:ce,onFocus:se,onInput:z,onClick:J,onChange:ne,onKeypress:me,onCompositionend:ne,onCompositionstart:at};return e.type==="textarea"?f("textarea",o,null):f("input",je(lt(e.type),o),null)},ve=()=>{const t=a["left-icon"];if(e.leftIcon||t)return f("div",{class:y("left-icon"),onClick:ue},[t?t():f(p,{name:e.leftIcon,classPrefix:e.iconPrefix},null)])},ye=()=>{const t=a["right-icon"];if(e.rightIcon||t)return f("div",{class:y("right-icon"),onClick:de},[t?t():f(p,{name:e.rightIcon,classPrefix:e.iconPrefix},null)])},Se=()=>{if(e.showWordLimit&&e.maxlength){const t=k(r());return f("div",{class:y("word-limit")},[f("span",{class:y("word-num")},[t]),qe("/"),e.maxlength])}},xe=()=>{if(c&&c.props.showErrorMessage===!1)return;const t=e.errorMessage||i.validateMessage;if(t){const o=a["error-message"],l=u("errorMessageAlign");return f("div",{class:y("error-message",l)},[o?o({message:t}):t])}},Ce=()=>{const t=u("labelWidth"),o=u("labelAlign"),l=u("colon")?":":"";if(a.label)return[a.label(),l];if(e.label)return f("label",{id:`${m}-label`,for:a.input?void 0:X(),onClick:g=>{W(g),H()},style:o==="top"&&t?{width:G(t)}:void 0},[e.label+l])},ke=()=>[f("div",{class:y("body")},[be(),C.value&&f(p,{ref:h,name:e.clearIcon,class:y("clear")},null),ye(),a.button&&f("div",{class:y("button")},[a.button()])]),Se(),xe()];return Ae({blur:$,focus:H,validate:_,formValue:w,resetValidation:E,getValidationStatus:he}),ze(Ne,{customValue:d,resetValidation:E,validateWithTrigger:P}),Oe(()=>e.modelValue,()=>{T(r()),E(),P("onChange"),D(N)}),De(()=>{T(r(),e.formatTrigger),D(N)}),pe("touchstart",fe,{target:I(()=>{var t;return(t=h.value)==null?void 0:t.$el})}),()=>{const t=u("disabled"),o=u("labelAlign"),l=ve(),g=()=>{const b=Ce();return o==="top"?[l,b].filter(Boolean):b||[]};return f(Je,{size:e.size,class:y({error:Q.value,disabled:t,[`label-${o}`]:o}),center:e.center,border:e.border,isLink:e.isLink,clickable:e.clickable,titleStyle:ge.value,valueClass:y("value"),titleClass:[y("label",[o,{required:e.required}]),e.labelClass],arrowDirection:e.arrowDirection},{icon:l&&o!=="top"?()=>l:null,title:g,value:ke,extra:a.extra})}}});const Ct=q(ct),[re,ut]=F("row"),oe=Symbol(re),dt={tag:x("div"),wrap:Ke,align:String,gutter:Y(0),justify:String};var ft=j({name:re,props:dt,setup(e,{slots:n}){const{children:a,linkChildren:m}=Ye(oe),i=I(()=>{const h=[[]];let d=0;return a.forEach((c,r)=>{d+=Number(c.span),d>24?(h.push([r]),d-=24):h[h.length-1].push(r)}),h}),s=I(()=>{const h=Number(e.gutter),d=[];return h&&i.value.forEach(c=>{const r=h*(c.length-1)/c.length;c.forEach((u,C)=>{if(C===0)d.push({right:r});else{const w=h-d[u-1].right,R=r-w;d.push({left:w,right:R})}})}),d});return m({spaces:s}),()=>{const{tag:h,wrap:d,align:c,justify:r}=e;return f(h,{class:ut({[`align-${c}`]:c,[`justify-${r}`]:r,nowrap:!d})},{default:()=>{var u;return[(u=n.default)==null?void 0:u.call(n)]}})}}});const[gt,mt]=F("col"),ht={tag:x("div"),span:Y(0),offset:M};var bt=j({name:gt,props:ht,setup(e,{slots:n}){const{parent:a,index:m}=ie(oe),i=I(()=>{if(!a)return;const{spaces:s}=a;if(s&&s.value&&s.value[m.value]){const{left:h,right:d}=s.value[m.value];return{paddingLeft:h?`${h}px`:null,paddingRight:d?`${d}px`:null}}});return()=>{const{tag:s,span:h,offset:d}=e;return f(s,{style:i.value,class:mt({[h]:h,[`offset-${d}`]:d})},{default:()=>{var c;return[(c=n.default)==null?void 0:c.call(n)]}})}}});const kt=q(bt),It=q(ft);export{xt as B,kt as C,Ct as F,It as R,ot as f,et as u};
