var s=(i,e,t)=>new Promise((o,r)=>{var n=u=>{try{c(t.next(u))}catch(d){r(d)}},l=u=>{try{c(t.throw(u))}catch(d){r(d)}},c=u=>u.done?o(u.value):Promise.resolve(u.value).then(n,l);c((t=t.apply(i,e)).next())});import{aV as X,Q as a,aW as ne,aX as B,aY as g,aZ as k,a_ as q,a$ as be,d as Ce,$ as ye,Z as ke,a4 as Le,a5 as We,p as y,a7 as G,a8 as _e,K as V,O as xe,ab as Te}from"./index-e749b2a0.js";import{C as Re}from"./index-7b3d6f99.js";/* empty css              */import{C as Ie}from"./index-6c1c3591.js";import{N as Oe}from"./index-3bbd61c7.js";import{S as $e}from"./index-6399eb9f.js";/*! Capacitor: https://capacitorjs.com/ - MIT License */const De=i=>{const e=new Map;e.set("web",{name:"web"});const t=i.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:e},o=(n,l)=>{t.platforms.set(n,l)},r=n=>{t.platforms.has(n)&&(t.currentPlatform=t.platforms.get(n))};return t.addPlatform=o,t.setPlatform=r,t},Ee=i=>i.CapacitorPlatforms=De(i),se=Ee(typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});se.addPlatform;se.setPlatform;var D;(function(i){i.Unimplemented="UNIMPLEMENTED",i.Unavailable="UNAVAILABLE"})(D||(D={}));class K extends Error{constructor(e,t,o){super(e),this.message=e,this.code=t,this.data=o}}const Ue=i=>{var e,t;return i!=null&&i.androidBridge?"android":!((t=(e=i==null?void 0:i.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},Ae=i=>{var e,t,o,r,n;const l=i.CapacitorCustomPlatform||null,c=i.Capacitor||{},u=c.Plugins=c.Plugins||{},d=i.CapacitorPlatforms,A=()=>l!==null?l.name:Ue(i),W=((e=d==null?void 0:d.currentPlatform)===null||e===void 0?void 0:e.getPlatform)||A,F=()=>W()!=="web",de=((t=d==null?void 0:d.currentPlatform)===null||t===void 0?void 0:t.isNativePlatform)||F,ue=h=>{const f=j.get(h);return!!(f!=null&&f.platforms.has(W())||Y(h))},he=((o=d==null?void 0:d.currentPlatform)===null||o===void 0?void 0:o.isPluginAvailable)||ue,fe=h=>{var f;return(f=c.PluginHeaders)===null||f===void 0?void 0:f.find(_=>_.name===h)},Y=((r=d==null?void 0:d.currentPlatform)===null||r===void 0?void 0:r.getPluginHeader)||fe,ge=h=>i.console.error(h),me=(h,f,_)=>Promise.reject(`${_} does not have an implementation of "${f}".`),j=new Map,ve=(h,f={})=>{const _=j.get(h);if(_)return console.warn(`Capacitor plugin "${h}" already registered. Cannot register plugins twice.`),_.proxy;const L=W(),x=Y(h);let S;const we=()=>s(void 0,null,function*(){return!S&&L in f?S=typeof f[L]=="function"?S=yield f[L]():S=f[L]:l!==null&&!S&&"web"in f&&(S=typeof f.web=="function"?S=yield f.web():S=f.web),S}),Pe=(m,v)=>{var P,b;if(x){const C=x==null?void 0:x.methods.find(w=>v===w.name);if(C)return C.rtype==="promise"?w=>c.nativePromise(h,v.toString(),w):(w,Q)=>c.nativeCallback(h,v.toString(),w,Q);if(m)return(P=m[v])===null||P===void 0?void 0:P.bind(m)}else{if(m)return(b=m[v])===null||b===void 0?void 0:b.bind(m);throw new K(`"${h}" plugin is not implemented on ${L}`,D.Unimplemented)}},N=m=>{let v;const P=(...b)=>{const C=we().then(w=>{const Q=Pe(w,m);if(Q){const M=Q(...b);return v=M==null?void 0:M.remove,M}else throw new K(`"${h}.${m}()" is not implemented on ${L}`,D.Unimplemented)});return m==="addListener"&&(C.remove=()=>s(void 0,null,function*(){return v()})),C};return P.toString=()=>`${m.toString()}() { [capacitor code] }`,Object.defineProperty(P,"name",{value:m,writable:!1,configurable:!1}),P},ee=N("addListener"),ae=N("removeListener"),Se=(m,v)=>{const P=ee({eventName:m},v),b=()=>s(void 0,null,function*(){const w=yield P;ae({eventName:m,callbackId:w},v)}),C=new Promise(w=>P.then(()=>w({remove:b})));return C.remove=()=>s(void 0,null,function*(){console.warn("Using addListener() without 'await' is deprecated."),yield b()}),C},H=new Proxy({},{get(m,v){switch(v){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return x?Se:ee;case"removeListener":return ae;default:return N(v)}}});return u[h]=H,j.set(h,{name:h,proxy:H,platforms:new Set([...Object.keys(f),...x?[L]:[]])}),H},pe=((n=d==null?void 0:d.currentPlatform)===null||n===void 0?void 0:n.registerPlugin)||ve;return c.convertFileSrc||(c.convertFileSrc=h=>h),c.getPlatform=W,c.handleError=ge,c.isNativePlatform=de,c.isPluginAvailable=he,c.pluginMethodNoop=me,c.registerPlugin=pe,c.Exception=K,c.DEBUG=!!c.DEBUG,c.isLoggingEnabled=!!c.isLoggingEnabled,c.platform=c.getPlatform(),c.isNative=c.isNativePlatform(),c},Qe=i=>i.Capacitor=Ae(i),p=Qe(typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{}),U=p.registerPlugin;p.Plugins;class ce{constructor(e){this.listeners={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t);const r=this.windowListeners[e];r&&!r.registered&&this.addWindowListener(r);const n=()=>s(this,null,function*(){return this.removeListener(e,t)}),l=Promise.resolve({remove:n});return Object.defineProperty(l,"remove",{value:()=>s(this,null,function*(){console.warn("Using addListener() without 'await' is deprecated."),yield n()})}),l}removeAllListeners(){return s(this,null,function*(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}})}notifyListeners(e,t){const o=this.listeners[e];o&&o.forEach(r=>r(t))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:o=>{this.notifyListeners(t,o)}}}unimplemented(e="not implemented"){return new p.Exception(e,D.Unimplemented)}unavailable(e="not available"){return new p.Exception(e,D.Unavailable)}removeListener(e,t){return s(this,null,function*(){const o=this.listeners[e];if(!o)return;const r=o.indexOf(t);this.listeners[e].splice(r,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])})}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}}const te=i=>encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),oe=i=>i.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Me extends ce{getCookies(){return s(this,null,function*(){const e=document.cookie,t={};return e.split(";").forEach(o=>{if(o.length<=0)return;let[r,n]=o.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");r=oe(r).trim(),n=oe(n).trim(),t[r]=n}),t})}setCookie(e){return s(this,null,function*(){try{const t=te(e.key),o=te(e.value),r=`; expires=${(e.expires||"").replace("expires=","")}`,n=(e.path||"/").replace("path=",""),l=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${o||""}${r}; path=${n}; ${l};`}catch(t){return Promise.reject(t)}})}deleteCookie(e){return s(this,null,function*(){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}})}clearCookies(){return s(this,null,function*(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}})}clearAllCookies(){return s(this,null,function*(){try{yield this.clearCookies()}catch(e){return Promise.reject(e)}})}}U("CapacitorCookies",{web:()=>new Me});const ze=i=>s(void 0,null,function*(){return new Promise((e,t)=>{const o=new FileReader;o.onload=()=>{const r=o.result;e(r.indexOf(",")>=0?r.split(",")[1]:r)},o.onerror=r=>t(r),o.readAsDataURL(i)})}),Be=(i={})=>{const e=Object.keys(i);return Object.keys(i).map(r=>r.toLocaleLowerCase()).reduce((r,n,l)=>(r[n]=i[e[l]],r),{})},Fe=(i,e=!0)=>i?Object.entries(i).reduce((o,r)=>{const[n,l]=r;let c,u;return Array.isArray(l)?(u="",l.forEach(d=>{c=e?encodeURIComponent(d):d,u+=`${n}=${c}&`}),u.slice(0,-1)):(c=e?encodeURIComponent(l):l,u=`${n}=${c}`),`${o}&${u}`},"").substr(1):null,je=(i,e={})=>{const t=Object.assign({method:i.method||"GET",headers:i.headers},e),r=Be(i.headers)["content-type"]||"";if(typeof i.data=="string")t.body=i.data;else if(r.includes("application/x-www-form-urlencoded")){const n=new URLSearchParams;for(const[l,c]of Object.entries(i.data||{}))n.set(l,c);t.body=n.toString()}else if(r.includes("multipart/form-data")){const n=new FormData;if(i.data instanceof FormData)i.data.forEach((c,u)=>{n.append(u,c)});else for(const c of Object.keys(i.data))n.append(c,i.data[c]);t.body=n;const l=new Headers(t.headers);l.delete("content-type"),t.headers=l}else(r.includes("application/json")||typeof i.data=="object")&&(t.body=JSON.stringify(i.data));return t};class Ne extends ce{request(e){return s(this,null,function*(){const t=je(e,e.webFetchExtra),o=Fe(e.params,e.shouldEncodeUrlParams),r=o?`${e.url}?${o}`:e.url,n=yield fetch(r,t),l=n.headers.get("content-type")||"";let{responseType:c="text"}=n.ok?e:{};l.includes("application/json")&&(c="json");let u,d;switch(c){case"arraybuffer":case"blob":d=yield n.blob(),u=yield ze(d);break;case"json":u=yield n.json();break;case"document":case"text":default:u=yield n.text()}const A={};return n.headers.forEach((W,F)=>{A[F]=W}),{data:u,headers:A,status:n.status,url:n.url}})}get(e){return s(this,null,function*(){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))})}post(e){return s(this,null,function*(){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))})}put(e){return s(this,null,function*(){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))})}patch(e){return s(this,null,function*(){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))})}delete(e){return s(this,null,function*(){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))})}}U("CapacitorHttp",{web:()=>new Ne});const z=U("Browser",{web:()=>X(()=>import("./web-1b563dfb.js"),["assets/web-1b563dfb.js","assets/index-e749b2a0.js","assets/index-008b2041.css","assets/index-7b3d6f99.js","assets/index-5987bc0e.css","assets/index-6c1c3591.js","assets/use-route-a8abcd9b.js","assets/index-51a50d13.css","assets/index-3bbd61c7.js","assets/use-placeholder-3c5f841d.js","assets/index-6b40a77a.css","assets/index-6399eb9f.js","assets/index-5005ec54.css","assets/index-177c7992.css"]).then(i=>new i.BrowserWeb)});class He{available(){return s(this,null,function*(){return!0})}open(e,t,o){return s(this,null,function*(){if(p.isNativePlatform())yield z.open({url:e}),yield z.addListener("browserFinished",t),yield z.addListener("browserPageLoaded",o);else return new Promise(r=>{window.open(e,"_self"),r()})})}close(){return s(this,null,function*(){yield z.removeAllListeners()})}}const le=new He;var re;(function(i){i.Prompt="PROMPT",i.Camera="CAMERA",i.Photos="PHOTOS"})(re||(re={}));var ie;(function(i){i.Rear="REAR",i.Front="FRONT"})(ie||(ie={}));var Z;(function(i){i.Uri="uri",i.Base64="base64",i.DataUrl="dataUrl"})(Z||(Z={}));const qe=U("Camera",{web:()=>X(()=>import("./web-966dde09.js"),["assets/web-966dde09.js","assets/index-e749b2a0.js","assets/index-008b2041.css","assets/index-7b3d6f99.js","assets/index-5987bc0e.css","assets/index-6c1c3591.js","assets/use-route-a8abcd9b.js","assets/index-51a50d13.css","assets/index-3bbd61c7.js","assets/use-placeholder-3c5f841d.js","assets/index-6b40a77a.css","assets/index-6399eb9f.js","assets/index-5005ec54.css","assets/index-177c7992.css"]).then(i=>new i.CameraWeb)}),J=U("BarcodeScanner",{web:()=>X(()=>import("./web-50fff4ad.js"),["assets/web-50fff4ad.js","assets/index-e749b2a0.js","assets/index-008b2041.css","assets/index-7b3d6f99.js","assets/index-5987bc0e.css","assets/index-6c1c3591.js","assets/use-route-a8abcd9b.js","assets/index-51a50d13.css","assets/index-3bbd61c7.js","assets/use-placeholder-3c5f841d.js","assets/index-6b40a77a.css","assets/index-6399eb9f.js","assets/index-5005ec54.css","assets/index-177c7992.css"]).then(i=>new i.BarcodeScannerWeb)});class Ge{available(){return s(this,null,function*(){return!0})}isNative(){return p.isNativePlatform()}isIos(){return p.getPlatform()==="ios"}isAndroid(){return p.getPlatform()==="android"}isWeb(){return p.getPlatform()==="web"}config(){return s(this,null,function*(){a("NativeService config...")})}takePhotos(e="",t=1){return s(this,null,function*(){return a("NativeService takePhotos..."),a(e),a(t),new Promise((o,r)=>s(this,null,function*(){p.isPluginAvailable("Camera")?(a("NativeService Camera available."),yield qe.getPhoto({quality:90,allowEditing:!0,resultType:Z.Uri}),o("")):(a("NativeService Camera not available."),r())}))})}scanQRCode(){return a("NativeService scanQRCode..."),new Promise((e,t)=>s(this,null,function*(){if(p.isPluginAvailable("BarcodeScanner")){a("NativeService BarcodeScanner available."),yield J.checkPermission({force:!0}),yield J.hideBackground();const r=yield J.startScan();r.hasContent?(a("LarkService scanQRCode success."),a(r),e(r.content)):(a("LarkService scanQRCode fail."),a(r),t())}else a("NativeService BarcodeScanner not available."),t()}))}}const T=new Ge,Ve=i=>ne("/api/oapis/wecom/signature",i),Ke=i=>ne("/api/oapis/wechat/signature",i);class Je{available(){return s(this,null,function*(){return!0})}isWeChat(){const e=window.navigator.userAgent.toLowerCase();return e.indexOf("micromessenger")!=-1&&e.indexOf("wxwork")!=-1}auth(e,t=!1){return s(this,null,function*(){a("WeChatService auth...");let o;E.isWebPlatform()&&!B(g.wechat.mp.webappRedirectUrl)?o=t?e:k(g.wechat.mp.webappRedirectUrl,q(e,"code")):E.isWapPlatform()&&!B(g.wechat.mp.mobileRedirectUrl)?o=t?e:k(g.wechat.mp.mobileRedirectUrl,q(e,"code")):o=t?e:k(g.wechat.mp.redirectUrl,q(e,"code"));const r=k(g.wechat.mp.appId,encodeURIComponent(o));a(`WeChatService redirect to ${r}.`),yield le.open(r,()=>{},()=>{})})}getSignature(e){return s(this,null,function*(){return a("WeChatService getSignature..."),yield Ke({url:e})})}config(){return s(this,null,function*(){a("WeChatService config...");const e=location.href.split("#")[0];return new Promise((t,o)=>{this.getSignature(e).then(r=>{r.data?(a("WeChatService config..."),wx.config({debug:!1,appId:r.data.appId,timestamp:r.data.timestamp,nonceStr:r.data.nonceStr,signature:r.data.signature,jsApiList:["chooseImage","getLocalImgData","previewImage","scanQRCode","getLocation","uploadImage","downloadImage","onMenuShareTimeline","onMenuShareAppMessage","updateAppMessageShareData","updateTimelineShareData","onMenuShareWeibo","invoke"]}),wx.ready(()=>{a("WeChatService config ready."),t()}),wx.error(n=>{a("WeChatService config error."),console.log(n)})):o()}).catch(r=>{a("WeChatService config ready."),a(r),o()})})})}getPhoto(){return s(this,null,function*(){return a("WeChatService getPhoto..."),this.takePhotos("camera",1)})}choosePhotos(e=1){return s(this,null,function*(){return a("WeChatService choosePhotos..."),this.takePhotos("album",e)})}takePhotos(e="",t=1){return s(this,null,function*(){return a("WeChatService takePhotos..."),new Promise((o,r)=>{wx?(a("WeChatService available."),wx.ready(()=>{wx.chooseImage({sourceType:[e],count:t,sizeType:["original","compressed"],success:n=>{a("WeChatService takePhotos success."),a(n),o(n.localIds)},fail:()=>{a("WeChatService takePhotos fail."),r()}})})):(a("WeChatService not available."),r())})})}scanQRCode(){return a("WeChatService scanQRCode..."),new Promise((e,t)=>{console.log(wx),wx?(a("WeChatService wx available."),wx.ready(()=>{a("WeChatService wx ready."),wx.scanQRCode({needResult:1,scanType:["qrCode","barCode"],success:o=>{a("WeChatService scanQRCode success."),a(o),e(o.resultStr)},cancel:o=>{a("WeChatService scanQRCode cancel."),a(o),t(o)},error:o=>{a("WeChatService scanQRCode error."),a(o),o.errMsg.indexOf("function_not_exist")>0&&console.log("版本过低请升级"),t(o)}})})):(a("WeChatService wx not available."),t())})}}const R=new Je;class Ze{available(){return s(this,null,function*(){return!0})}isLark(){return window.navigator.userAgent.toLowerCase().indexOf("lark")!==-1}getSignature(e){return s(this,null,function*(){a(e),a("LarkService getSignature...")})}config(){return s(this,null,function*(){return this.isLark()?(a("LarkService getSignature..."),new Promise((e,t)=>{this.getSignature("url").then(o=>{o.data?(a("LarkService config..."),h5sdk.config({appId:o.data.appId,timestamp:+o.data.timestamp,nonceStr:o.data.nonceStr,signature:o.data.signature,jsApiList:["biz.navigation.close","biz.util.share"],onSuccess:r=>{a("LarkService config onSuccess."),a(r),e()},onFail:r=>{a("LarkService config onFail."),a(r),t()}}),h5sdk.error(r=>{a("LarkService config error."),a(r)}),h5sdk.ready(()=>{a("LarkService config ready.")})):t()})})):Promise.resolve()})}getPhoto(){return s(this,null,function*(){return a("LarkService getPhoto..."),this.takePhotos("camera",1)})}choosePhotos(e=1){return s(this,null,function*(){return a("LarkService choosePhotos..."),this.takePhotos("album",e)})}takePhotos(e="",t=1){return s(this,null,function*(){return a("LarkService takePhotos..."),new Promise((o,r)=>{h5sdk?(a("LarkService h5sdk available."),h5sdk.ready(()=>{tt.chooseImage({sourceType:[e],count:t,sizeType:["original","compressed"],success:n=>{a("LarkService takePhotos success."),a(n),o(n.tempFilePaths)},fail:n=>{a("LarkService takePhotos success."),a(n),r()}})})):(a("LarkService h5sdk not available."),r())})})}scanQRCode(){return a("LarkService scanQRCode..."),new Promise((e,t)=>{h5sdk?(a("LarkService h5sdk available."),h5sdk.ready(()=>{a("LarkService h5sdk ready."),tt.scanCode({scanType:["barCode","qrCode"],barCodeInput:!0,success:o=>{a("LarkService scanQRCode success."),a(o),e(o.result)},fail:o=>{a("LarkService scanQRCode fail."),a(o),t()}})})):(a("LarkService h5sdk not available."),t())})}}const I=new Ze;class Xe{available(){return s(this,null,function*(){return!0})}isDingTalk(){return window.navigator.userAgent.toLowerCase().indexOf("lark")!==-1}getSignature(e){return s(this,null,function*(){a(e),a("DingTalkService getSignature...")})}config(){return s(this,null,function*(){return a("DingTalkService config..."),new Promise((e,t)=>{this.getSignature("url").then(o=>{o.data?(a("DingTalkService config..."),dd.config({agentId:o.data.agentId,corpId:o.data.corpId,timeStamp:o.data.timestamp,nonceStr:o.data.nonceStr,signature:o.data.signature,jsApiList:["runtime.info","biz.contact.choose","device.notification.confirm","device.notification.alert","device.notification.prompt","biz.ding.post","biz.util.openLink","biz.navigation.close","biz.util.share","biz.util.chooseImage","biz.util.scan"],onSuccess:r=>{a("DingTalkService config onSuccess."),a(r),e()},onFail:r=>{a("DingTalkService config onFail."),a(r),t()}}),dd.error(r=>{a("DingTalkService config error."),a(r)}),dd.ready(()=>{a("DingTalkService config ready.")})):t()})})})}getPhoto(){return s(this,null,function*(){return a("DingTalkService getPhoto..."),this.takePhotos("camera",1)})}choosePhotos(e=1){return s(this,null,function*(){return a("DingTalkService choosePhotos..."),this.takePhotos("album",e)})}takePhotos(e="",t=1){return s(this,null,function*(){return a("DingTalkService takePhotos..."),new Promise((o,r)=>{dd?(a("DingTalkService dd available."),dd.ready(()=>{dd.chooseImage({sourceType:[e],count:t,position:["back"],onSuccess:n=>{a("DingTalkService takePhotos success."),console.log(n.tempFilePaths,n.tempFiles),o()},onFail:n=>{a("DingTalkService takePhotos fail."),a(n),r()}})})):(a("DingTalkService dd not available."),r())})})}scanQRCode(){return a("DingTalkService scanQRCode..."),new Promise((e,t)=>{dd?(a("DingTalkService dd available."),dd.ready(()=>{a("DingTalkService dd ready."),dd.biz.util.scan({type:"all",onSuccess:o=>{a("DingTalkService scanQRCode onSuccess."),a(o),e(o.text)},onFail:o=>{a("DingTalkService scanQRCode onFail."),a(o),t()}})})):(a("DingTalkService dd not available."),t())})}}const O=new Xe;class Ye{getPlatform(){return p.getPlatform()}isWapPlatform(){const e=navigator.userAgent.toLowerCase();return/mobile|android|iphone|ipad|phone/i.test(e)}isWebPlatform(){return!this.isWapPlatform()}initialize(){return s(this,null,function*(){a("PlatformService initialize..."),T.isNative()?yield T.config():$.isWeCom()?yield $.config():R.isWeChat()?yield R.config():I.isLark()?yield I.config():O.isDingTalk()&&(yield O.config())})}}const E=new Ye;class ea{available(){return s(this,null,function*(){return!0})}isWeCom(){const e=window.navigator.userAgent.toLowerCase();return e.indexOf("micromessenger")!=-1&&e.indexOf("wxwork")!=-1}isWeComEnabled(){return g.wechat.cp.enabled}auth(e="",t=!1){return s(this,null,function*(){a("WeComService auth...");let o;E.isWebPlatform()&&!B(g.wechat.cp.webappRedirectUrl)?(a(`WeComService webapp auth. ${g.wechat.cp.webappRedirectUrl}`),o=t?e:k(g.wechat.cp.webappRedirectUrl,e)):E.isWapPlatform()&&!B(g.wechat.cp.mobileRedirectUrl)?(a(`WeComService mobile auth. ${g.wechat.cp.mobileRedirectUrl}`),o=t?e:k(g.wechat.cp.mobileRedirectUrl,e)):(a(`WeComService auth. ${g.wechat.cp.redirectUrl}`),o=t?e:k(g.wechat.cp.redirectUrl,e)),a(`WeComService auth redirectUrl. ${o}`);const r=k(g.wechat.cp.oauthUrl,g.wechat.cp.appId,encodeURIComponent(o),g.wechat.cp.agentId,g.wechat.cp.oauthPrivateEnabled?"snsapi_privateinfo":"snsapi_base");a(`WeComService redirect to ${r}.`),be(r),yield le.open(r,()=>{},()=>{})})}getSignature(e){return s(this,null,function*(){return a("WeComService getSignature..."),yield Ve({url:e})})}config(){return s(this,null,function*(){a("WeComService config...");const e=location.href.split("#")[0];return new Promise((t,o)=>{this.getSignature(e).then(r=>{r.data?(a("WeComService config signature."),wx.config({debug:!1,appId:r.data.appId,timestamp:r.data.timestamp,nonceStr:r.data.nonceStr,signature:r.data.signature,jsApiList:["chooseImage","getLocalImgData","previewImage","scanQRCode","getLocation","uploadImage","downloadImage","onMenuShareTimeline","onMenuShareAppMessage","updateAppMessageShareData","updateTimelineShareData","onMenuShareWeibo","invoke"]}),wx.ready(()=>{a("WeComService config ready."),t()}),wx.error(n=>{a("WeComService config error."),console.log(n)})):o()}).catch(r=>{a("WeComService config ready."),a(r),o()})})})}getPhoto(){return s(this,null,function*(){return a("WeComService getPhoto..."),this.takePhotos("camera",1)})}choosePhotos(e=1){return s(this,null,function*(){return a("WeComService choosePhotos..."),this.takePhotos("album",e)})}takePhotos(e="",t=1){return s(this,null,function*(){return a("WeComService takePhotos..."),new Promise((o,r)=>{wx?(a("WeComService wx available."),wx.ready(()=>{wx.chooseImage({sourceType:[e],count:t,sizeType:["original","compressed"],success:n=>{a("WeComService takePhotos success."),a(n),o(n.localIds)},fail:()=>{a("WeComService takePhotos fail."),r()}})})):(a("WeComService not available."),r())})})}scanQRCode(){return a("WeComService scanQRCode..."),new Promise((e,t)=>{console.log(wx),wx?(a("WeComService wx available."),wx.ready(()=>{a("WeComService wx ready."),wx.scanQRCode({needResult:1,scanType:["qrCode","barCode"],success:o=>{a("WeComService scanQRCode success."),a(o),e(o.resultStr)},cancel:o=>{a("WeComService scanQRCode cancel."),a(o),t(o)},error:o=>{a("WeComService scanQRCode error."),a(o),o.errMsg.indexOf("function_not_exist")>0&&console.log("版本过低请升级"),t(o)}})})):(a("WeComService wx not available."),t())})}}const $=new ea;class aa{available(){return s(this,null,function*(){return!0})}getPhoto(){return s(this,null,function*(){return a("CameraService getPhoto..."),this.takePhotos("camera",1)})}choosePhotos(e=1){return s(this,null,function*(){return a("CameraService choosePhotos..."),this.takePhotos("album",e)})}takePhotos(e="",t=1){return s(this,null,function*(){a("CameraService choosePhotos..."),T.isNative()?yield T.takePhotos(e,t):$.isWeCom()?yield $.takePhotos(e,t):R.isWeChat()?yield R.takePhotos(e,t):I.isLark()?yield I.takePhotos(e,t):O.isDingTalk()&&(yield O.takePhotos(e,t))})}scanQrCode(){return s(this,null,function*(){a("CameraService scanQrCode..."),T.isNative()?yield T.scanQRCode():$.isWeCom()?yield $.scanQRCode():R.isWeChat()?yield R.scanQRCode():I.isLark()?yield I.scanQRCode():O.isDingTalk()&&(yield O.scanQRCode())})}}const ta=new aa;class oa{initialize(){return s(this,null,function*(){E.initialize().then(()=>{a("PlatformService initialize successfully.")})})}}const ra=new oa,ia=Ce({__name:"me",setup(i){const{t:e}=ye(),t=o=>alert(o);return ke(()=>s(this,null,function*(){a("Page <<MePage>> mounted."),yield ra.initialize().then()})),(o,r)=>{const n=Te,l=$e,c=Oe,u=Ie,d=Re;return Le(),We(xe,null,[y(c,{onClickLeft:V(ta).getPhoto},{default:G(()=>[_e(o.$slots,"right",{},()=>[y(l,null,{default:G(()=>[y(n,{name:"scan",onClick:t}),y(n,{name:"setting-o",onClick:t}),y(n,{name:"chat-o",onClick:t})]),_:1})])]),_:3},8,["onClickLeft"]),y(d,{inset:"",class:"mt-2"},{default:G(()=>[y(u,{title:V(e)("common.label_setting"),to:"/setting",isLink:""},null,8,["title"]),y(u,{title:V(e)("common.label_about"),to:"/about",isLink:""},null,8,["title"])]),_:1})],64)}}}),fa=Object.freeze(Object.defineProperty({__proto__:null,default:ia},Symbol.toStringTag,{value:"Module"}));export{re as C,ce as W,ie as a,K as b,fa as m};
