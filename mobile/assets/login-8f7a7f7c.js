var b=(p,d,s)=>new Promise((c,_)=>{var n=r=>{try{i(s.next(r))}catch(v){_(v)}},o=r=>{try{i(s.throw(r))}catch(v){_(v)}},i=r=>r.done?c(r.value):Promise.resolve(r.value).then(n,o);i((s=s.apply(p,d)).next())});import{b as O,d as B,U as W,h as Y,k as t,y as j,t as R,z as J,V as X,s as Z,r as y,W as H,o as $,c as x,D as l,E as m,I as C,J as I,X as N,Y as Q,G as F,Z as U,_ as ee,$ as te,a0 as ne,a1 as oe,a2 as se,a3 as ae,a4 as le,a5 as re,v as L,a6 as ue,g as ie,B as ce,a as q,F as M,a7 as D,K as me}from"./index-8cf3448a.js";import{B as E,F as de,C as pe,R as _e}from"./index-059e05e0.js";import{S as fe}from"./index-2aebe3f1.js";/* empty css              *//* empty css              */import{C as ve}from"./index-64b9693a.js";import"./index-a0807a33.js";import{N as ge}from"./index-75272307.js";/* empty css              */import{P as z,u as he,a as we,b as ye}from"./useTheme-d9f67bc8.js";import"./use-route-71f9e7b0.js";import"./use-placeholder-7f0ff041.js";const[ke,Ve]=O("form"),be={colon:Boolean,disabled:Boolean,readonly:Boolean,required:[Boolean,String],showError:Boolean,labelWidth:j,labelAlign:String,inputAlign:String,scrollToError:Boolean,validateFirst:Boolean,submitOnEnter:R,showErrorMessage:R,errorMessageAlign:String,validateTrigger:{type:[String,Array],default:"onBlur"}};var Ce=B({name:ke,props:be,emits:["submit","failed"],setup(p,{emit:d,slots:s}){const{children:c,linkChildren:_}=W(X),n=e=>e?c.filter(a=>e.includes(a.name)):c,o=e=>new Promise((a,f)=>{const w=[];n(e).reduce((V,K)=>V.then(()=>{if(!w.length)return K.validate().then(A=>{A&&w.push(A)})}),Promise.resolve()).then(()=>{w.length?f(w):a()})}),i=e=>new Promise((a,f)=>{const w=n(e);Promise.all(w.map(g=>g.validate())).then(g=>{g=g.filter(Boolean),g.length?f(g):a()})}),r=e=>{const a=c.find(f=>f.name===e);return a?new Promise((f,w)=>{a.validate().then(g=>{g?w(g):f()})}):Promise.reject()},v=e=>typeof e=="string"?r(e):p.validateFirst?o(e):i(e),h=e=>{typeof e=="string"&&(e=[e]),n(e).forEach(f=>{f.resetValidation()})},u=()=>c.reduce((e,a)=>(e[a.name]=a.getValidationStatus(),e),{}),S=(e,a)=>{c.some(f=>f.name===e?(f.$el.scrollIntoView(a),!0):!1)},k=()=>c.reduce((e,a)=>(a.name!==void 0&&(e[a.name]=a.formValue.value),e),{}),P=()=>{const e=k();v().then(()=>d("submit",e)).catch(a=>{d("failed",{values:e,errors:a}),p.scrollToError&&a[0].name&&S(a[0].name)})},T=e=>{J(e),P()};return _({props:p}),Y({submit:P,validate:v,getValues:k,scrollToField:S,resetValidation:h,getValidationStatus:u}),()=>{var e;return t("form",{class:Ve(),onSubmit:T},[(e=s.default)==null?void 0:e.call(s)])}}});const Pe=Z(Ce),Be=B({__name:"DarkModePicker",setup(p){const{setDarkMode:d}=he(),s=y(!1),c=y(H.map(n=>({text:n.title,value:n.mode}))),_=n=>b(this,null,function*(){if(s.value=!1,N(n.selectedValues)){const o=Q(n.selectedValues[0]);yield d(o).then()}});return(n,o)=>{const i=F,r=E,v=z,h=U;return $(),x(I,null,[t(r,{plain:"",hairline:"",type:"primary",size:"small",onClick:o[0]||(o[0]=u=>s.value=!0)},{icon:l(()=>[t(i,null,{default:l(()=>[t(m(C),{icon:"line-md:light-dark-loop"})]),_:1})]),_:1}),t(h,{show:s.value,"onUpdate:show":o[2]||(o[2]=u=>s.value=u),round:"",position:"bottom"},{default:l(()=>[t(v,{columns:c.value,onConfirm:_,onCancel:o[1]||(o[1]=u=>s.value=!1)},null,8,["columns"])]),_:1},8,["show"])],64)}}}),Se=B({__name:"LocalePicker",setup(p){const{setLocale:d}=we(),s=y(!1),c=y(ee.map(n=>({text:n.title,value:n.locale}))),_=n=>b(this,null,function*(){s.value=!1,N(n.selectedValues)&&(yield d(te(n.selectedValues[0])).then())});return(n,o)=>{const i=F,r=E,v=z,h=U;return $(),x(I,null,[t(r,{plain:"",hairline:"",type:"primary",size:"small",onClick:o[0]||(o[0]=u=>s.value=!0)},{icon:l(()=>[t(i,null,{default:l(()=>[t(m(C),{icon:"mdi:translate"})]),_:1})]),_:1}),t(h,{show:s.value,"onUpdate:show":o[2]||(o[2]=u=>s.value=u),round:"",position:"bottom"},{default:l(()=>[t(v,{columns:c.value,onConfirm:_,onCancel:o[1]||(o[1]=u=>s.value=!1)},null,8,["columns"])]),_:1},8,["show"])],64)}}}),$e=B({__name:"ThemePicker",setup(p){const{setTheme:d}=ye(),s=y(!1),c=y(ne.map(n=>({text:n.title,value:n.theme}))),_=n=>b(this,null,function*(){s.value=!1,N(n.selectedValues)&&(yield d(oe(n.selectedValues[0])).then())});return(n,o)=>{const i=F,r=E,v=z,h=U;return $(),x(I,null,[t(r,{plain:"",hairline:"",type:"primary",size:"small",onClick:o[0]||(o[0]=u=>s.value=!0)},{icon:l(()=>[t(i,null,{default:l(()=>[t(m(C),{icon:"ant-design:skin-outlined"})]),_:1})]),_:1}),t(h,{show:s.value,"onUpdate:show":o[2]||(o[2]=u=>s.value=u),round:"",position:"bottom"},{default:l(()=>[t(v,{columns:c.value,onConfirm:_,onCancel:o[1]||(o[1]=u=>s.value=!1)},null,8,["columns"])]),_:1},8,["show"])],64)}}});function G(p){return typeof p=="function"?p():m(p)}function xe(p=!1,d={}){const{truthyValue:s=!0,falsyValue:c=!1}=d,_=se(p),n=y(p);function o(i){if(arguments.length)return n.value=i,n.value;{const r=G(s);return n.value=n.value===r?G(c):r,n.value}}return _?o:[n,o]}const Fe={class:"mt-6"},Ee={class:"m-4"},Oe=B({__name:"login",setup(p){const{t:d}=ae(),s=le(),c=re(),[_,n]=xe(!1),o=y(),i=L(ue),r=L({username:[{required:!0,message:"Please input username"}],password:[{required:!0,message:"Please input password"}]}),v=()=>b(this,null,function*(){yield o.value.validate(),s.login(i).then(()=>{c.push("/")})});return ie(()=>b(this,null,function*(){ce("Page <<Login>> mounted.")})),(h,u)=>{const S=ge,k=F,P=de,T=ve,e=E,a=fe,f=pe,w=_e,g=Pe;return $(),x("div",null,[t(S,{title:m(d)("common.title")},null,8,["title"]),q("div",Fe,[t(g,{ref_key:"form",ref:o},{default:l(()=>[t(T,{inset:""},{default:l(()=>[t(P,{modelValue:i.username,"onUpdate:modelValue":u[0]||(u[0]=V=>i.username=V),placeholder:m(d)("common.user_field_username"),rules:r.username},{default:l(()=>[M(h.$slots,"left-icon",{},()=>[t(k,null,{default:l(()=>[t(m(C),{icon:"ion:person-outline"})]),_:1})])]),_:3},8,["modelValue","placeholder","rules"]),t(P,{modelValue:i.password,"onUpdate:modelValue":u[2]||(u[2]=V=>i.password=V),placeholder:m(d)("common.user_field_password"),rules:r.password,type:m(_)?"password":"text"},{default:l(()=>[M(h.$slots,"left-icon",{},()=>[t(k,null,{default:l(()=>[t(m(C),{icon:"ion:lock-closed-outline"})]),_:1})]),M(h.$slots,"right-icon",{},()=>[t(k,{name:m(_)?"closed-eye":"eye",onClick:u[1]||(u[1]=V=>m(n)(!m(_)))},null,8,["name"]),t(k,null,{default:l(()=>[t(m(C),{icon:"ion:lock-closed-outline"})]),_:1})])]),_:3},8,["modelValue","placeholder","rules","type"])]),_:3}),q("div",Ee,[t(e,{onClick:v,type:"primary",block:""},{default:l(()=>[D(me(m(d)("common.button_login")),1)]),_:1})]),t(w,{class:"px-4 pt-4"},{default:l(()=>[t(f,{span:"12",class:"text-left"},{default:l(()=>[t(a,null,{default:l(()=>[t(m(Se)),t(m(Be)),t(m($e))]),_:1})]),_:1}),t(f,{span:"12",class:"text-right"},{default:l(()=>[t(e,{size:"small"},{default:l(()=>[D("忘记密码")]),_:1}),t(e,{size:"small"},{default:l(()=>[D("注册")]),_:1})]),_:1})]),_:1})]),_:3},512)])])}}});export{Oe as default};
