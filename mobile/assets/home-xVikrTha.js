var X=(e,g,s)=>new Promise((u,i)=>{var t=n=>{try{c(s.next(n))}catch(l){i(l)}},p=n=>{try{c(s.throw(n))}catch(l){i(l)}},c=n=>n.done?u(n.value):Promise.resolve(n.value).then(t,p);c((s=s.apply(e,g)).next())});import{M as ee,R as j,T as ue,S as O,d as L,j as P,f as te,aE as ze,N as Pe,O as b,a2 as ae,ad as B,b7 as Ae,b8 as Re,b9 as Ee,g as Y,ba as Me,bb as he,bc as Ne,bd as De,af as ge,a as r,aX as fe,ae as pe,be as z,a3 as Oe,aB as G,W as ne,U as We,bf as Le,bg as Ve,bh as Xe,G as U,aW as de,bi as je,ag as He,l as we,u as T,o as W,q as ve,w as y,c as K,F as J,r as _e,p as Q,t as Ye,e as Z,k as qe,$ as Fe,b as oe,B as Ge,z as Ue,I as me}from"./index-NS3bFuoT.js";/* empty css              *//* empty css                                                                 *//* empty css              *//* empty css              */import{N as Ke}from"./index-tWdSW0yP.js";/* empty css              *//* empty css              *//* empty css                                                         */import{a as Je}from"./announcement-sgswn2ix.js";import{S as Qe}from"./index-MrjgNczr.js";import{I as Ze}from"./index-7_CQXwxx.js";const[be,H]=ee("swipe"),et={loop:j,width:ue,height:ue,vertical:Boolean,autoplay:O(0),duration:O(500),touchable:j,lazyRender:Boolean,initialSwipe:O(0),indicatorColor:String,showIndicators:j,stopPropagation:j},ye=Symbol(be);var tt=L({name:be,props:et,emits:["change","dragStart","dragEnd"],setup(e,{emit:g,slots:s}){const u=P(),i=P(),t=te({rect:null,width:0,height:0,offset:0,active:0,swiping:!1});let p=!1;const c=ze(),{children:n,linkChildren:l}=Pe(ye),o=b(()=>n.length),f=b(()=>t[e.vertical?"height":"width"]),v=b(()=>e.vertical?c.deltaY.value:c.deltaX.value),k=b(()=>t.rect?(e.vertical?t.rect.height:t.rect.width)-f.value*o.value:0),A=b(()=>f.value?Math.ceil(Math.abs(k.value)/f.value):o.value),S=b(()=>o.value*f.value),h=b(()=>(t.active+o.value)%o.value),I=b(()=>{const a=e.vertical?"vertical":"horizontal";return c.direction.value===a}),$=b(()=>{const a={transitionDuration:`${t.swiping?0:e.duration}ms`,transform:`translate${e.vertical?"Y":"X"}(${+t.offset.toFixed(2)}px)`};if(f.value){const m=e.vertical?"height":"width",d=e.vertical?"width":"height";a[m]=`${S.value}px`,a[d]=e[d]?`${e[d]}px`:""}return a}),q=a=>{const{active:m}=t;return a?e.loop?G(m+a,-1,o.value):G(m+a,0,A.value):m},R=(a,m=0)=>{let d=a*f.value;e.loop||(d=Math.min(d,-k.value));let _=m-d;return e.loop||(_=G(_,k.value,0)),_},x=({pace:a=0,offset:m=0,emitChange:d})=>{if(o.value<=1)return;const{active:_}=t,w=q(a),N=R(w,m);if(e.loop){if(n[0]&&N!==k.value){const F=N<k.value;n[0].setOffset(F?S.value:0)}if(n[o.value-1]&&N!==0){const F=N>0;n[o.value-1].setOffset(F?-S.value:0)}}t.active=w,t.offset=N,d&&w!==_&&g("change",h.value)},V=()=>{t.swiping=!0,t.active<=-1?x({pace:o.value}):t.active>=o.value&&x({pace:-o.value})},Se=()=>{V(),c.reset(),z(()=>{t.swiping=!1,x({pace:-1,emitChange:!0})})},ie=()=>{V(),c.reset(),z(()=>{t.swiping=!1,x({pace:1,emitChange:!0})})};let se;const E=()=>clearTimeout(se),M=()=>{E(),+e.autoplay>0&&o.value>1&&(se=setTimeout(()=>{ie(),M()},+e.autoplay))},C=(a=+e.initialSwipe)=>{if(!u.value)return;const m=()=>{var d,_;if(!fe(u)){const w={width:u.value.offsetWidth,height:u.value.offsetHeight};t.rect=w,t.width=+((d=e.width)!=null?d:w.width),t.height=+((_=e.height)!=null?_:w.height)}o.value&&(a=Math.min(o.value-1,a),a===-1&&(a=o.value-1)),t.active=a,t.swiping=!0,t.offset=R(a),n.forEach(w=>{w.setOffset(0)}),M()};fe(u)?pe().then(m):m()},le=()=>C(t.active);let ce;const Te=a=>{!e.touchable||a.touches.length>1||(c.start(a),p=!1,ce=Date.now(),E(),V())},Ie=a=>{e.touchable&&t.swiping&&(c.move(a),I.value&&(!e.loop&&(t.active===0&&v.value>0||t.active===o.value-1&&v.value<0)||(Oe(a,e.stopPropagation),x({offset:v.value}),p||(g("dragStart",{index:h.value}),p=!0))))},re=()=>{if(!e.touchable||!t.swiping)return;const a=Date.now()-ce,m=v.value/a;if((Math.abs(m)>.25||Math.abs(v.value)>f.value/2)&&I.value){const _=e.vertical?c.offsetY.value:c.offsetX.value;let w=0;e.loop?w=_>0?v.value>0?-1:1:0:w=-Math[v.value>0?"ceil":"floor"](v.value/f.value),x({pace:w,emitChange:!0})}else v.value&&x({pace:0});p=!1,t.swiping=!1,g("dragEnd",{index:h.value}),M()},$e=(a,m={})=>{V(),c.reset(),z(()=>{let d;e.loop&&a===o.value?d=t.active===0?0:a:d=a%o.value,m.immediate?z(()=>{t.swiping=!1}):t.swiping=!1,x({pace:d-t.active,emitChange:!0})})},Ce=(a,m)=>{const d=m===h.value,_=d?{backgroundColor:e.indicatorColor}:void 0;return r("i",{style:_,class:H("indicator",{active:d})},null)},Be=()=>{if(s.indicator)return s.indicator({active:h.value,total:o.value});if(e.showIndicators&&o.value>1)return r("div",{class:H("indicators",{vertical:e.vertical})},[Array(o.value).fill("").map(Ce)])};return ae({prev:Se,next:ie,state:t,resize:le,swipeTo:$e}),l({size:f,props:e,count:o,activeIndicator:h}),B(()=>e.initialSwipe,a=>C(+a)),B(o,()=>C(t.active)),B(()=>e.autoplay,M),B([Ae,Re,()=>e.width,()=>e.height],le),B(Ee(),a=>{a==="visible"?M():E()}),Y(C),Me(()=>C(t.active)),he(()=>C(t.active)),Ne(E),De(E),ge("touchmove",Ie,{target:i}),()=>{var a;return r("div",{ref:u,class:H()},[r("div",{ref:i,style:$.value,class:H("track",{vertical:e.vertical}),onTouchstartPassive:Te,onTouchend:re,onTouchcancel:re},[(a=s.default)==null?void 0:a.call(s)]),Be()])}}});const xe=ne(tt),[at,nt]=ee("swipe-item");var ot=L({name:at,setup(e,{slots:g}){let s;const u=te({offset:0,inited:!1,mounted:!1}),{parent:i,index:t}=We(ye);if(!i)return;const p=b(()=>{const l={},{vertical:o}=i.props;return i.size.value&&(l[o?"height":"width"]=`${i.size.value}px`),u.offset&&(l.transform=`translate${o?"Y":"X"}(${u.offset}px)`),l}),c=b(()=>{const{loop:l,lazyRender:o}=i.props;if(!o||s)return!0;if(!u.mounted)return!1;const f=i.activeIndicator.value,v=i.count.value-1,k=f===0&&l?v:f-1,A=f===v&&l?0:f+1;return s=t.value===f||t.value===k||t.value===A,s}),n=l=>{u.offset=l};return Y(()=>{pe(()=>{u.mounted=!0})}),ae({setOffset:n}),()=>{var l;return r("div",{class:nt(),style:p.value},[c.value?(l=g.default)==null?void 0:l.call(g):null])}}});const ke=ne(ot),[it,D]=ee("notice-bar"),st={text:String,mode:String,color:String,delay:O(1),speed:O(60),leftIcon:String,wrapable:Boolean,background:String,scrollable:{type:Boolean,default:null}};var lt=L({name:it,props:st,emits:["close","replay"],setup(e,{emit:g,slots:s}){let u=0,i=0,t;const p=P(),c=P(),n=te({show:!0,offset:0,duration:0}),l=()=>{if(s["left-icon"])return s["left-icon"]();if(e.leftIcon)return r(U,{class:D("left-icon"),name:e.leftIcon},null)},o=()=>{if(e.mode==="closeable")return"cross";if(e.mode==="link")return"arrow"},f=h=>{e.mode==="closeable"&&(n.show=!1,g("close",h))},v=()=>{if(s["right-icon"])return s["right-icon"]();const h=o();if(h)return r(U,{name:h,class:D("right-icon"),onClick:f},null)},k=()=>{n.offset=u,n.duration=0,je(()=>{z(()=>{n.offset=-i,n.duration=(i+u)/+e.speed,g("replay")})})},A=()=>{const h=e.scrollable===!1&&!e.wrapable,I={transform:n.offset?`translateX(${n.offset}px)`:"",transitionDuration:`${n.duration}s`};return r("div",{ref:p,role:"marquee",class:D("wrap")},[r("div",{ref:c,style:I,class:[D("content"),{"van-ellipsis":h}],onTransitionend:k},[s.default?s.default():e.text])])},S=()=>{const{delay:h,speed:I,scrollable:$}=e,q=He(h)?+h*1e3:0;u=0,i=0,n.offset=0,n.duration=0,clearTimeout(t),t=setTimeout(()=>{if(!p.value||!c.value||$===!1)return;const R=de(p).width,x=de(c).width;($||x>R)&&z(()=>{u=R,i=x,n.offset=-i,n.duration=i/+I})},q)};return he(S),Le(S),ge("pageshow",S),ae({reset:S}),B(()=>[e.text,e.scrollable],S),()=>{const{color:h,wrapable:I,background:$}=e;return Ve(r("div",{role:"alert",class:D({wrapable:I}),style:{color:h,background:$}},[l(),A(),v()]),[[Xe,n.show]])}}});const ct=ne(lt),rt="/platform-ui/mobile/assets/1-fvrEzqkz.jpeg",ut="/platform-ui/mobile/assets/2-618k9u0N.jpeg",ft="/platform-ui/mobile/assets/3-NtupH7hi.jpeg",dt="/platform-ui/mobile/assets/4-3IcpmMV0.jpeg",vt=L({__name:"announcement-new",setup(e){const g=P(!1),s=P([]),u=()=>X(this,null,function*(){const i=yield Je({page:1,size:5});i.code=="200"&&(s.value=i.data.content,g.value=s.value.length&&s.value.length>0)});return Y(()=>X(this,null,function*(){we("Component <<AnnouncementNew>> mounted."),u().then()})),(i,t)=>{const p=ke,c=xe,n=ct;return T(g)?(W(),ve(n,{key:0,"left-icon":"volume-o",scrollable:!1,mode:"link",onClick:t[0]||(t[0]=l=>T(Z).push({path:"/announcement/index"}))},{default:y(()=>[r(c,{class:"custom-swipe",vertical:"",autoplay:3e3,touchable:!1,"show-indicators":!1},{default:y(()=>[(W(!0),K(J,null,_e(T(s),l=>(W(),ve(p,{key:l.id},{default:y(()=>[Q(Ye(l.title),1)]),_:2},1024))),128))]),_:1})]),_:1})):qe("",!0)}}}),mt=()=>Fe("/api/v1/home"),ht=oe("div",{class:"app-divider"},null,-1),gt=oe("div",{class:"divider"},null,-1),pt={class:"m-8 text-center"},Pt=L({__name:"home",setup(e){const g=b(()=>Ue.app.getTitle()),s=[{id:1,img:rt},{id:2,img:ut},{id:3,img:ft},{id:4,img:dt}];return Y(()=>X(this,null,function*(){we("Page <<HomePage>> mounted."),mt().then()})),(u,i)=>{const t=U,p=Ke,c=Qe,n=Ze,l=ke,o=xe,f=Ge;return W(),K(J,null,[r(c,null,{default:y(()=>[r(p,{fixed:!0,placeholder:!0,title:T(g)},{left:y(()=>[r(t,{size:"24",onClick:i[0]||(i[0]=v=>T(Z).push({path:"/notifications/index"}))},{default:y(()=>[r(T(me),{icon:"mdi:bell-outline"})]),_:1})]),right:y(()=>[r(t,{size:"24",onClick:i[1]||(i[1]=v=>T(Z).push({path:"/tabs/me"}))},{default:y(()=>[r(T(me),{icon:"mdi:account-circle-outline"})]),_:1})]),_:1},8,["title"])]),_:1}),r(T(vt)),ht,r(o,{class:"mx-4",autoplay:3e3,"lazy-render":"","show-indicators":!1},{default:y(()=>[(W(),K(J,null,_e(s,v=>r(l,{class:"aspect-[16/9] w-full",key:v.id},{default:y(()=>[r(n,{fit:"fill",position:"top",class:"aspect-[16/9] w-full",radius:5,alt:"IMG",src:v.img},null,8,["src"])]),_:2},1024)),64))]),_:1}),gt,oe("div",pt,[r(f,{type:"primary",to:"/login"},{default:y(()=>[Q("Login")]),_:1}),r(f,{type:"primary",to:"/announcement/index"},{default:y(()=>[Q("Announcement")]),_:1})])],64)}}});export{Pt as default};
