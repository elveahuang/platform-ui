import{c as o,d as a,r,S as e,B as l,T as s,U as i,V as n,X as t,Y as d,K as c,Z as u,f as v,n as g,t as f,_ as h,$ as m,a0 as p,a1 as b,O as w,w as y}from"./index-09966b71.js";const[S,z]=o("image");const x=y(a({name:S,props:{src:String,alt:String,fit:String,position:String,round:Boolean,block:Boolean,width:g,height:g,radius:g,lazyLoad:Boolean,iconSize:g,showError:f,errorIcon:h("photo-fail"),iconPrefix:String,showLoading:f,loadingIcon:h("photo")},emits:["load","error"],setup(o,{emit:a,slots:g}){const f=r(!1),h=r(!0),y=r(),{$Lazyload:S}=e().proxy,x=l((()=>{const a={width:s(o.width),height:s(o.height)};return i(o.radius)&&(a.overflow="hidden",a.borderRadius=s(o.radius)),a}));n((()=>o.src),(()=>{f.value=!1,h.value=!0}));const L=o=>{h.value&&(h.value=!1,a("load",o))},$=()=>{const o=new Event("load");Object.defineProperty(o,"target",{value:y.value,enumerable:!0}),L(o)},I=o=>{f.value=!0,h.value=!1,a("error",o)},P=(a,r,e)=>e?e():v(w,{name:a,size:o.iconSize,class:r,classPrefix:o.iconPrefix},null),j=()=>{if(f.value||!o.src)return;const a={alt:o.alt,class:z("img"),style:{objectFit:o.fit,objectPosition:o.position}};return o.lazyLoad?m(v("img",b({ref:y},a),null),[[p("lazy"),o.src]]):v("img",b({ref:y,src:o.src,onLoad:L,onError:I},a),null)},B=({el:o})=>{const a=()=>{o===y.value&&h.value&&$()};y.value?a():u(a)},E=({el:o})=>{o!==y.value||f.value||I()};return S&&t&&(S.$on("loaded",B),S.$on("error",E),d((()=>{S.$off("loaded",B),S.$off("error",E)}))),c((()=>{u((()=>{var o;(null==(o=y.value)?void 0:o.complete)&&$()}))})),()=>{var a;return v("div",{class:z({round:o.round,block:o.block}),style:x.value},[j(),h.value&&o.showLoading?v("div",{class:z("loading")},[P(o.loadingIcon,z("loading-icon"),g.loading)]):f.value&&o.showError?v("div",{class:z("error")},[P(o.errorIcon,z("error-icon"),g.error)]):void 0,null==(a=g.default)?void 0:a.call(g)])}}})),L="/platform-ui-vue/mobile/assets/logo-bc5de347.png";export{x as I,L as l};
