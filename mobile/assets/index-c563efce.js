var A=(m,d,o)=>new Promise((r,f)=>{var e=u=>{try{p(o.next(u))}catch(c){f(c)}},t=u=>{try{p(o.throw(u))}catch(c){f(c)}},p=u=>u.done?r(u.value):Promise.resolve(u.value).then(e,t);p((o=o.apply(m,d)).next())});import{c as H,d as S,u as J,e as Q,f as s,n as W,t as R,p as Y,F as X,w as Z,r as x,l as ee,o as $,g as B,h as i,i as V,j as v,k as F,m as E,q as D,s as te,P as N,v as G,x as ne,y as oe,z as U,A as se,B as ae,D as le,E as re,G as ue,H as ie,I as ce,J as q,K as M,L as me,M as P,N as O,O as de,Q as pe}from"./index-23bfd250.js";import{F as _e,C as fe,R as ve}from"./index-79b26a09.js";import{B as I,S as ge}from"./index-5b8c020b.js";import{C as he}from"./index-9824c02a.js";/* empty css              *//* empty css              */import"./index-fc223220.js";import{I as ye,l as we}from"./logo-6f6fcf65.js";import{N as Ve}from"./index-47355bfe.js";import{P as z,u as ke}from"./index-268c3c34.js";import{_ as be}from"./plugin-vueexport-helper-c27b6911.js";const[Se,xe]=H("form"),Ce={colon:Boolean,disabled:Boolean,readonly:Boolean,showError:Boolean,labelWidth:W,labelAlign:String,inputAlign:String,scrollToError:Boolean,validateFirst:Boolean,submitOnEnter:R,showErrorMessage:R,errorMessageAlign:String,validateTrigger:{type:[String,Array],default:"onBlur"}};var Pe=S({name:Se,props:Ce,emits:["submit","failed"],setup(m,{emit:d,slots:o}){const{children:r,linkChildren:f}=J(X),e=n=>n?r.filter(a=>n.includes(a.name)):r,t=n=>new Promise((a,_)=>{const h=[];e(n).reduce((y,K)=>y.then(()=>{if(!h.length)return K.validate().then(L=>{L&&h.push(L)})}),Promise.resolve()).then(()=>{h.length?_(h):a()})}),p=n=>new Promise((a,_)=>{const h=e(n);Promise.all(h.map(g=>g.validate())).then(g=>{g=g.filter(Boolean),g.length?_(g):a()})}),u=n=>{const a=r.find(_=>_.name===n);return a?new Promise((_,h)=>{a.validate().then(g=>{g?h(g):_()})}):Promise.reject()},c=n=>typeof n=="string"?u(n):m.validateFirst?t(n):p(n),l=n=>{typeof n=="string"&&(n=[n]),e(n).forEach(_=>{_.resetValidation()})},T=()=>r.reduce((n,a)=>(n[a.name]=a.getValidationStatus(),n),{}),C=(n,a)=>{r.some(_=>_.name===n?(_.$el.scrollIntoView(a),!0):!1)},w=()=>r.reduce((n,a)=>(a.name!==void 0&&(n[a.name]=a.formValue.value),n),{}),k=()=>{const n=w();c().then(()=>d("submit",n)).catch(a=>{d("failed",{values:n,errors:a}),m.scrollToError&&a[0].name&&C(a[0].name)})},b=n=>{Y(n),k()};return f({props:m}),Q({submit:k,validate:c,getValues:w,scrollToField:C,resetValidation:l,getValidationStatus:T}),()=>{var n;return s("form",{class:xe(),onSubmit:b},[(n=o.default)==null?void 0:n.call(o)])}}});const $e=Z(Pe),Be=S({__name:"locale-selector",setup(m){const{changeLocale:d}=ke(),o=x(!1),r=ee.map(e=>({text:e.title,value:e.locale})),f=e=>{E(e),D(e.selectedValues)&&d(te(e.selectedValues[0])),o.value=!1};return(e,t)=>{const p=I,u=z,c=N;return $(),B(F,null,[s(p,{plain:"",hairline:"",square:"",type:"primary",size:"small",onClick:t[0]||(t[0]=l=>o.value=!o.value)},{default:i(()=>[V("语言")]),_:1}),s(c,{show:o.value,"onUpdate:show":t[2]||(t[2]=l=>o.value=l),round:"",position:"bottom"},{default:i(()=>[s(u,{columns:v(r),onConfirm:f,onCancel:t[1]||(t[1]=l=>o.value=!1)},null,8,["columns"])]),_:1},8,["show"])],64)}}}),Fe=S({__name:"dark-selector",setup(m){const d=G(),o=x(!1),r=ne.map(e=>({text:e.title,value:e.strategy})),f=e=>{if(E(e),o.value=!1,D(e.selectedValues)){const t=oe(e.selectedValues[0]);d.setDarkStrategy(t),d.setDark(U(t)),se(U(t))}};return(e,t)=>{const p=I,u=z,c=N;return $(),B(F,null,[s(p,{plain:"",hairline:"",type:"primary",size:"small",onClick:t[0]||(t[0]=l=>o.value=!o.value)},{default:i(()=>[V("深色模式")]),_:1}),s(c,{show:o.value,"onUpdate:show":t[2]||(t[2]=l=>o.value=l),round:"",position:"bottom"},{default:i(()=>[s(u,{columns:v(r),onConfirm:f,onCancel:t[1]||(t[1]=l=>o.value=!1)},null,8,["columns"])]),_:1},8,["show"])],64)}}}),Ee=S({__name:"theme-selector",setup(m){const d=G();ae(()=>d.theme);const o=x(!1),r=le.map(e=>({text:e.title,value:e.theme})),f=e=>{E(e),o.value=!1,D(e.selectedValues)&&d.setTheme(re(e.selectedValues[0]))};return(e,t)=>{const p=I,u=z,c=N;return $(),B(F,null,[s(p,{plain:"",hairline:"",type:"primary",size:"small",onClick:t[0]||(t[0]=l=>o.value=!o.value)},{default:i(()=>[V("主题")]),_:1}),s(c,{show:o.value,"onUpdate:show":t[2]||(t[2]=l=>o.value=l),round:"",position:"bottom"},{default:i(()=>[s(u,{columns:v(r),onConfirm:f,onCancel:t[1]||(t[1]=l=>o.value=!1)},null,8,["columns"])]),_:1},8,["show"])],64)}}});function j(m){return typeof m=="function"?m():v(m)}function Ie(m=!1,d={}){const{truthyValue:o=!0,falsyValue:r=!1}=d,f=ue(m),e=x(m);function t(p){if(arguments.length)return e.value=p,e.value;{const u=j(o);return e.value=e.value===u?j(r):u,e.value}}return f?t:[e,t]}const Te={id:"entry-page",class:"entry-page"},Ae={class:"entry-page-logo"},De={id:"entry-page-content"},Ne={class:"my-2"},ze=S({__name:"index",setup(m){const d=ie(),o=ce(),[r,f]=Ie(!1),e=x(),t=q({grant_type:"password",client_id:M.auth.oauth.clientId,client_secret:M.auth.oauth.clientSecret,username:"admin",password:"admin"}),p=q({username:[{required:!0,message:"Please input username"}],password:[{required:!0,message:"Please input password"}]}),u=c=>A(this,null,function*(){try{yield c.validate(),d.login(t).then(()=>{o.push("/")})}catch(l){return}});return me(()=>A(this,null,function*(){E("Page - <Login> is mounted.")})),(c,l)=>{const T=Ve,C=ye,w=pe,k=_e,b=I,n=he,a=ge,_=fe,h=ve,g=$e;return $(),B(F,null,[s(T,{title:c.$t("common.title")},null,8,["title"]),P("div",Te,[P("div",Ae,[s(C,{fit:"contain",src:v(we),alt:"Logo"},null,8,["src"])]),P("div",De,[s(g,{ref_key:"form",ref:e},{default:i(()=>[s(n,{inset:""},{default:i(()=>[s(k,{modelValue:t.username,"onUpdate:modelValue":l[0]||(l[0]=y=>t.username=y),placeholder:c.$t("common.user_field_username"),rules:p.username},{"left-icon":i(()=>[s(w,null,{default:i(()=>[s(v(O),{icon:"ion:person-outline"})]),_:1})]),_:1},8,["modelValue","placeholder","rules"]),s(k,{modelValue:t.password,"onUpdate:modelValue":l[2]||(l[2]=y=>t.password=y),placeholder:c.$t("common.user_field_password"),rules:p.password,type:v(r)?"password":"text"},{"left-icon":i(()=>[s(w,null,{default:i(()=>[s(v(O),{icon:"ion:lock-closed-outline"})]),_:1})]),"right-icon":i(()=>[s(w,{name:v(r)?"closed-eye":"eye",onClick:l[1]||(l[1]=y=>v(f)(!v(r)))},null,8,["name"])]),_:1},8,["modelValue","placeholder","rules","type"]),P("div",Ne,[s(b,{onClick:l[3]||(l[3]=y=>u(e.value)),type:"primary",block:""},{default:i(()=>[V(de(c.$t("common.button_login")),1)]),_:1})])]),_:1}),s(h,{class:"px-4 pt-4"},{default:i(()=>[s(_,{span:"12",class:"text-left"},{default:i(()=>[s(a,null,{default:i(()=>[s(v(Be)),s(v(Fe)),s(v(Ee))]),_:1})]),_:1}),s(_,{span:"12",class:"text-right"},{default:i(()=>[s(b,{type:"text",size:"small"},{default:i(()=>[V("忘记密码")]),_:1}),s(b,{type:"text",size:"small"},{default:i(()=>[V("注册")]),_:1})]),_:1})]),_:1})]),_:1},512)])])],64)}}});const We=be(ze,[["__scopeId","data-v-405be74f"]]);export{We as default};
