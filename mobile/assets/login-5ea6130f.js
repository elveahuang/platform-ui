var b=(p,d,s)=>new Promise((c,_)=>{var n=r=>{try{u(s.next(r))}catch(v){_(v)}},o=r=>{try{u(s.throw(r))}catch(v){_(v)}},u=r=>r.done?c(r.value):Promise.resolve(r.value).then(n,o);u((s=s.apply(p,d)).next())});import{e as O,d as S,J as K,K as Y,b as t,n as j,L,q as J,M as Q,x as X,r as y,N as Z,a as $,y as x,w as a,E as m,O as P,F as U,P as A,Q as H,R as T,S as D,T as ee,U as te,V as ne,W as oe,G as se,X as le,Y as ae,Z as re,D as q,o as ie,l as ue,A as z,_ as M,$ as N,B as ce,a0 as me}from"./index-0f416af7.js";import{F as de,C as pe,R as _e}from"./index-3299fdaa.js";import{B as F,S as fe}from"./index-e2426476.js";/* empty css              *//* empty css              */import{C as ve}from"./index-3b62710c.js";import"./index-8de3a282.js";import{N as ge}from"./index-7293abd7.js";/* empty css                                                                 *//* empty css              *//* empty css              */import{P as I,u as he,a as we,b as ye}from"./useTheme-87c22684.js";import"./use-route-056924fe.js";import"./use-placeholder-ff5c9bd9.js";const[ke,be]=O("form"),Ve={colon:Boolean,disabled:Boolean,readonly:Boolean,required:[Boolean,String],showError:Boolean,labelWidth:j,labelAlign:String,inputAlign:String,scrollToError:Boolean,validateFirst:Boolean,submitOnEnter:L,showErrorMessage:L,errorMessageAlign:String,validateTrigger:{type:[String,Array],default:"onBlur"}};var Pe=S({name:ke,props:Ve,emits:["submit","failed"],setup(p,{emit:d,slots:s}){const{children:c,linkChildren:_}=K(Q),n=e=>e?c.filter(l=>e.includes(l.name)):c,o=e=>new Promise((l,f)=>{const w=[];n(e).reduce((V,W)=>V.then(()=>{if(!w.length)return W.validate().then(R=>{R&&w.push(R)})}),Promise.resolve()).then(()=>{w.length?f(w):l()})}),u=e=>new Promise((l,f)=>{const w=n(e);Promise.all(w.map(g=>g.validate())).then(g=>{g=g.filter(Boolean),g.length?f(g):l()})}),r=e=>{const l=c.find(f=>f.name===e);return l?new Promise((f,w)=>{l.validate().then(g=>{g?w(g):f()})}):Promise.reject()},v=e=>typeof e=="string"?r(e):p.validateFirst?o(e):u(e),h=e=>{typeof e=="string"&&(e=[e]),n(e).forEach(f=>{f.resetValidation()})},i=()=>c.reduce((e,l)=>(e[l.name]=l.getValidationStatus(),e),{}),B=(e,l)=>{c.some(f=>f.name===e?(f.$el.scrollIntoView(l),!0):!1)},k=()=>c.reduce((e,l)=>(l.name!==void 0&&(e[l.name]=l.formValue.value),e),{}),C=()=>{const e=k();v().then(()=>d("submit",e)).catch(l=>{d("failed",{values:e,errors:l}),p.scrollToError&&l[0].name&&B(l[0].name)})},E=e=>{J(e),C()};return _({props:p}),Y({submit:C,validate:v,getValues:k,scrollToField:B,resetValidation:h,getValidationStatus:i}),()=>{var e;return t("form",{class:be(),onSubmit:E},[(e=s.default)==null?void 0:e.call(s)])}}});const Ce=X(Pe),Se=S({__name:"DarkModePicker",setup(p){const{setDarkMode:d}=he(),s=y(!1),c=y(Z.map(n=>({text:n.title,value:n.mode}))),_=n=>b(this,null,function*(){if(s.value=!1,A(n.selectedValues)){const o=H(n.selectedValues[0]);yield d(o).then()}});return(n,o)=>{const u=T,r=F,v=I,h=D;return $(),x(U,null,[t(r,{plain:"",hairline:"",type:"primary",size:"small",onClick:o[0]||(o[0]=i=>s.value=!0)},{icon:a(()=>[t(u,null,{default:a(()=>[t(m(P),{icon:"line-md:light-dark-loop"})]),_:1})]),_:1}),t(h,{show:s.value,"onUpdate:show":o[2]||(o[2]=i=>s.value=i),round:"",position:"bottom"},{default:a(()=>[t(v,{columns:c.value,onConfirm:_,onCancel:o[1]||(o[1]=i=>s.value=!1)},null,8,["columns"])]),_:1},8,["show"])],64)}}}),Be=S({__name:"LocalePicker",setup(p){const{setLocale:d}=we(),s=y(!1),c=y(ee.map(n=>({text:n.title,value:n.locale}))),_=n=>b(this,null,function*(){s.value=!1,A(n.selectedValues)&&(yield d(te(n.selectedValues[0])).then())});return(n,o)=>{const u=T,r=F,v=I,h=D;return $(),x(U,null,[t(r,{plain:"",hairline:"",type:"primary",size:"small",onClick:o[0]||(o[0]=i=>s.value=!0)},{icon:a(()=>[t(u,null,{default:a(()=>[t(m(P),{icon:"mdi:translate"})]),_:1})]),_:1}),t(h,{show:s.value,"onUpdate:show":o[2]||(o[2]=i=>s.value=i),round:"",position:"bottom"},{default:a(()=>[t(v,{columns:c.value,onConfirm:_,onCancel:o[1]||(o[1]=i=>s.value=!1)},null,8,["columns"])]),_:1},8,["show"])],64)}}}),$e=S({__name:"ThemePicker",setup(p){const{setTheme:d}=ye(),s=y(!1),c=y(ne.map(n=>({text:n.title,value:n.theme}))),_=n=>b(this,null,function*(){s.value=!1,A(n.selectedValues)&&(yield d(oe(n.selectedValues[0])).then())});return(n,o)=>{const u=T,r=F,v=I,h=D;return $(),x(U,null,[t(r,{plain:"",hairline:"",type:"primary",size:"small",onClick:o[0]||(o[0]=i=>s.value=!0)},{icon:a(()=>[t(u,null,{default:a(()=>[t(m(P),{icon:"ant-design:skin-outlined"})]),_:1})]),_:1}),t(h,{show:s.value,"onUpdate:show":o[2]||(o[2]=i=>s.value=i),round:"",position:"bottom"},{default:a(()=>[t(v,{columns:c.value,onConfirm:_,onCancel:o[1]||(o[1]=i=>s.value=!1)},null,8,["columns"])]),_:1},8,["show"])],64)}}});function G(p){return typeof p=="function"?p():m(p)}typeof WorkerGlobalScope!="undefined"&&globalThis instanceof WorkerGlobalScope;function xe(p=!1,d={}){const{truthyValue:s=!0,falsyValue:c=!1}=d,_=se(p),n=y(p);function o(u){if(arguments.length)return n.value=u,n.value;{const r=G(s);return n.value=n.value===r?G(c):r,n.value}}return _?o:[n,o]}const Te={class:"mt-6"},Fe={class:"m-4"},Ye=S({__name:"login",setup(p){const{t:d}=le(),s=ae(),c=re(),[_,n]=xe(!1),o=y(),u=q(me),r=q({username:[{required:!0,message:"Please input username"}],password:[{required:!0,message:"Please input password"}]}),v=()=>b(this,null,function*(){yield o.value.validate(),s.login(u).then(()=>b(this,null,function*(){yield s.getUserInfo().then(),c.push("/").then()}))});return ie(()=>b(this,null,function*(){ue("Page <<Login>> mounted.")})),(h,i)=>{const B=ge,k=T,C=de,E=ve,e=F,l=fe,f=pe,w=_e,g=Ce;return $(),x("div",null,[t(B,{title:m(d)("common.title")},null,8,["title"]),z("div",Te,[t(g,{ref_key:"form",ref:o},{default:a(()=>[t(E,{inset:""},{default:a(()=>[t(C,{modelValue:u.username,"onUpdate:modelValue":i[0]||(i[0]=V=>u.username=V),placeholder:m(d)("common.user_field_username"),rules:r.username},{default:a(()=>[M(h.$slots,"left-icon",{},()=>[t(k,null,{default:a(()=>[t(m(P),{icon:"ion:person-outline"})]),_:1})])]),_:3},8,["modelValue","placeholder","rules"]),t(C,{modelValue:u.password,"onUpdate:modelValue":i[2]||(i[2]=V=>u.password=V),placeholder:m(d)("common.user_field_password"),rules:r.password,type:m(_)?"password":"text"},{default:a(()=>[M(h.$slots,"left-icon",{},()=>[t(k,null,{default:a(()=>[t(m(P),{icon:"ion:lock-closed-outline"})]),_:1})]),M(h.$slots,"right-icon",{},()=>[t(k,{name:m(_)?"closed-eye":"eye",onClick:i[1]||(i[1]=V=>m(n)(!m(_)))},null,8,["name"]),t(k,null,{default:a(()=>[t(m(P),{icon:"ion:lock-closed-outline"})]),_:1})])]),_:3},8,["modelValue","placeholder","rules","type"])]),_:3}),z("div",Fe,[t(e,{onClick:v,type:"primary",block:""},{default:a(()=>[N(ce(m(d)("common.button_login")),1)]),_:1})]),t(w,{class:"px-4 pt-4"},{default:a(()=>[t(f,{span:"12",class:"text-left"},{default:a(()=>[t(l,null,{default:a(()=>[t(m(Be)),t(m(Se)),t(m($e))]),_:1})]),_:1}),t(f,{span:"12",class:"text-right"},{default:a(()=>[t(e,{size:"small"},{default:a(()=>[N("忘记密码")]),_:1}),t(e,{size:"small"},{default:a(()=>[N("注册")]),_:1})]),_:1})]),_:1})]),_:3},512)])])}}});export{Ye as default};
