var Y=(e,g,s)=>new Promise((u,o)=>{var t=n=>{try{l(s.next(n))}catch(c){o(c)}},p=n=>{try{l(s.throw(n))}catch(c){o(c)}},l=n=>n.done?u(n.value):Promise.resolve(n.value).then(t,p);l((s=s.apply(e,g)).next())});import{S as ee,V as H,a3 as ue,T as N,d as W,k as L,f as te,a4 as Be,af as ze,C as y,Y as ae,G as P,as as Ae,at as De,au as Ee,g as j,av as Re,aw as he,ax as Me,ay as Ne,Z as ge,h as r,a0 as fe,_ as pe,az as B,a5 as Oe,aA as G,a2 as ne,ao as Le,aB as We,aC as Ve,aD as Ye,n as K,$ as de,aE as He,aF as Xe,l as _e,o as O,a as ve,w as b,F as U,u as I,t as je,x as Z,r as we,c as J,e as Q,aG as Fe,b as ie,B as qe,y as Ge,I as me}from"./index-hOuKt5nr.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              */import{N as Ke}from"./index-aDi0rZAG.js";/* empty css              *//* empty css                                                         */import{a as Ue}from"./announcement-C0zJKX43.js";import{S as Ze}from"./index-Fxrxjz_s.js";import{I as Je}from"./index-lItlQb4d.js";const[ye,X]=ee("swipe"),Qe={loop:H,width:ue,height:ue,vertical:Boolean,autoplay:N(0),duration:N(500),touchable:H,lazyRender:Boolean,initialSwipe:N(0),indicatorColor:String,showIndicators:H,stopPropagation:H},be=Symbol(ye);var et=W({name:ye,props:Qe,emits:["change","dragStart","dragEnd"],setup(e,{emit:g,slots:s}){const u=L(),o=L(),t=te({rect:null,width:0,height:0,offset:0,active:0,swiping:!1});let p=!1;const l=Be(),{children:n,linkChildren:c}=ze(be),i=y(()=>n.length),f=y(()=>t[e.vertical?"height":"width"]),v=y(()=>e.vertical?l.deltaY.value:l.deltaX.value),k=y(()=>t.rect?(e.vertical?t.rect.height:t.rect.width)-f.value*i.value:0),z=y(()=>f.value?Math.ceil(Math.abs(k.value)/f.value):i.value),S=y(()=>i.value*f.value),h=y(()=>(t.active+i.value)%i.value),T=y(()=>{const a=e.vertical?"vertical":"horizontal";return l.direction.value===a}),C=y(()=>{const a={transitionDuration:`${t.swiping?0:e.duration}ms`,transform:`translate${e.vertical?"Y":"X"}(${+t.offset.toFixed(2)}px)`};if(f.value){const m=e.vertical?"height":"width",d=e.vertical?"width":"height";a[m]=`${S.value}px`,a[d]=e[d]?`${e[d]}px`:""}return a}),F=a=>{const{active:m}=t;return a?e.loop?G(m+a,-1,i.value):G(m+a,0,z.value):m},A=(a,m=0)=>{let d=a*f.value;e.loop||(d=Math.min(d,-k.value));let w=m-d;return e.loop||(w=G(w,k.value,0)),w},x=({pace:a=0,offset:m=0,emitChange:d})=>{if(i.value<=1)return;const{active:w}=t,_=F(a),R=A(_,m);if(e.loop){if(n[0]&&R!==k.value){const q=R<k.value;n[0].setOffset(q?S.value:0)}if(n[i.value-1]&&R!==0){const q=R>0;n[i.value-1].setOffset(q?-S.value:0)}}t.active=_,t.offset=R,d&&_!==w&&g("change",h.value)},V=()=>{t.swiping=!0,t.active<=-1?x({pace:i.value}):t.active>=i.value&&x({pace:-i.value})},Se=()=>{V(),l.reset(),B(()=>{t.swiping=!1,x({pace:-1,emitChange:!0})})},oe=()=>{V(),l.reset(),B(()=>{t.swiping=!1,x({pace:1,emitChange:!0})})};let se;const D=()=>clearTimeout(se),E=()=>{D(),+e.autoplay>0&&i.value>1&&(se=setTimeout(()=>{oe(),E()},+e.autoplay))},$=(a=+e.initialSwipe)=>{if(!u.value)return;const m=()=>{var d,w;if(!fe(u)){const _={width:u.value.offsetWidth,height:u.value.offsetHeight};t.rect=_,t.width=+((d=e.width)!=null?d:_.width),t.height=+((w=e.height)!=null?w:_.height)}i.value&&(a=Math.min(i.value-1,a),a===-1&&(a=i.value-1)),t.active=a,t.swiping=!0,t.offset=A(a),n.forEach(_=>{_.setOffset(0)}),E()};fe(u)?pe().then(m):m()},le=()=>$(t.active);let ce;const Te=a=>{!e.touchable||a.touches.length>1||(l.start(a),p=!1,ce=Date.now(),D(),V())},Ie=a=>{e.touchable&&t.swiping&&(l.move(a),T.value&&(!e.loop&&(t.active===0&&v.value>0||t.active===i.value-1&&v.value<0)||(Oe(a,e.stopPropagation),x({offset:v.value}),p||(g("dragStart",{index:h.value}),p=!0))))},re=()=>{if(!e.touchable||!t.swiping)return;const a=Date.now()-ce,m=v.value/a;if((Math.abs(m)>.25||Math.abs(v.value)>f.value/2)&&T.value){const w=e.vertical?l.offsetY.value:l.offsetX.value;let _=0;e.loop?_=w>0?v.value>0?-1:1:0:_=-Math[v.value>0?"ceil":"floor"](v.value/f.value),x({pace:_,emitChange:!0})}else v.value&&x({pace:0});p=!1,t.swiping=!1,g("dragEnd",{index:h.value}),E()},Ce=(a,m={})=>{V(),l.reset(),B(()=>{let d;e.loop&&a===i.value?d=t.active===0?0:a:d=a%i.value,m.immediate?B(()=>{t.swiping=!1}):t.swiping=!1,x({pace:d-t.active,emitChange:!0})})},$e=(a,m)=>{const d=m===h.value,w=d?{backgroundColor:e.indicatorColor}:void 0;return r("i",{style:w,class:X("indicator",{active:d})},null)},Pe=()=>{if(s.indicator)return s.indicator({active:h.value,total:i.value});if(e.showIndicators&&i.value>1)return r("div",{class:X("indicators",{vertical:e.vertical})},[Array(i.value).fill("").map($e)])};return ae({prev:Se,next:oe,state:t,resize:le,swipeTo:Ce}),c({size:f,props:e,count:i,activeIndicator:h}),P(()=>e.initialSwipe,a=>$(+a)),P(i,()=>$(t.active)),P(()=>e.autoplay,E),P([Ae,De,()=>e.width,()=>e.height],le),P(Ee(),a=>{a==="visible"?E():D()}),j($),Re(()=>$(t.active)),he(()=>$(t.active)),Me(D),Ne(D),ge("touchmove",Ie,{target:o}),()=>{var a;return r("div",{ref:u,class:X()},[r("div",{ref:o,style:C.value,class:X("track",{vertical:e.vertical}),onTouchstartPassive:Te,onTouchend:re,onTouchcancel:re},[(a=s.default)==null?void 0:a.call(s)]),Pe()])}}});const xe=ne(et),[tt,at]=ee("swipe-item");var nt=W({name:tt,setup(e,{slots:g}){let s;const u=te({offset:0,inited:!1,mounted:!1}),{parent:o,index:t}=Le(be);if(!o)return;const p=y(()=>{const c={},{vertical:i}=o.props;return o.size.value&&(c[i?"height":"width"]=`${o.size.value}px`),u.offset&&(c.transform=`translate${i?"Y":"X"}(${u.offset}px)`),c}),l=y(()=>{const{loop:c,lazyRender:i}=o.props;if(!i||s)return!0;if(!u.mounted)return!1;const f=o.activeIndicator.value,v=o.count.value-1,k=f===0&&c?v:f-1,z=f===v&&c?0:f+1;return s=t.value===f||t.value===k||t.value===z,s}),n=c=>{u.offset=c};return j(()=>{pe(()=>{u.mounted=!0})}),ae({setOffset:n}),()=>{var c;return r("div",{class:at(),style:p.value},[l.value?(c=g.default)==null?void 0:c.call(g):null])}}});const ke=ne(nt),[it,M]=ee("notice-bar"),ot={text:String,mode:String,color:String,delay:N(1),speed:N(60),leftIcon:String,wrapable:Boolean,background:String,scrollable:{type:Boolean,default:null}};var st=W({name:it,props:ot,emits:["close","replay"],setup(e,{emit:g,slots:s}){let u=0,o=0,t;const p=L(),l=L(),n=te({show:!0,offset:0,duration:0}),c=()=>{if(s["left-icon"])return s["left-icon"]();if(e.leftIcon)return r(K,{class:M("left-icon"),name:e.leftIcon},null)},i=()=>{if(e.mode==="closeable")return"cross";if(e.mode==="link")return"arrow"},f=h=>{e.mode==="closeable"&&(n.show=!1,g("close",h))},v=()=>{if(s["right-icon"])return s["right-icon"]();const h=i();if(h)return r(K,{name:h,class:M("right-icon"),onClick:f},null)},k=()=>{n.offset=u,n.duration=0,He(()=>{B(()=>{n.offset=-o,n.duration=(o+u)/+e.speed,g("replay")})})},z=()=>{const h=e.scrollable===!1&&!e.wrapable,T={transform:n.offset?`translateX(${n.offset}px)`:"",transitionDuration:`${n.duration}s`};return r("div",{ref:p,role:"marquee",class:M("wrap")},[r("div",{ref:l,style:T,class:[M("content"),{"van-ellipsis":h}],onTransitionend:k},[s.default?s.default():e.text])])},S=()=>{const{delay:h,speed:T,scrollable:C}=e,F=Xe(h)?+h*1e3:0;u=0,o=0,n.offset=0,n.duration=0,clearTimeout(t),t=setTimeout(()=>{if(!p.value||!l.value||C===!1)return;const A=de(p).width,x=de(l).width;(C||x>A)&&B(()=>{u=A,o=x,n.offset=-o,n.duration=o/+T})},F)};return he(S),We(S),ge("pageshow",S),ae({reset:S}),P(()=>[e.text,e.scrollable],S),()=>{const{color:h,wrapable:T,background:C}=e;return Ve(r("div",{role:"alert",class:M({wrapable:T}),style:{color:h,background:C}},[c(),z(),v()]),[[Ye,n.show]])}}});const lt=ne(st),ct="/platform-ui/mobile/assets/1-fvrEzqkz.jpeg",rt="/platform-ui/mobile/assets/2-618k9u0N.jpeg",ut="/platform-ui/mobile/assets/3-NtupH7hi.jpeg",ft="/platform-ui/mobile/assets/4-3IcpmMV0.jpeg",dt=W({__name:"announcement-new",setup(e){const g=L([]),s=()=>Y(this,null,function*(){yield Ue({page:1,size:5}).then(o=>{g.value=o.data.content})}),u=()=>{Q.push({path:"/announcement/index"})};return j(()=>Y(this,null,function*(){_e("Page <<AnnouncementDetailsPage>> mounted."),s().then()})),(o,t)=>{const p=ke,l=xe,n=lt;return O(),ve(n,{"left-icon":"volume-o",scrollable:!1,mode:"link",onClick:u},{default:b(()=>[r(l,{class:"custom-swipe",vertical:"",autoplay:3e3,touchable:!1,"show-indicators":!1},{default:b(()=>[(O(!0),J(U,null,we(I(g),c=>(O(),ve(p,{key:c.id},{default:b(()=>[Z(je(c.title),1)]),_:2},1024))),128))]),_:1})]),_:1})}}}),vt=()=>Fe("/api/v1/home"),mt=ie("div",{class:"app-divider"},null,-1),ht=ie("div",{class:"divider"},null,-1),gt={class:"m-8 text-center"},Bt=W({__name:"home",setup(e){const g=y(()=>Ge.app.getTitle()),s=[{id:1,img:ct},{id:2,img:rt},{id:3,img:ut},{id:4,img:ft}];return j(()=>Y(this,null,function*(){_e("Page <<HomePage>> mounted."),vt().then()})),(u,o)=>{const t=K,p=Ke,l=Ze,n=Je,c=ke,i=xe,f=qe;return O(),J(U,null,[r(l,null,{default:b(()=>[r(p,{fixed:!0,placeholder:!0,title:I(g)},{left:b(()=>[r(t,{size:"24",onClick:o[0]||(o[0]=v=>I(Q).push({path:"/notifications/index"}))},{default:b(()=>[r(I(me),{icon:"mdi:bell-outline"})]),_:1})]),right:b(()=>[r(t,{size:"24",onClick:o[1]||(o[1]=v=>I(Q).push({path:"/tabs/me"}))},{default:b(()=>[r(I(me),{icon:"mdi:account-circle-outline"})]),_:1})]),_:1},8,["title"])]),_:1}),r(I(dt)),mt,r(i,{class:"mx-4",autoplay:3e3,"lazy-render":"","show-indicators":!1},{default:b(()=>[(O(),J(U,null,we(s,v=>r(c,{class:"aspect-[16/9] w-full",key:v.id},{default:b(()=>[r(n,{fit:"fill",position:"top",class:"aspect-[16/9] w-full",radius:5,alt:"IMG",src:v.img},null,8,["src"])]),_:2},1024)),64))]),_:1}),ht,ie("div",gt,[r(f,{type:"primary",to:"/login"},{default:b(()=>[Z("Login")]),_:1}),r(f,{type:"primary",to:"/announcement/index"},{default:b(()=>[Z("Announcement")]),_:1})])],64)}}});export{Bt as default};
