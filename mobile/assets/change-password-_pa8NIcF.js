var g=(c,o,l)=>new Promise((m,_)=>{var u=a=>{try{e(l.next(a))}catch(t){_(t)}},p=a=>{try{e(l.throw(a))}catch(t){_(t)}},e=a=>a.done?m(a.value):Promise.resolve(a.value).then(u,p);e((l=l.apply(c,o)).next())});import{d as C,J as B,P as N,r as S,D as f,o as F,l as U,a as $,y as q,b as r,w as d,A as n,B as v,K as x,L,F as M,M as P,N as A,C as D,R as G,G as T}from"./index-q8XU2Mr1.js";/* empty css              *//* empty css                                                                 *//* empty css              *//* empty css              */import{F as E,a as I}from"./index-7MvT2Ux3.js";/* empty css              */import{N as J}from"./index-v8FGRVtz.js";import{d as K}from"./user-iaA9ZuOB.js";/* empty css              */import{u as R,_ as j}from"./index-kxllyAw0.js";import{S as z}from"./index-FLW9CrLW.js";import{C as H}from"./index-wck77BQg.js";import"./index-5pOybRyb.js";const O=v("div",{class:"app-divider"},null,-1),Q={class:"m-4"},po=C({__name:"change-password",setup(c){const{t:o}=B(),{logout:l}=N(),[m,_]=R(!1),u=S(),p=f({originalPassword:[{required:!0,message:o("common.user_field_original_password_validation")}],newPassword:[{required:!0,message:o("common.user_field_new_password_validation")}],confirmPassword:[{required:!0,message:o("common.user_field_confirm_password_validation")}]}),e=f({originalPassword:"",newPassword:""}),a=()=>{const t={originalPassword:e.originalPassword,newPassword:e.newPassword};K(t).then(s=>{s.code==200?P({message:o("common.user_pages_change_password_success")},()=>{l().then(()=>{D.push(G.app.getLogoutSuccessUrl())})}):P({message:o("common.user_pages_change_password_fail")})})};return F(()=>g(this,null,function*(){U("Page <<ChangePasswordPage>> mounted.")})),(t,s)=>{const h=J,y=z,w=E,k=H,V=A,b=I;return $(),q(M,null,[r(y,null,{default:d(()=>[r(h,{title:t.$t("common.user_pages_change_password_title"),"left-arrow":"",onClickLeft:s[0]||(s[0]=i=>n(T)())},null,8,["title"])]),_:1}),O,r(b,{ref_key:"form",ref:u,onSubmit:a},{default:d(()=>[r(k,{inset:""},{default:d(()=>[r(w,{modelValue:e.originalPassword,"onUpdate:modelValue":s[1]||(s[1]=i=>e.originalPassword=i),type:"password",placeholder:n(o)("common.user_field_original_password_placeholder"),rules:p.originalPassword},null,8,["modelValue","placeholder","rules"]),r(w,{modelValue:e.newPassword,"onUpdate:modelValue":s[3]||(s[3]=i=>e.newPassword=i),type:"password",placeholder:n(o)("common.user_field_new_password_placeholder"),rules:p.newPassword},{"right-icon":d(()=>[r(n(j),{onClick:s[2]||(s[2]=i=>n(_)(!n(m))),icon:n(m)?"mdi:eye-off-outline":"mdi:eye-outline"},null,8,["icon"])]),_:1},8,["modelValue","placeholder","rules"])]),_:1}),v("div",Q,[r(V,{block:"",type:"primary","native-type":"submit"},{default:d(()=>[x(L(n(o)("common.button_submit")),1)]),_:1})])]),_:1},512)],64)}}});export{po as default};
