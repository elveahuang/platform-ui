var R=Object.defineProperty;var O=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var k=(t,e,n)=>e in t?R(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,A=(t,e)=>{for(var n in e||(e={}))I.call(e,n)&&k(t,n,e[n]);if(O)for(var n of O(e))K.call(e,n)&&k(t,n,e[n]);return t};var a=(t,e,n)=>new Promise((o,i)=>{var u=s=>{try{r(n.next(s))}catch(l){i(l)}},c=s=>{try{r(n.throw(s))}catch(l){i(l)}},r=s=>s.done?o(s.value):Promise.resolve(s.value).then(u,c);r((n=n.apply(t,e)).next())});import{z as E,d as f,A as U,g as w,r as P,B as M,C,D as g,E as N,L as V,o as S,l as m,G as b,a as p,c as v,H as _,I as $,J as j,K as z,M as T,T as D,N as G,O as J,u as h,P as Q,F as q,Q as Z,R as W,S as X,U as Y,V as ee,b as y}from"./index-wZZqDCRF.js";import{S as te,y as ne,E as oe}from"./index.min-Br8SVaFv.js";const se=["undo","redo","brush","eraser","|","heading","font-family","font-size","|","bold","italic","underline","strike","link","code","subscript","superscript","hr","todo","emoji","|","highlight","font-color","|","align","line-height","|","bullet-list","ordered-list","indent-decrease","indent-increase","break","|","quote","code-block","table"],ie=()=>se,ae={element:"",content:"",toolbarKeys:ie()},re=t=>E(ae,t),ce={content:"",extensions:[te]},le=(t={})=>E(ce,t),ue={class:"editor"},de=f({__name:"AiEditor",props:{options:{type:Object,default(){return{}}},value:{type:String,default:""}},emits:["update:value"],setup(t,{emit:e}){const n=e,o=t,{locale:i}=U(),u=w(()=>i),c=P(),r=w(()=>o.value),s=M(),l=d=>a(this,null,function*(){const x={element:c.value,content:r.value,onChange:H=>{n("update:value",H.getHtml())}};s.value=new ne(re(E(x,d)))}),F=()=>a(this,null,function*(){g(s.value)||s.value.destroy()});return C(r,d=>{!g(s.value)&&!N(s.value.getHtml(),d)&&(s.value.clear(),s.value.focus().insert(d))}),C(u,d=>{s.value.changeLang(d===V.ZH_CN?"zh":"en")}),S(()=>a(this,null,function*(){m("Component <<AiEditor>> mounted."),yield l(o.options).then()})),b(()=>a(this,null,function*(){m("Component <<AiEditor>> onBeforeUnmount."),yield F().then()})),(d,x)=>(p(),v("div",ue,[_("div",{class:"ai-editor",ref_key:"editorRef",ref:c},null,512)]))}});function B(t){return G((e,n)=>({get(){return e(),t},set(o){t=o,requestAnimationFrame(()=>{requestAnimationFrame(()=>{n()})})}}))}class L extends oe{constructor(e={}){return super(e),this.vueRenderers=$(new Map),this.contentComponent=null,this.reactiveState=B(this.view.state),this.reactiveExtensionStorage=B(this.extensionStorage),this.on("transaction",()=>{this.reactiveState.value=this.view.state,this.reactiveExtensionStorage.value=this.extensionStorage}),j(this)}get state(){return this.reactiveState?this.reactiveState.value:this.view.state}get storage(){return this.reactiveExtensionStorage?this.reactiveExtensionStorage.value:super.storage}registerPlugin(e,n){super.registerPlugin(e,n),this.reactiveState.value=this.view.state}unregisterPlugin(e){super.unregisterPlugin(e),this.reactiveState.value=this.view.state}}const pe=f({name:"EditorContent",props:{editor:{default:null,type:Object}},setup(t){const e=P(),n=Q();return z(()=>{const o=t.editor;o&&o.options.element&&e.value&&J(()=>{if(!e.value||!o.options.element.firstChild)return;const i=h(e.value);e.value.append(...o.options.element.childNodes),o.contentComponent=n.ctx._,o.setOptions({element:i}),o.createNodeViews()})}),b(()=>{const o=t.editor;if(!o||(o.isDestroyed||o.view.setProps({nodeViews:{}}),o.contentComponent=null,!o.options.element.firstChild))return;const i=document.createElement("div");i.append(...o.options.element.childNodes),o.setOptions({element:i})}),{rootEl:e}},render(){const t=[];return this.editor&&this.editor.vueRenderers.forEach(e=>{const n=T(D,{to:e.teleportElement,key:e.id},T(e.component,A({ref:e.id},e.props)));t.push(n)}),T("div",{ref:e=>{this.rootEl=e}},...t)}}),me={class:"editor-menu"},ve=f({__name:"TipTapMenu",props:{editor:{type:L,default:null}},setup(t){const e=t,n=$([{icon:"bold",title:"Bold",action:()=>e.editor.chain().focus().toggleBold().run(),isActive:()=>e.editor.isActive("bold")},{icon:"italic",title:"Italic",action:()=>e.editor.chain().focus().toggleItalic().run(),isActive:()=>e.editor.isActive("italic")}]),o=()=>a(this,null,function*(){});return S(()=>a(this,null,function*(){m("Component <<TipTapEditor>> mounted."),yield o().then()})),(i,u)=>(p(),v("div",me,[_("div",null,[(p(!0),v(q,null,Z(n,(c,r)=>(p(),W(h(he),X(Y({key:r},c)),null,16))),128))])]))}}),he=f({__name:"TipTapMenuItem",props:{icon:{type:String,required:!0},title:{type:String,required:!0},action:{type:Function,required:!0,default:()=>{}},isActive:{type:Function,default:()=>{}}},setup(t){return(e,n)=>(p(),v("a",null,ee(t.title),1))}}),fe={class:"editor"},ge=f({__name:"TipTapEditor",props:{options:{type:Object,default(){return{}}},value:{type:String,default:""}},emits:["update:value"],setup(t,{emit:e}){const n=e,o=t,i=M(),u=w(()=>o.value),c=s=>a(this,null,function*(){const l={content:u.value,onUpdate:()=>{n("update:value",i.value.getHTML())}};i.value=new L(le(E(l,s)))}),r=()=>a(this,null,function*(){g(i.value)||i.value.destroy()});return C(u,s=>{!g(i.value)&&!N(i.value.getHTML(),s)&&i.value.setOptions({content:s})}),S(()=>a(this,null,function*(){m("Component <<TipTapEditor>> onMounted."),yield c(o.options).then()})),b(()=>a(this,null,function*(){m("Component <<TipTapEditor>> onBeforeUnmount."),yield r().then()})),(s,l)=>(p(),v("div",fe,[y(h(ve)),y(h(pe),{editor:i.value},null,8,["editor"])]))}}),_e={class:"m-6"},ye={class:"m-6"},we=f({__name:"editor",setup(t){return S(()=>a(this,null,function*(){m("Page <<ShowCaseSliderPage>> mounted.")})),(e,n)=>(p(),v(q,null,[_("div",_e,[y(h(de))]),_("div",ye,[y(h(ge))])],64))}});export{we as default};
