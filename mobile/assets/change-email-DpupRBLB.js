var _=(h,o,r)=>new Promise((m,a)=>{var p=l=>{try{s(r.next(l))}catch(i){a(i)}},u=l=>{try{s(r.throw(l))}catch(i){a(i)}},s=l=>l.done?m(l.value):Promise.resolve(l.value).then(p,u);s((r=r.apply(h,o)).next())});import{d as E,af as k,r as B,ab as f,o as P,l as F,aH as N,aB as K,a as S,c as U,b as t,w as c,F as q,H as w,am as g,aa as x,u as e,ad as A,ah as H,ai as I,al as M}from"./index-Dy6tiO9n.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import{F as $,a as j}from"./index-7KaJsaoI.js";/* empty css              */import{N as D}from"./index-DCMQBjam.js";import{e as G}from"./user-BdFgrKv2.js";import{S as L}from"./index-BX5_ntDH.js";import{C as O}from"./index-DDEJeOor.js";import"./index--PBhRdnN.js";import"./use-id-B_nY1-6R.js";const T=w("div",{class:"app-divider"},null,-1),z={class:"m-4"},re=E({__name:"change-email",setup(h){const{t:o}=k(),r=B(),m=f({originalPassword:[{required:!0,message:o("common.user_field_original_password_validation")}],newPassword:[{required:!0,message:o("common.user_field_new_password_validation")}],confirmPassword:[{required:!0,message:o("common.user_field_confirm_password_validation")}]}),a=f({email:"",password:"",newEmail:"",captchaKey:"",captchaValue:""}),p=s=>_(this,null,function*(){a.captchaKey=s}),u=()=>{const s={email:a.email,password:a.password,newEmail:a.newEmail,captchaKey:a.captchaKey,captchaValue:a.captchaValue};G(s).then(l=>{l.code==200?g({message:o("common.user_pages_change_email_success")},()=>{x.push({path:"/me"})}):g({message:o("common.user_pages_change_email_fail")})})};return P(()=>_(this,null,function*(){F("Page <<ChangePasswordPage>> mounted."),N().then(s=>{Object.assign(a,s.data)})})),(s,l)=>{const i=D,b=L,d=j,V=K("app-mail-captcha"),v=O,y=M,C=$;return S(),U(q,null,[t(b,null,{default:c(()=>[t(i,{title:s.$t("common.user_pages_change_email_title"),"left-arrow":"",onClickLeft:l[0]||(l[0]=n=>e(A)())},null,8,["title"])]),_:1}),T,t(C,{ref_key:"form",ref:r,onSubmit:u},{default:c(()=>[t(v,{inset:""},{default:c(()=>[t(d,{modelValue:e(a).email,"onUpdate:modelValue":l[1]||(l[1]=n=>e(a).email=n),label:e(o)("common.user_field_current_email"),border:"","label-width":"4em","label-align":"right",readonly:"",placeholder:e(a).email,rules:e(m).email},null,8,["modelValue","label","placeholder","rules"]),t(d,{modelValue:e(a).password,"onUpdate:modelValue":l[2]||(l[2]=n=>e(a).password=n),label:e(o)("common.user_field_password"),"label-width":"4em","label-align":"right",type:"password",placeholder:e(o)("common.user_field_password_placeholder"),rules:e(m).password},null,8,["modelValue","label","placeholder","rules"]),t(d,{modelValue:e(a).newEmail,"onUpdate:modelValue":l[3]||(l[3]=n=>e(a).newEmail=n),label:e(o)("common.user_field_new_email"),"label-width":"4em","label-align":"right",placeholder:e(o)("common.user_field_new_email_placeholder"),rules:e(m).newEmail},null,8,["modelValue","label","placeholder","rules"]),t(d,{modelValue:e(a).captchaValue,"onUpdate:modelValue":l[4]||(l[4]=n=>e(a).captchaValue=n),label:e(o)("common.field_captcha"),"label-width":"4em","label-align":"right",placeholder:e(o)("common.field_captcha_placeholder"),rules:e(m).captchaValue},{button:c(()=>[t(V,{email:e(a).newEmail,onChange:p},null,8,["email"])]),_:1},8,["modelValue","label","placeholder","rules"])]),_:1}),w("div",z,[t(y,{block:"",type:"primary","native-type":"submit"},{default:c(()=>[H(I(e(o)("common.button_submit")),1)]),_:1})])]),_:1},512)],64)}}});export{re as default};
