var S=(s,r,a)=>new Promise((u,i)=>{var l=n=>{try{t(a.next(n))}catch(h){i(h)}},d=n=>{try{t(a.throw(n))}catch(h){i(h)}},t=n=>n.done?u(n.value):Promise.resolve(n.value).then(l,d);t((a=a.apply(s,r)).next())});import{c as L,L as T,n as w,d as _,r as k,M as $,B as A,N as C,O as M,Q as R,b as c,R as U,p as q,S as F,T as I,w as G,U as Y,o as P,V as z,g as K,G as O,K as Q,D as W,E as X,f as j,h as H,W as J,i as Z}from"./index-da67061a.js";/* empty css              */import{N as ee}from"./index-06757af3.js";/* empty css              *//* empty css              *//* empty css              */import"./use-placeholder-6bc1a265.js";const[te,g,se]=L("pull-refresh"),V=50,ae=["pulling","loosing","success"],ne={disabled:Boolean,modelValue:Boolean,headHeight:T(V),successText:String,pullingText:String,loosingText:String,loadingText:String,pullDistance:w,successDuration:T(500),animationDuration:T(300)};var oe=_({name:te,props:ne,emits:["change","refresh","update:modelValue"],setup(s,{emit:r,slots:a}){let u;const i=k(),l=k(),d=$(i),t=A({status:"normal",distance:0,duration:0}),n=C(),h=()=>{if(s.headHeight!==V)return{height:`${s.headHeight}px`}},p=()=>t.status!=="loading"&&t.status!=="success"&&!s.disabled,B=e=>{const o=+(s.pullDistance||s.headHeight);return e>o&&(e<o*2?e=o+(e-o)/2:e=o*1.5+(e-o*2)/4),Math.round(e)},f=(e,o)=>{const m=+(s.pullDistance||s.headHeight);t.distance=e,o?t.status="loading":e===0?t.status="normal":e<m?t.status="pulling":t.status="loosing",r("change",{status:t.status,distance:e})},v=()=>{const{status:e}=t;return e==="normal"?"":s[`${e}Text`]||se(e)},y=()=>{const{status:e,distance:o}=t;if(a[e])return a[e]({distance:o});const m=[];return ae.includes(e)&&m.push(c("div",{class:g("text")},[v()])),e==="loading"&&m.push(c(U,{class:g("loading")},{default:v})),m},N=()=>{t.status="success",setTimeout(()=>{f(0)},+s.successDuration)},x=e=>{u=I(d.value)===0,u&&(t.duration=0,n.start(e))},b=e=>{p()&&x(e)},E=e=>{if(p()){u||x(e);const{deltaY:o}=n;n.move(e),u&&o.value>=0&&n.isVertical()&&(q(e),f(B(o.value)))}},D=()=>{u&&n.deltaY.value&&p()&&(t.duration=+s.animationDuration,t.status==="loosing"?(f(+s.headHeight,!0),r("update:modelValue",!0),F(()=>r("refresh"))):f(0))};return M(()=>s.modelValue,e=>{t.duration=+s.animationDuration,e?f(+s.headHeight,!0):a.success||s.successText?N():f(0,!1)}),R("touchmove",E,{target:l}),()=>{var e;const o={transitionDuration:`${t.duration}ms`,transform:t.distance?`translate3d(0,${t.distance}px, 0)`:""};return c("div",{ref:i,class:g()},[c("div",{ref:l,class:g("track"),style:o,onTouchstartPassive:b,onTouchend:D,onTouchcancel:D},[c("div",{class:g("head"),style:h()},[y()]),(e=a.default)==null?void 0:e.call(a)])])}}});const ue=G(oe),re=O("p",null,"刷新次数: "+Q(234),-1),ie=_({__name:"DataList",props:{refreshing:{type:Boolean,require:!0,default:!1},page:{type:Number,require:!0,default:1},size:{type:Number,require:!0,default:10}},emits:["update:refreshing","update:loading","update:finished","update:isFirstPull","update:pageCurrent","update:limit","getList"],setup(s,{emit:r}){const a=s,u=Y({get:()=>a.refreshing,set:l=>{r("update:refreshing",l)}}),i=()=>{};return(l,d)=>{const t=ue;return P(),z(t,{modelValue:u.value,"onUpdate:modelValue":d[0]||(d[0]=n=>u.value=n),"success-text":"刷新成功",onRefresh:i},{default:K(()=>[re]),_:1},8,["modelValue"])}}}),Te=_({__name:"index",setup(s){return W(()=>S(this,null,function*(){X("Page <<AnnouncementIndexPage>> mounted.")})),(r,a)=>{const u=ee;return P(),j(Z,null,[c(u,{title:"Announcement","left-arrow":"",onClickLeft:a[0]||(a[0]=i=>H(J)())}),c(H(ie))],64)}}});export{Te as default};
