var B=(e,i,t)=>new Promise((l,n)=>{var u=s=>{try{o(t.next(s))}catch(a){n(a)}},m=s=>{try{o(t.throw(s))}catch(a){n(a)}},o=s=>s.done?l(s.value):Promise.resolve(s.value).then(u,m);o((t=t.apply(e,i)).next())});import{d as O,t as C,n as _,N,e as P,r as S,O as R,h as c,k as $,x as T,j as M,ac as z,L as F,z as w,H as E,ad as D,a5 as H,B as K,X as L,ae as X,F as Y,ab as Z}from"./index-481508d7.js";import{u as q}from"./use-placeholder-d8566228.js";import{a as G}from"./constant-72a8536f.js";import{c as J}from"./interceptor-8a0884a8.js";import{r as Q,u as U}from"./use-route-33a82847.js";import{B as W,I as ee}from"./index-a37c3650.js";import"./on-popup-reopen-d118a259.js";const[A,y]=O("tabbar"),te={route:Boolean,fixed:C,border:C,zIndex:_,placeholder:Boolean,activeColor:String,beforeChange:Function,inactiveColor:String,modelValue:N(0),safeAreaInsetBottom:{type:Boolean,default:null}},V=Symbol(A);var ae=P({name:A,props:te,emits:["change","update:modelValue"],setup(e,{emit:i,slots:t}){const l=S(),{linkChildren:n}=R(V),u=q(l,y),m=()=>{var a;return(a=e.safeAreaInsetBottom)!=null?a:e.fixed},o=()=>{var a;const{fixed:r,zIndex:d,border:f}=e;return c("div",{ref:l,role:"tablist",style:$(d),class:[y({fixed:r}),{[G]:f,"van-safe-area-bottom":m()}]},[(a=t.default)==null?void 0:a.call(t)])};return n({props:e,setActive:(a,r)=>{J(e.beforeChange,{args:[a],done(){i("update:modelValue",a),i("change",a),r()}})}}),()=>e.fixed&&e.placeholder?u(o):o()}});const oe=T(ae),[ne,p]=O("tabbar-item"),re=M({},Q,{dot:Boolean,icon:String,name:_,badge:_,badgeProps:Object,iconPrefix:String});var ce=P({name:ne,props:re,emits:["click"],setup(e,{emit:i,slots:t}){const l=U(),n=z().proxy,{parent:u,index:m}=F(V);if(!u)return;const o=w(()=>{var r;const{route:d,modelValue:f}=u.props;if(d&&"$route"in n){const{$route:h}=n,{to:v}=e,b=D(v)?v:{path:v};return!!h.matched.find(I=>{const k="path"in b&&b.path===I.path,j="name"in b&&b.name===I.name;return k||j})}return((r=e.name)!=null?r:m.value)===f}),s=r=>{var d;o.value||u.setActive((d=e.name)!=null?d:m.value,l),i("click",r)},a=()=>{if(t.icon)return t.icon({active:o.value});if(e.icon)return c(ee,{name:e.icon,classPrefix:e.iconPrefix},null)};return()=>{var r;const{dot:d,badge:f}=e,{activeColor:h,inactiveColor:v}=u.props,b=o.value?h:v;return c("div",{role:"tab",class:p({active:o.value}),style:{color:b},tabindex:0,"aria-selected":o.value,onClick:s},[c(W,E({dot:d,class:p("icon"),content:f},e.badgeProps),{default:a}),c("div",{class:p("text")},[(r=t.default)==null?void 0:r.call(t,{active:o.value})])])}}});const g=T(ce);function x(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Z(e)}const ve=P({name:"Tabs",setup(){const{t:e}=H(),i=S(0);return K(()=>B(this,null,function*(){L("Component <<Tabs>> mounted.")})),()=>{let t,l,n;return c(Y,null,[c(X,null,null),c(oe,{modelValue:i.value,route:!0},{default:()=>[c(g,{replace:!0,to:"/tabs/home",icon:"home-o"},x(t=e("common.label_home"))?t:{default:()=>[t]}),c(g,{replace:!0,to:"/tabs/discover",icon:"search"},x(l=e("common.label_discover"))?l:{default:()=>[l]}),c(g,{replace:!0,to:"/tabs/me",icon:"setting-o"},x(n=e("common.label_me"))?n:{default:()=>[n]})]})])}}});export{ve as default};
