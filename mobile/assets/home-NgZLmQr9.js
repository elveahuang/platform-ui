var V=(e,g,i)=>new Promise((r,s)=>{var t=n=>{try{c(i.next(n))}catch(l){s(l)}},p=n=>{try{c(i.throw(n))}catch(l){s(l)}},c=n=>n.done?r(n.value):Promise.resolve(n.value).then(t,p);c((i=i.apply(e,g)).next())});import{e as Z,a3 as X,n as re,m as O,d as W,r as P,D as ee,u as Ae,a1 as Be,f as b,ad as te,am as A,bb as Pe,bc as ze,bd as Re,o as Y,be as Ne,bf as ve,bg as De,bh as Ee,i as me,b as u,b1 as ue,an as he,bi as B,q as Me,v as K,x as ae,a4 as Oe,bj as Le,bk as We,bl as He,X as U,k as fe,bm as Ve,ao as Xe,l as ge,A as I,a as L,c as de,w as x,y as G,F as J,z as pe,K as Q,L as je,C as _e,H as Ye,a9 as qe,B as ne,N as Fe,R as Ke,U as Ue}from"./index-q8XU2Mr1.js";/* empty css              *//* empty css                                                                 *//* empty css              *//* empty css              */import{N as Ge}from"./index-v8FGRVtz.js";/* empty css                                                          */import{a as Je}from"./announcement-N7br0tam.js";/* empty css              *//* empty css              */import{S as Qe}from"./index-FLW9CrLW.js";import{I as Ze}from"./index-pmpXI4Gj.js";const[we,j]=Z("swipe"),et={loop:X,width:re,height:re,vertical:Boolean,autoplay:O(0),duration:O(500),touchable:X,lazyRender:Boolean,initialSwipe:O(0),indicatorColor:String,showIndicators:X,stopPropagation:X},be=Symbol(we);var tt=W({name:we,props:et,emits:["change","dragStart","dragEnd"],setup(e,{emit:g,slots:i}){const r=P(),s=P(),t=ee({rect:null,width:0,height:0,offset:0,active:0,swiping:!1});let p=!1;const c=Ae(),{children:n,linkChildren:l}=Be(be),o=b(()=>n.length),f=b(()=>t[e.vertical?"height":"width"]),m=b(()=>e.vertical?c.deltaY.value:c.deltaX.value),k=b(()=>t.rect?(e.vertical?t.rect.height:t.rect.width)-f.value*o.value:0),z=b(()=>f.value?Math.ceil(Math.abs(k.value)/f.value):o.value),S=b(()=>o.value*f.value),h=b(()=>(t.active+o.value)%o.value),T=b(()=>{const a=e.vertical?"vertical":"horizontal";return c.direction.value===a}),C=b(()=>{const a={transitionDuration:`${t.swiping?0:e.duration}ms`,transform:`translate${e.vertical?"Y":"X"}(${+t.offset.toFixed(2)}px)`};if(f.value){const v=e.vertical?"height":"width",d=e.vertical?"width":"height";a[v]=`${S.value}px`,a[d]=e[d]?`${e[d]}px`:""}return a}),q=a=>{const{active:v}=t;return a?e.loop?K(v+a,-1,o.value):K(v+a,0,z.value):v},R=(a,v=0)=>{let d=a*f.value;e.loop||(d=Math.min(d,-k.value));let w=v-d;return e.loop||(w=K(w,k.value,0)),w},y=({pace:a=0,offset:v=0,emitChange:d})=>{if(o.value<=1)return;const{active:w}=t,_=q(a),E=R(_,v);if(e.loop){if(n[0]&&E!==k.value){const F=E<k.value;n[0].setOffset(F?S.value:0)}if(n[o.value-1]&&E!==0){const F=E>0;n[o.value-1].setOffset(F?-S.value:0)}}t.active=_,t.offset=E,d&&_!==w&&g("change",h.value)},H=()=>{t.swiping=!0,t.active<=-1?y({pace:o.value}):t.active>=o.value&&y({pace:-o.value})},ke=()=>{H(),c.reset(),B(()=>{t.swiping=!1,y({pace:-1,emitChange:!0})})},oe=()=>{H(),c.reset(),B(()=>{t.swiping=!1,y({pace:1,emitChange:!0})})};let ie;const N=()=>clearTimeout(ie),D=()=>{N(),+e.autoplay>0&&o.value>1&&(ie=setTimeout(()=>{oe(),D()},+e.autoplay))},$=(a=+e.initialSwipe)=>{if(!r.value)return;const v=()=>{var d,w;if(!ue(r)){const _={width:r.value.offsetWidth,height:r.value.offsetHeight};t.rect=_,t.width=+((d=e.width)!=null?d:_.width),t.height=+((w=e.height)!=null?w:_.height)}o.value&&(a=Math.min(o.value-1,a),a===-1&&(a=o.value-1)),t.active=a,t.swiping=!0,t.offset=R(a),n.forEach(_=>{_.setOffset(0)}),D()};ue(r)?he().then(v):v()},se=()=>$(t.active);let le;const Se=a=>{!e.touchable||a.touches.length>1||(c.start(a),p=!1,le=Date.now(),N(),H())},Te=a=>{e.touchable&&t.swiping&&(c.move(a),T.value&&(!e.loop&&(t.active===0&&m.value>0||t.active===o.value-1&&m.value<0)||(Me(a,e.stopPropagation),y({offset:m.value}),p||(g("dragStart",{index:h.value}),p=!0))))},ce=()=>{if(!e.touchable||!t.swiping)return;const a=Date.now()-le,v=m.value/a;if((Math.abs(v)>.25||Math.abs(m.value)>f.value/2)&&T.value){const w=e.vertical?c.offsetY.value:c.offsetX.value;let _=0;e.loop?_=w>0?m.value>0?-1:1:0:_=-Math[m.value>0?"ceil":"floor"](m.value/f.value),y({pace:_,emitChange:!0})}else m.value&&y({pace:0});p=!1,t.swiping=!1,g("dragEnd",{index:h.value}),D()},Ie=(a,v={})=>{H(),c.reset(),B(()=>{let d;e.loop&&a===o.value?d=t.active===0?0:a:d=a%o.value,v.immediate?B(()=>{t.swiping=!1}):t.swiping=!1,y({pace:d-t.active,emitChange:!0})})},Ce=(a,v)=>{const d=v===h.value,w=d?{backgroundColor:e.indicatorColor}:void 0;return u("i",{style:w,class:j("indicator",{active:d})},null)},$e=()=>{if(i.indicator)return i.indicator({active:h.value,total:o.value});if(e.showIndicators&&o.value>1)return u("div",{class:j("indicators",{vertical:e.vertical})},[Array(o.value).fill("").map(Ce)])};return te({prev:ke,next:oe,state:t,resize:se,swipeTo:Ie}),l({size:f,props:e,count:o,activeIndicator:h}),A(()=>e.initialSwipe,a=>$(+a)),A(o,()=>$(t.active)),A(()=>e.autoplay,D),A([Pe,ze,()=>e.width,()=>e.height],se),A(Re(),a=>{a==="visible"?D():N()}),Y($),Ne(()=>$(t.active)),ve(()=>$(t.active)),De(N),Ee(N),me("touchmove",Te,{target:s}),()=>{var a;return u("div",{ref:r,class:j()},[u("div",{ref:s,style:C.value,class:j("track",{vertical:e.vertical}),onTouchstartPassive:Se,onTouchend:ce,onTouchcancel:ce},[(a=i.default)==null?void 0:a.call(i)]),$e()])}}});const ye=ae(tt),[at,nt]=Z("swipe-item");var ot=W({name:at,setup(e,{slots:g}){let i;const r=ee({offset:0,inited:!1,mounted:!1}),{parent:s,index:t}=Oe(be);if(!s)return;const p=b(()=>{const l={},{vertical:o}=s.props;return s.size.value&&(l[o?"height":"width"]=`${s.size.value}px`),r.offset&&(l.transform=`translate${o?"Y":"X"}(${r.offset}px)`),l}),c=b(()=>{const{loop:l,lazyRender:o}=s.props;if(!o||i)return!0;if(!r.mounted)return!1;const f=s.activeIndicator.value,m=s.count.value-1,k=f===0&&l?m:f-1,z=f===m&&l?0:f+1;return i=t.value===f||t.value===k||t.value===z,i}),n=l=>{r.offset=l};return Y(()=>{he(()=>{r.mounted=!0})}),te({setOffset:n}),()=>{var l;return u("div",{class:nt(),style:p.value},[c.value?(l=g.default)==null?void 0:l.call(g):null])}}});const xe=ae(ot),[it,M]=Z("notice-bar"),st={text:String,mode:String,color:String,delay:O(1),speed:O(60),leftIcon:String,wrapable:Boolean,background:String,scrollable:{type:Boolean,default:null}};var lt=W({name:it,props:st,emits:["close","replay"],setup(e,{emit:g,slots:i}){let r=0,s=0,t;const p=P(),c=P(),n=ee({show:!0,offset:0,duration:0}),l=()=>{if(i["left-icon"])return i["left-icon"]();if(e.leftIcon)return u(U,{class:M("left-icon"),name:e.leftIcon},null)},o=()=>{if(e.mode==="closeable")return"cross";if(e.mode==="link")return"arrow"},f=h=>{e.mode==="closeable"&&(n.show=!1,g("close",h))},m=()=>{if(i["right-icon"])return i["right-icon"]();const h=o();if(h)return u(U,{name:h,class:M("right-icon"),onClick:f},null)},k=()=>{n.offset=r,n.duration=0,Ve(()=>{B(()=>{n.offset=-s,n.duration=(s+r)/+e.speed,g("replay")})})},z=()=>{const h=e.scrollable===!1&&!e.wrapable,T={transform:n.offset?`translateX(${n.offset}px)`:"",transitionDuration:`${n.duration}s`};return u("div",{ref:p,role:"marquee",class:M("wrap")},[u("div",{ref:c,style:T,class:[M("content"),{"van-ellipsis":h}],onTransitionend:k},[i.default?i.default():e.text])])},S=()=>{const{delay:h,speed:T,scrollable:C}=e,q=Xe(h)?+h*1e3:0;r=0,s=0,n.offset=0,n.duration=0,clearTimeout(t),t=setTimeout(()=>{if(!p.value||!c.value||C===!1)return;const R=fe(p).width,y=fe(c).width;(C||y>R)&&B(()=>{r=R,s=y,n.offset=-s,n.duration=s/+T})},q)};return ve(S),Le(S),me("pageshow",S),te({reset:S}),A(()=>[e.text,e.scrollable],S),()=>{const{color:h,wrapable:T,background:C}=e;return We(u("div",{role:"alert",class:M({wrapable:T}),style:{color:h,background:C}},[l(),z(),m()]),[[He,n.show]])}}});const ct=ae(lt),rt="/platform-ui/mobile/assets/1-fvrEzqkz.jpeg",ut="/platform-ui/mobile/assets/2-618k9u0N.jpeg",ft="/platform-ui/mobile/assets/3-NtupH7hi.jpeg",dt="/platform-ui/mobile/assets/4-3IcpmMV0.jpeg",vt=W({__name:"announcement-home",setup(e){const g=P(!1),i=P([]),r=()=>V(this,null,function*(){const s=yield Je({page:1,size:5});s.code=="200"&&(i.value=s.data.content,g.value=i.value.length&&i.value.length>0)});return Y(()=>V(this,null,function*(){ge("Component <<AnnouncementNew>> mounted."),r().then()})),(s,t)=>{const p=xe,c=ye,n=ct;return I(g)?(L(),de(n,{key:0,"left-icon":"volume-o",scrollable:!1,mode:"link",onClick:t[0]||(t[0]=l=>I(_e).push({path:"/announcement/index"}))},{default:x(()=>[u(c,{class:"custom-swipe",vertical:"",autoplay:3e3,touchable:!1,"show-indicators":!1},{default:x(()=>[(L(!0),G(J,null,pe(I(i),l=>(L(),de(p,{key:l.id},{default:x(()=>[Q(je(l.title),1)]),_:2},1024))),128))]),_:1})]),_:1})):Ye("",!0)}}}),mt=()=>qe("/api/v1/home"),ht=ne("div",{class:"app-divider"},null,-1),gt=ne("div",{class:"divider"},null,-1),pt={class:"m-8 text-center"},Pt=W({__name:"home",setup(e){const g=b(()=>Ke.app.getTitle()),i=[{id:1,img:rt},{id:2,img:ut},{id:3,img:ft},{id:4,img:dt}];return Y(()=>V(this,null,function*(){ge("Page <<HomePage>> mounted."),mt().then()})),(r,s)=>{const t=U,p=Ge,c=Qe,n=Ze,l=xe,o=ye,f=Fe;return L(),G(J,null,[u(c,null,{default:x(()=>[u(p,{fixed:!0,placeholder:!0,title:I(g)},{right:x(()=>[u(t,{size:"24",onClick:s[0]||(s[0]=m=>I(_e).push({path:"/notifications/index"}))},{default:x(()=>[u(I(Ue),{icon:"mdi:bell-outline"})]),_:1})]),_:1},8,["title"])]),_:1}),u(I(vt)),ht,u(o,{class:"mx-4",autoplay:3e3,"lazy-render":"","show-indicators":!1},{default:x(()=>[(L(),G(J,null,pe(i,m=>u(l,{class:"aspect-[16/9] w-full",key:m.id},{default:x(()=>[u(n,{fit:"fill",position:"top",class:"aspect-[16/9] w-full",radius:5,alt:"IMG",src:m.img},null,8,["src"])]),_:2},1024)),64))]),_:1}),gt,ne("div",pt,[u(f,{type:"primary",to:"/login"},{default:x(()=>[Q("Login")]),_:1}),u(f,{type:"primary",to:"/announcement/index"},{default:x(()=>[Q("Announcement")]),_:1})])],64)}}});export{Pt as default};
