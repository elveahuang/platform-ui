import{c as e,d as a,u as l,e as t,f as s,n,t as o,p as r,F as i,w as u,r as d,l as m,o as c,g as p,h as f,i as v,j as h,k as g,m as y,q as _,s as w,P as x,v as V,x as C,y as b,z as j,A as k,B as P,D as B,E as S,G as A,H as z,I as E,J as F,K as T,L as U,M as $,N as q,O as I}from"./index-ee91be6d.js";import{F as L,C as D,R as M}from"./index-82605620.js";import{B as N,S as O}from"./index-a4228a50.js";import{C as G}from"./index-e9e91fc4.js";/* empty css              */import"./index-5d95635c.js";import"./index-5a18e643.js";import{l as H,I as J}from"./logo-82c56d7b.js";import{N as K}from"./index-06381eea.js";import{P as R,u as W}from"./index-5f3c7859.js";import{_ as Q}from"./plugin-vueexport-helper-1b428a4d.js";const[X,Y]=e("form");const Z=u(a({name:X,props:{colon:Boolean,disabled:Boolean,readonly:Boolean,showError:Boolean,labelWidth:n,labelAlign:String,inputAlign:String,scrollToError:Boolean,validateFirst:Boolean,submitOnEnter:o,showErrorMessage:o,errorMessageAlign:String,validateTrigger:{type:[String,Array],default:"onBlur"}},emits:["submit","failed"],setup(e,{emit:a,slots:n}){const{children:o,linkChildren:u}=l(i),d=e=>e?o.filter((a=>e.includes(a.name))):o,m=a=>{return"string"==typeof a?(e=>{const a=o.find((a=>a.name===e));return a?new Promise(((e,l)=>{a.validate().then((a=>{a?l(a):e()}))})):Promise.reject()})(a):e.validateFirst?(l=a,new Promise(((e,a)=>{const t=[];d(l).reduce(((e,a)=>e.then((()=>{if(!t.length)return a.validate().then((e=>{e&&t.push(e)}))}))),Promise.resolve()).then((()=>{t.length?a(t):e()}))}))):(e=>new Promise(((a,l)=>{const t=d(e);Promise.all(t.map((e=>e.validate()))).then((e=>{(e=e.filter(Boolean)).length?l(e):a()}))})))(a);var l},c=(e,a)=>{o.some((l=>l.name===e&&(l.$el.scrollIntoView(a),!0)))},p=()=>o.reduce(((e,a)=>(void 0!==a.name&&(e[a.name]=a.formValue.value),e)),{}),f=()=>{const l=p();m().then((()=>a("submit",l))).catch((t=>{a("failed",{values:l,errors:t}),e.scrollToError&&t[0].name&&c(t[0].name)}))},v=e=>{r(e),f()};return u({props:e}),t({submit:f,validate:m,getValues:p,scrollToField:c,resetValidation:e=>{"string"==typeof e&&(e=[e]);d(e).forEach((e=>{e.resetValidation()}))},getValidationStatus:()=>o.reduce(((e,a)=>(e[a.name]=a.getValidationStatus(),e)),{})}),()=>{var e;return s("form",{class:Y(),onSubmit:v},[null==(e=n.default)?void 0:e.call(n)])}}})),ee=a({__name:"locale-selector",setup(e){const{changeLocale:a}=W(),l=d(!1),t=m.map((e=>({text:e.title,value:e.locale}))),n=e=>{y(e),_(e.selectedValues)&&a(w(e.selectedValues[0])),l.value=!1};return(e,a)=>{const o=N,r=R,i=x;return c(),p(g,null,[s(o,{plain:"",hairline:"",square:"",type:"primary",size:"small",onClick:a[0]||(a[0]=e=>l.value=!l.value)},{default:f((()=>[v("语言")])),_:1}),s(i,{show:l.value,"onUpdate:show":a[2]||(a[2]=e=>l.value=e),round:"",position:"bottom"},{default:f((()=>[s(r,{columns:h(t),onConfirm:n,onCancel:a[1]||(a[1]=e=>l.value=!1)},null,8,["columns"])])),_:1},8,["show"])],64)}}}),ae=a({__name:"dark-selector",setup(e){const a=V(),l=d(!1),t=C.map((e=>({text:e.title,value:e.strategy}))),n=e=>{if(y(e),l.value=!1,_(e.selectedValues)){const l=b(e.selectedValues[0]);a.setDarkStrategy(l),a.setDark(j(l)),k(j(l))}};return(e,a)=>{const o=N,r=R,i=x;return c(),p(g,null,[s(o,{plain:"",hairline:"",type:"primary",size:"small",onClick:a[0]||(a[0]=e=>l.value=!l.value)},{default:f((()=>[v("深色模式")])),_:1}),s(i,{show:l.value,"onUpdate:show":a[2]||(a[2]=e=>l.value=e),round:"",position:"bottom"},{default:f((()=>[s(r,{columns:h(t),onConfirm:n,onCancel:a[1]||(a[1]=e=>l.value=!1)},null,8,["columns"])])),_:1},8,["show"])],64)}}}),le=a({__name:"theme-selector",setup(e){const a=V();P((()=>a.theme));const l=d(!1),t=B.map((e=>({text:e.title,value:e.theme}))),n=e=>{y(e),l.value=!1,_(e.selectedValues)&&a.setTheme(S(e.selectedValues[0]))};return(e,a)=>{const o=N,r=R,i=x;return c(),p(g,null,[s(o,{plain:"",hairline:"",type:"primary",size:"small",onClick:a[0]||(a[0]=e=>l.value=!l.value)},{default:f((()=>[v("主题")])),_:1}),s(i,{show:l.value,"onUpdate:show":a[2]||(a[2]=e=>l.value=e),round:"",position:"bottom"},{default:f((()=>[s(r,{columns:h(t),onConfirm:n,onCancel:a[1]||(a[1]=e=>l.value=!1)},null,8,["columns"])])),_:1},8,["show"])],64)}}});var te;function se(e){return"function"==typeof e?e():h(e)}"undefined"!=typeof window&&(null==(te=null==window?void 0:window.navigator)?void 0:te.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);const ne={id:"entry-page",class:"entry-page"},oe={class:"entry-page-logo"},re={id:"entry-page-content"},ie={class:"my-2"},ue=Q(a({__name:"index",setup(e){const a=z(),l=E(),[t,n]=function(e=!1,a={}){const{truthyValue:l=!0,falsyValue:t=!1}=a,s=A(e),n=d(e);function o(e){if(arguments.length)return n.value=e,n.value;{const e=se(l);return n.value=n.value===e?se(t):e,n.value}}return s?o:[n,o]}(!1),o=d(),r=F({grant_type:"password",username:"admin",password:"admin"}),i=F({username:[{required:!0,message:"Please input username"}],password:[{required:!0,message:"Please input password"}]});return T((async()=>{y("Page - <Login> is mounted.")})),(e,u)=>{const d=K,m=J,y=I,_=L,w=N,x=G,V=O,C=D,b=M,j=Z;return c(),p(g,null,[s(d,{title:e.$t("common.title")},null,8,["title"]),U("div",ne,[U("div",oe,[s(m,{fit:"contain",src:h(H),alt:"Logo"},null,8,["src"])]),U("div",re,[s(j,{ref_key:"form",ref:o},{default:f((()=>[s(x,{inset:""},{default:f((()=>[s(_,{modelValue:r.username,"onUpdate:modelValue":u[0]||(u[0]=e=>r.username=e),placeholder:e.$t("common.user_field_username"),rules:i.username},{"left-icon":f((()=>[s(y,null,{default:f((()=>[s(h($),{icon:"ion:person-outline"})])),_:1})])),_:1},8,["modelValue","placeholder","rules"]),s(_,{modelValue:r.password,"onUpdate:modelValue":u[2]||(u[2]=e=>r.password=e),placeholder:e.$t("common.user_field_password"),rules:i.password,type:h(t)?"password":"text"},{"left-icon":f((()=>[s(y,null,{default:f((()=>[s(h($),{icon:"ion:lock-closed-outline"})])),_:1})])),"right-icon":f((()=>[s(y,{name:h(t)?"closed-eye":"eye",onClick:u[1]||(u[1]=e=>h(n)(!h(t)))},null,8,["name"])])),_:1},8,["modelValue","placeholder","rules","type"]),U("div",ie,[s(w,{onClick:u[3]||(u[3]=e=>(async e=>{try{await e.validate(),a.login(r).then((e=>{1===e.code&&l.push("/")}))}catch(t){return}})(o.value)),type:"primary",block:""},{default:f((()=>[v(q(e.$t("common.button_login")),1)])),_:1})])])),_:1}),s(b,{class:"px-4 pt-4"},{default:f((()=>[s(C,{span:"12",class:"text-left"},{default:f((()=>[s(V,null,{default:f((()=>[s(h(ee)),s(h(ae)),s(h(le))])),_:1})])),_:1}),s(C,{span:"12",class:"text-right"},{default:f((()=>[s(w,{type:"text",size:"small"},{default:f((()=>[v("忘记密码")])),_:1}),s(w,{type:"text",size:"small"},{default:f((()=>[v("注册")])),_:1})])),_:1})])),_:1})])),_:1},512)])])],64)}}}),[["__scopeId","data-v-ac7ecb59"]]);export{ue as default};
