var R=Object.defineProperty;var O=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var k=(e,t,n)=>t in e?R(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,A=(e,t)=>{for(var n in t||(t={}))D.call(t,n)&&k(e,n,t[n]);if(O)for(var n of O(t))I.call(t,n)&&k(e,n,t[n]);return e};var a=(e,t,n)=>new Promise((o,i)=>{var u=s=>{try{r(n.next(s))}catch(l){i(l)}},c=s=>{try{r(n.throw(s))}catch(l){i(l)}},r=s=>s.done?o(s.value):Promise.resolve(s.value).then(u,c);r((n=n.apply(e,t)).next())});import{z as y,d as f,A as K,g as w,r as P,B as M,C,D as g,E as N,L as U,o as S,l as m,G as b,a as p,c as v,H as _,I as $,J as V,K as j,M as T,T as z,N as G,O as J,u as h,P as Q,F as q,Q as Z,R as W,S as X,U as Y,V as tt,b as E}from"./index-Bgj8EFX7.js";import{S as et,a as nt,E as ot}from"./index.min-DX5ijrz2.js";const st=["undo","redo","brush","eraser","|","heading","font-family","font-size","|","bold","italic","underline","strike","link","code","subscript","superscript","hr","todo","emoji","|","highlight","font-color","|","align","line-height","|","bullet-list","ordered-list","indent-decrease","indent-increase","break","|","quote","code-block","table"],it=()=>st,at={element:"",content:"",toolbarKeys:it()},rt=e=>y(at,e),ct={content:"",extensions:[et]},lt=(e={})=>y(ct,e),ut={class:"editor"},dt=f({__name:"AiEditor",props:{options:{type:Object,default(){return{}}},value:{type:String,default:""}},emits:["update:value"],setup(e,{emit:t}){const n=t,o=e,{locale:i}=K(),u=w(()=>i),c=P(),r=w(()=>o.value),s=M(),l=d=>a(this,null,function*(){const x={element:c.value,content:r.value,onChange:H=>{n("update:value",H.getHtml())}};s.value=new nt(rt(y(x,d)))}),F=()=>a(this,null,function*(){g(s.value)||s.value.destroy()});return C(r,d=>{!g(s.value)&&!N(s.value.getHtml(),d)&&(s.value.clear(),s.value.focus().insert(d))}),C(u,d=>{s.value.changeLang(d===U.ZH_CN?"zh":"en")}),S(()=>a(this,null,function*(){m("Component <<AiEditor>> mounted."),yield l(o.options).then()})),b(()=>a(this,null,function*(){m("Component <<AiEditor>> onBeforeUnmount."),yield F().then()})),(d,x)=>(p(),v("div",ut,[_("div",{class:"ai-editor",ref_key:"editorRef",ref:c},null,512)]))}});function B(e){return G((t,n)=>({get(){return t(),e},set(o){e=o,requestAnimationFrame(()=>{requestAnimationFrame(()=>{n()})})}}))}class L extends ot{constructor(t={}){return super(t),this.vueRenderers=$(new Map),this.contentComponent=null,this.reactiveState=B(this.view.state),this.reactiveExtensionStorage=B(this.extensionStorage),this.on("transaction",()=>{this.reactiveState.value=this.view.state,this.reactiveExtensionStorage.value=this.extensionStorage}),V(this)}get state(){return this.reactiveState?this.reactiveState.value:this.view.state}get storage(){return this.reactiveExtensionStorage?this.reactiveExtensionStorage.value:super.storage}registerPlugin(t,n){super.registerPlugin(t,n),this.reactiveState.value=this.view.state}unregisterPlugin(t){super.unregisterPlugin(t),this.reactiveState.value=this.view.state}}const pt=f({name:"EditorContent",props:{editor:{default:null,type:Object}},setup(e){const t=P(),n=Q();return j(()=>{const o=e.editor;o&&o.options.element&&t.value&&J(()=>{if(!t.value||!o.options.element.firstChild)return;const i=h(t.value);t.value.append(...o.options.element.childNodes),o.contentComponent=n.ctx._,o.setOptions({element:i}),o.createNodeViews()})}),b(()=>{const o=e.editor;if(!o||(o.isDestroyed||o.view.setProps({nodeViews:{}}),o.contentComponent=null,!o.options.element.firstChild))return;const i=document.createElement("div");i.append(...o.options.element.childNodes),o.setOptions({element:i})}),{rootEl:t}},render(){const e=[];return this.editor&&this.editor.vueRenderers.forEach(t=>{const n=T(z,{to:t.teleportElement,key:t.id},T(t.component,A({ref:t.id},t.props)));e.push(n)}),T("div",{ref:t=>{this.rootEl=t}},...e)}}),mt={class:"editor-menu"},vt=f({__name:"TipTapMenu",props:{editor:{type:L,default:null}},setup(e){const t=e,n=$([{icon:"bold",title:"Bold",action:()=>t.editor.chain().focus().toggleBold().run(),isActive:()=>t.editor.isActive("bold")},{icon:"italic",title:"Italic",action:()=>t.editor.chain().focus().toggleItalic().run(),isActive:()=>t.editor.isActive("italic")}]),o=()=>a(this,null,function*(){});return S(()=>a(this,null,function*(){m("Component <<TipTapEditor>> mounted."),yield o().then()})),(i,u)=>(p(),v("div",mt,[_("div",null,[(p(!0),v(q,null,Z(n,(c,r)=>(p(),W(h(ht),X(Y({key:r},c)),null,16))),128))])]))}}),ht=f({__name:"TipTapMenuItem",props:{icon:{type:String,required:!0},title:{type:String,required:!0},action:{type:Function,required:!0,default:()=>{}},isActive:{type:Function,default:()=>{}}},setup(e){return(t,n)=>(p(),v("a",null,tt(e.title),1))}}),ft={class:"editor"},gt=f({__name:"TipTapEditor",props:{options:{type:Object,default(){return{}}},value:{type:String,default:""}},emits:["update:value"],setup(e,{emit:t}){const n=t,o=e,i=M(),u=w(()=>o.value),c=s=>a(this,null,function*(){const l={content:u.value,onUpdate:()=>{n("update:value",i.value.getHTML())}};i.value=new L(lt(y(l,s)))}),r=()=>a(this,null,function*(){g(i.value)||i.value.destroy()});return C(u,s=>{!g(i.value)&&!N(i.value.getHTML(),s)&&i.value.setOptions({content:s})}),S(()=>a(this,null,function*(){m("Component <<TipTapEditor>> onMounted."),yield c(o.options).then()})),b(()=>a(this,null,function*(){m("Component <<TipTapEditor>> onBeforeUnmount."),yield r().then()})),(s,l)=>(p(),v("div",ft,[E(h(vt)),E(h(pt),{editor:i.value},null,8,["editor"])]))}}),_t={class:"m-6"},Et={class:"m-6"},wt=f({__name:"editor",setup(e){return S(()=>a(this,null,function*(){m("Page <<ShowCaseSliderPage>> mounted.")})),(t,n)=>(p(),v(q,null,[_("div",_t,[E(h(dt))]),_("div",Et,[E(h(gt))])],64))}});export{wt as default};
