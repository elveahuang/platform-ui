var g=(c,e,l)=>new Promise((d,p)=>{var u=r=>{try{s(l.next(r))}catch(t){p(t)}},_=r=>{try{s(l.throw(r))}catch(t){p(t)}},s=r=>r.done?d(r.value):Promise.resolve(r.value).then(u,_);s((l=l.apply(c,e)).next())});import{d as C,af as B,an as S,r as F,ab as f,o as N,l as U,a as $,c as q,b as n,w as m,F as x,H as v,am as P,aa as L,ap as M,u as o,ad as T,ah as A,ai as D,al as E}from"./index-CtHu_7tY.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import{F as G,a as H}from"./index-58A3gDId.js";/* empty css              */import{N as I}from"./index-DTypZc4a.js";import{d as j}from"./user-YFQDEM-N.js";/* empty css              *//* empty css                                                                      */import{_ as z}from"./Icon.vue_vue_type_script_setup_true_lang-qGx30CDL.js";import{u as J}from"./index-CNkFBXhb.js";import{S as K}from"./index-BQNZxG_O.js";import{C as O}from"./index-DLJ6CZJn.js";import"./index-BM3TBy_m.js";import"./use-id-35tqSuUp.js";const Q=v("div",{class:"app-divider"},null,-1),R={class:"m-4"},wo=C({__name:"change-password",setup(c){const{t:e}=B(),{logout:l}=S(),[d,p]=J(!1),u=F(),_=f({originalPassword:[{required:!0,message:e("common.user_field_original_password_validation")}],newPassword:[{required:!0,message:e("common.user_field_new_password_validation")}],confirmPassword:[{required:!0,message:e("common.user_field_confirm_password_validation")}]}),s=f({originalPassword:"",newPassword:""}),r=()=>{const t={originalPassword:s.originalPassword,newPassword:s.newPassword};j(t).then(a=>{a.code==200?P({message:e("common.user_pages_change_password_success")},()=>{l().then(()=>{L.push(M.app.getLogoutSuccessUrl())})}):P({message:e("common.user_pages_change_password_fail")})})};return N(()=>g(this,null,function*(){U("Page <<ChangePasswordPage>> mounted.")})),(t,a)=>{const h=I,y=K,w=H,b=O,k=E,V=G;return $(),q(x,null,[n(y,null,{default:m(()=>[n(h,{title:t.$t("common.user_pages_change_password_title"),"left-arrow":"",onClickLeft:a[0]||(a[0]=i=>o(T)())},null,8,["title"])]),_:1}),Q,n(V,{ref_key:"form",ref:u,onSubmit:r},{default:m(()=>[n(b,{inset:""},{default:m(()=>[n(w,{modelValue:o(s).originalPassword,"onUpdate:modelValue":a[1]||(a[1]=i=>o(s).originalPassword=i),type:"password",placeholder:o(e)("common.user_field_original_password_placeholder"),rules:o(_).originalPassword},null,8,["modelValue","placeholder","rules"]),n(w,{modelValue:o(s).newPassword,"onUpdate:modelValue":a[3]||(a[3]=i=>o(s).newPassword=i),type:"password",placeholder:o(e)("common.user_field_new_password_placeholder"),rules:o(_).newPassword},{"right-icon":m(()=>[n(o(z),{icon:o(d)?"mdi:eye-off-outline":"mdi:eye-outline",onClick:a[2]||(a[2]=i=>o(p)(!o(d)))},null,8,["icon"])]),_:1},8,["modelValue","placeholder","rules"])]),_:1}),v("div",R,[n(k,{block:"",type:"primary","native-type":"submit"},{default:m(()=>[A(D(o(e)("common.button_submit")),1)]),_:1})])]),_:1},512)],64)}}});export{wo as default};
