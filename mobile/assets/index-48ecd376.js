import{r as we,u as Ee}from"./use-route-4571e78b.js";import{b as D,ag as ie,k as x,x as L,d as p,b0 as Te,j as f,F as O,y as N,L as Pe,q as W,az as Ve,b1 as Re,aR as Be,b2 as Me,b3 as Le,aB as $e,aT as _e,s as Ae,r as K,ak as re,e as I,O as ee,h as ze,aX as Oe,b4 as Ne,w as De,n as z,g as pe,i as We,m as Y,U as je,af as V,b5 as te,b6 as qe,Q as Fe,a6 as Ue,b7 as Ke,T as He,t as Ye}from"./index-383462be.js";import{c as Je,C as Qe}from"./index-b6760bfc.js";const[Xe,R]=D("button"),Ge=ie({},we,{tag:x("button"),text:String,icon:String,type:x("default"),size:x("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:x("button"),loadingSize:L,loadingText:String,loadingType:String,iconPosition:x("left")});var Ze=p({name:Xe,props:Ge,emits:["click"],setup(e,{emit:n,slots:a}){const m=Ee(),l=()=>a.loading?a.loading():f(Pe,{size:e.loadingSize,type:e.loadingType,class:R("loading")},null),s=()=>{if(e.loading)return l();if(a.icon)return f("div",{class:R("icon")},[a.icon()]);if(e.icon)return f(O,{name:e.icon,class:R("icon"),classPrefix:e.iconPrefix},null)},h=()=>{let o;if(e.loading?o=e.loadingText:o=a.default?a.default():e.text,o)return f("span",{class:R("text")},[o])},d=()=>{const{color:o,plain:u}=e;if(o){const k={color:u?o:"white"};return u||(k.background=o),o.includes("gradient")?k.border=0:k.borderColor=o,k}},c=o=>{e.loading?N(o):e.disabled||(n("click",o),m())};return()=>{const{tag:o,type:u,size:k,block:w,round:B,plain:j,square:T,loading:$,disabled:M,hairline:P,nativeType:q,iconPosition:E}=e,F=[R([u,k,{plain:j,block:w,round:B,square:T,loading:$,disabled:M,hairline:P}]),{[Te]:P}];return f(o,{type:q,class:F,style:d(),disabled:M,onClick:c},{default:()=>[f("div",{class:R("content")},[E==="left"&&s(),h(),E==="right"&&s()])]})}}});const kt=W(Ze);let et=0;function tt(){const e=Ve(),{name:n="unknown"}=(e==null?void 0:e.type)||{};return`${n}-${++et}`}function le(e){return Array.isArray(e)?!e.length:e===0?!1:!e}function nt(e,n){if(le(e)){if(n.required)return!1;if(n.validateEmpty===!1)return!0}return!(n.pattern&&!n.pattern.test(String(e)))}function at(e,n){return new Promise(a=>{const m=n.validator(e,n);if(Me(m)){m.then(a);return}a(m)})}function ne(e,n){const{message:a}=n;return Le(a)?a(e,n):a||""}function it({target:e}){e.composing=!0}function ae({target:e}){e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}function rt(e,n){const a=Re();e.style.height="auto";let m=e.scrollHeight;if($e(n)){const{maxHeight:l,minHeight:s}=n;l!==void 0&&(m=Math.min(m,l)),s!==void 0&&(m=Math.max(m,s))}m&&(e.style.height=`${m}px`,Be(a))}function lt(e){return e==="number"?{type:"text",inputmode:"decimal"}:e==="digit"?{type:"tel",inputmode:"numeric"}:{type:e}}function C(e){return[...e].length}function H(e,n){return[...e].slice(0,n).join("")}const[ot,y]=D("field"),st={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:L,formatter:Function,clearIcon:x("clear"),modelValue:Y(""),inputAlign:String,placeholder:String,autocomplete:String,autocapitalize:String,autocorrect:String,errorMessage:String,enterkeyhint:String,clearTrigger:x("focus"),formatTrigger:x("onChange"),spellcheck:{type:Boolean,default:null},error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null}},ct=ie({},Je,st,{rows:L,type:x("text"),rules:Array,autosize:[Boolean,Object],labelWidth:L,labelClass:_e,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var ut=p({name:ot,props:ct,emits:["blur","focus","clear","keypress","clickInput","endValidate","startValidate","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:n,slots:a}){const m=tt(),l=Ae({status:"unvalidated",focused:!1,validateMessage:""}),s=K(),h=K(),d=K(),{parent:c}=re(je),o=()=>{var t;return String((t=e.modelValue)!=null?t:"")},u=t=>{if(V(e[t]))return e[t];if(c&&V(c.props[t]))return c.props[t]},k=I(()=>{const t=u("readonly");if(e.clearable&&!t){const i=o()!=="",r=e.clearTrigger==="always"||e.clearTrigger==="focus"&&l.focused;return i&&r}return!1}),w=I(()=>d.value&&a.input?d.value():e.modelValue),B=I(()=>{var t;const i=u("required");return i==="auto"?(t=e.rules)==null?void 0:t.some(r=>r.required):i}),j=t=>t.reduce((i,r)=>i.then(()=>{if(l.status==="failed")return;let{value:g}=w;if(r.formatter&&(g=r.formatter(g,r)),!nt(g,r)){l.status="failed",l.validateMessage=ne(g,r);return}if(r.validator)return le(g)&&r.validateEmpty===!1?void 0:at(g,r).then(b=>{b&&typeof b=="string"?(l.status="failed",l.validateMessage=b):b===!1&&(l.status="failed",l.validateMessage=ne(g,r))})}),Promise.resolve()),T=()=>{l.status="unvalidated",l.validateMessage=""},$=()=>n("endValidate",{status:l.status,message:l.validateMessage}),M=(t=e.rules)=>new Promise(i=>{T(),t?(n("startValidate"),j(t).then(()=>{l.status==="failed"?(i({name:e.name,message:l.validateMessage}),$()):(l.status="passed",i(),$())})):i()}),P=t=>{if(c&&e.rules){const{validateTrigger:i}=c.props,r=te(i).includes(t),g=e.rules.filter(b=>b.trigger?te(b.trigger).includes(t):r);g.length&&M(g)}},q=t=>{var i;const{maxlength:r}=e;if(V(r)&&C(t)>+r){const g=o();if(g&&C(g)===+r)return g;const b=(i=s.value)==null?void 0:i.selectionEnd;if(l.focused&&b){const v=[...t],S=v.length-+r;return v.splice(b-S,S),v.join("")}return H(t,+r)}return t},E=(t,i="onChange")=>{const r=t;t=q(t);const g=C(r)-C(t);if(e.type==="number"||e.type==="digit"){const v=e.type==="number";t=qe(t,v,v)}let b=0;if(e.formatter&&i===e.formatTrigger){const{formatter:v,maxlength:S}=e;if(t=v(t),V(S)&&C(t)>+S&&(t=H(t,+S)),s.value&&l.focused){const{selectionEnd:A}=s.value,Z=H(r,A);b=C(v(Z))-C(Z)}}if(s.value&&s.value.value!==t)if(l.focused){let{selectionStart:v,selectionEnd:S}=s.value;if(s.value.value=t,V(v)&&V(S)){const A=C(t);g?(v-=g,S-=g):b&&(v+=b,S+=b),s.value.setSelectionRange(Math.min(v,A),Math.min(S,A))}}else s.value.value=t;t!==e.modelValue&&n("update:modelValue",t)},F=t=>{t.target.composing||E(t.target.value)},U=()=>{var t;return(t=s.value)==null?void 0:t.blur()},J=()=>{var t;return(t=s.value)==null?void 0:t.focus()},_=()=>{const t=s.value;e.type==="textarea"&&e.autosize&&t&&rt(t,e.autosize)},ce=t=>{l.focused=!0,n("focus",t),z(_),u("readonly")&&U()},ue=t=>{l.focused=!1,E(o(),"onBlur"),n("blur",t),!u("readonly")&&(P("onBlur"),z(_),Ke())},Q=t=>n("clickInput",t),de=t=>n("clickLeftIcon",t),fe=t=>n("clickRightIcon",t),ge=t=>{N(t),n("update:modelValue",""),n("clear",t)},X=I(()=>{if(typeof e.error=="boolean")return e.error;if(c&&c.props.showError&&l.status==="failed")return!0}),me=I(()=>{const t=u("labelWidth"),i=u("labelAlign");if(t&&i!=="top")return{width:ee(t)}}),he=t=>{t.keyCode===13&&(!(c&&c.props.submitOnEnter)&&e.type!=="textarea"&&N(t),e.type==="search"&&U()),n("keypress",t)},G=()=>e.id||`${m}-input`,be=()=>l.status,ve=()=>{const t=y("control",[u("inputAlign"),{error:X.value,custom:!!a.input,"min-height":e.type==="textarea"&&!e.autosize}]);if(a.input)return f("div",{class:t,onClick:Q},[a.input()]);const i={id:G(),ref:s,name:e.name,rows:e.rows!==void 0?+e.rows:void 0,class:t,disabled:u("disabled"),readonly:u("readonly"),autofocus:e.autofocus,placeholder:e.placeholder,autocomplete:e.autocomplete,autocapitalize:e.autocapitalize,autocorrect:e.autocorrect,enterkeyhint:e.enterkeyhint,spellcheck:e.spellcheck,"aria-labelledby":e.label?`${m}-label`:void 0,onBlur:ue,onFocus:ce,onInput:F,onClick:Q,onChange:ae,onKeypress:he,onCompositionend:ae,onCompositionstart:it};return e.type==="textarea"?f("textarea",i,null):f("input",Fe(lt(e.type),i),null)},ye=()=>{const t=a["left-icon"];if(e.leftIcon||t)return f("div",{class:y("left-icon"),onClick:de},[t?t():f(O,{name:e.leftIcon,classPrefix:e.iconPrefix},null)])},Se=()=>{const t=a["right-icon"];if(e.rightIcon||t)return f("div",{class:y("right-icon"),onClick:fe},[t?t():f(O,{name:e.rightIcon,classPrefix:e.iconPrefix},null)])},xe=()=>{if(e.showWordLimit&&e.maxlength){const t=C(o());return f("div",{class:y("word-limit")},[f("span",{class:y("word-num")},[t]),Ue("/"),e.maxlength])}},ke=()=>{if(c&&c.props.showErrorMessage===!1)return;const t=e.errorMessage||l.validateMessage;if(t){const i=a["error-message"],r=u("errorMessageAlign");return f("div",{class:y("error-message",r)},[i?i({message:t}):t])}},Ce=()=>{const t=u("labelWidth"),i=u("labelAlign"),r=u("colon")?":":"";if(a.label)return[a.label(),r];if(e.label)return f("label",{id:`${m}-label`,for:a.input?void 0:G(),onClick:g=>{N(g),J()},style:i==="top"&&t?{width:ee(t)}:void 0},[e.label+r])},Ie=()=>[f("div",{class:y("body")},[ve(),k.value&&f(O,{ref:h,name:e.clearIcon,class:y("clear")},null),Se(),a.button&&f("div",{class:y("button")},[a.button()])]),xe(),ke()];return ze({blur:U,focus:J,validate:M,formValue:w,resetValidation:T,getValidationStatus:be}),Oe(Ne,{customValue:d,resetValidation:T,validateWithTrigger:P}),De(()=>e.modelValue,()=>{E(o()),T(),P("onChange"),z(_)}),pe(()=>{E(o(),e.formatTrigger),z(_)}),We("touchstart",ge,{target:I(()=>{var t;return(t=h.value)==null?void 0:t.$el})}),()=>{const t=u("disabled"),i=u("labelAlign"),r=ye(),g=()=>{const b=Ce();return i==="top"?[r,b].filter(Boolean):b||[]};return f(Qe,{size:e.size,class:y({error:X.value,disabled:t,[`label-${i}`]:i}),center:e.center,border:e.border,isLink:e.isLink,clickable:e.clickable,titleStyle:me.value,valueClass:y("value"),titleClass:[y("label",[i,{required:B.value}]),e.labelClass],arrowDirection:e.arrowDirection},{icon:r&&i!=="top"?()=>r:null,title:g,value:Ie,extra:a.extra})}}});const Ct=W(ut),[oe,dt]=D("row"),se=Symbol(oe),ft={tag:x("div"),wrap:Ye,align:String,gutter:Y(0),justify:String};var gt=p({name:oe,props:ft,setup(e,{slots:n}){const{children:a,linkChildren:m}=He(se),l=I(()=>{const h=[[]];let d=0;return a.forEach((c,o)=>{d+=Number(c.span),d>24?(h.push([o]),d-=24):h[h.length-1].push(o)}),h}),s=I(()=>{const h=Number(e.gutter),d=[];return h&&l.value.forEach(c=>{const o=h*(c.length-1)/c.length;c.forEach((u,k)=>{if(k===0)d.push({right:o});else{const w=h-d[u-1].right,B=o-w;d.push({left:w,right:B})}})}),d});return m({spaces:s}),()=>{const{tag:h,wrap:d,align:c,justify:o}=e;return f(h,{class:dt({[`align-${c}`]:c,[`justify-${o}`]:o,nowrap:!d})},{default:()=>{var u;return[(u=n.default)==null?void 0:u.call(n)]}})}}});const[mt,ht]=D("col"),bt={tag:x("div"),span:Y(0),offset:L};var vt=p({name:mt,props:bt,setup(e,{slots:n}){const{parent:a,index:m}=re(se),l=I(()=>{if(!a)return;const{spaces:s}=a;if(s&&s.value&&s.value[m.value]){const{left:h,right:d}=s.value[m.value];return{paddingLeft:h?`${h}px`:null,paddingRight:d?`${d}px`:null}}});return()=>{const{tag:s,span:h,offset:d}=e;return f(s,{style:l.value,class:ht({[h]:h,[`offset-${d}`]:d})},{default:()=>{var c;return[(c=n.default)==null?void 0:c.call(n)]}})}}});const It=W(vt),wt=W(gt);export{kt as B,It as C,Ct as F,wt as R,st as f,tt as u};
