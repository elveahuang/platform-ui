var F=(n,s,a)=>new Promise((v,g)=>{var S=p=>{try{y(a.next(p))}catch(i){g(i)}},u=p=>{try{y(a.throw(p))}catch(i){g(i)}},y=p=>p.done?v(p.value):Promise.resolve(p.value).then(S,u);y((a=a.apply(n,s)).next())});import{e as z,ao as ne,aR as ae,am as I,aS as oe,al as R,aT as se,d as V,b as e,U as ce,aU as ie,af as le,ae as G,aV as re,aW as ue,O as pe,y as M,m as de,r as A,aX as me,a5 as _e,a6 as fe,g as N,o as ve,l as be,a as m,c as w,w as d,u as r,R as $,F as P,Q as O,$ as E,a1 as H,a0 as he,H as h,V as B}from"./index-DK8UeraX.js";/* empty css              *//* empty css                                                              *//* empty css              *//* empty css              *//* empty css              *//* empty css              */import{N as ge}from"./index-DIZqfRyk.js";import{C as ye,a as Se}from"./core.service-vsSS0yUl.js";import{A as K}from"./index-Nfe160tC.js";import{_ as ke}from"./AppIcon.vue_vue_type_script_setup_true_lang-DapEHbvb.js";import{v as Ce,p as Te,T as xe,a as we}from"./mall--G2K9eB9.js";import{S as Be}from"./index-Ds6mEuvx.js";import{C as Ae}from"./index-BRxaGCpG.js";import{S as Pe,a as Ie}from"./index-USnJLzmn.js";import{I as Le}from"./index-CmP3jxeN.js";import{C as Ne}from"./index-D98SBIY-.js";import{_ as $e}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-id-B_loW44s.js";import"./use-tab-status-0tiG1B-v.js";const[Oe,_]=z("action-sheet"),Re=ne({},ae,{title:String,round:I,actions:oe(),closeIcon:R("cross"),closeable:I,cancelText:String,description:String,closeOnPopstate:I,closeOnClickAction:Boolean,safeAreaInsetBottom:I}),Ve=[...se,"round","closeOnPopstate","safeAreaInsetBottom"];var Ue=V({name:Oe,props:Re,emits:["select","cancel","update:show"],setup(n,{slots:s,emit:a}){const v=t=>a("update:show",t),g=()=>{v(!1),a("cancel")},S=()=>{if(n.title)return e("div",{class:_("header")},[n.title,n.closeable&&e(G,{name:n.closeIcon,class:[_("close"),re],onClick:g},null)])},u=()=>{if(s.cancel||n.cancelText)return[e("div",{class:_("gap")},null),e("button",{type:"button",class:_("cancel"),onClick:g},[s.cancel?s.cancel():n.cancelText])]},y=(t,c)=>t.loading?e(ue,{class:_("loading-icon")},null):s.action?s.action({action:t,index:c}):[e("span",{class:_("name")},[t.name]),t.subname&&e("div",{class:_("subname")},[t.subname])],p=(t,c)=>{const{color:k,loading:C,callback:T,disabled:x,className:l}=t,b=()=>{x||C||(T&&T(t),n.closeOnClickAction&&v(!1),pe(()=>a("select",t,c)))};return e("button",{type:"button",style:{color:k},class:[_("item",{loading:C,disabled:x}),l],onClick:b},[y(t,c)])},i=()=>{if(n.description||s.description){const t=s.description?s.description():n.description;return e("div",{class:_("description")},[t])}};return()=>e(le,ce({class:_(),position:"bottom","onUpdate:show":v},ie(n,Ve)),{default:()=>{var t;return[S(),i(),e("div",{class:_("content")},[n.actions.map(p),(t=s.default)==null?void 0:t.call(s)]),u()]}})}});const De=M(Ue),[Fe,f,Ee]=z("submit-bar"),He={tip:String,label:String,price:Number,tipIcon:String,loading:Boolean,currency:R("Â¥"),disabled:Boolean,textAlign:String,buttonText:String,buttonType:R("danger"),buttonColor:String,suffixLabel:String,placeholder:Boolean,decimalLength:de(2),safeAreaInsetBottom:I};var Ke=V({name:Fe,props:He,emits:["submit"],setup(n,{emit:s,slots:a}){const v=A(),g=me(v,f),S=()=>{const{price:t,label:c,currency:k,textAlign:C,suffixLabel:T,decimalLength:x}=n;if(typeof t=="number"){const l=(t/100).toFixed(+x).split("."),b=x?`.${l[1]}`:"";return e("div",{class:f("text"),style:{textAlign:C}},[e("span",null,[c||Ee("label")]),e("span",{class:f("price")},[k,e("span",{class:f("price-integer")},[l[0]]),b]),T&&e("span",{class:f("suffix-label")},[T])])}},u=()=>{var t;const{tip:c,tipIcon:k}=n;if(a.tip||c)return e("div",{class:f("tip")},[k&&e(G,{class:f("tip-icon"),name:k},null),c&&e("span",{class:f("tip-text")},[c]),(t=a.tip)==null?void 0:t.call(a)])},y=()=>s("submit"),p=()=>a.button?a.button():e(_e,{round:!0,type:n.buttonType,text:n.buttonText,class:f("button",n.buttonType),color:n.buttonColor,loading:n.loading,disabled:n.disabled,onClick:y},null),i=()=>{var t,c;return e("div",{ref:v,class:[f(),{"van-safe-area-bottom":n.safeAreaInsetBottom}]},[(t=a.top)==null?void 0:t.call(a),u(),e("div",{class:f("bar")},[(c=a.default)==null?void 0:c.call(a),S(),p()])])};return()=>n.placeholder?g(i):i()}});const ze=M(Ke),Ge={class:"mx-4"},Me={class:"flex"},Qe={class:"flex-none p-4 text-center"},We={class:"flex-1 py-4"},Xe={class:"app-text-primary"},je={key:0,class:"vip-item-container"},qe={class:"app-text ml-4"},Je=V({__name:"vip-checkout",setup(n){const{user:s}=fe(),a=A(!1),v=()=>{a.value=!1},g=()=>{a.value=!1},S=A([]),u=A([]),y=N(()=>u.value.length&&u.value.length>0),p=A(),i=A(0),t=l=>{c.value.swipeTo(l)},c=A(),k=l=>{i.value=l},C=N(()=>u.value.at(i.value));N(()=>u.value.at(i.value));const T=()=>{a.value=!0},x=N(()=>0);return ve(()=>F(this,null,function*(){be("Page <<VipCheckout>> mounted."),yield ye.initialize().then(()=>{Ce({}).then(l=>{u.value=l.data}),Te({}).then(l=>{S.value=l.data})})})),(l,b)=>{var U,D;const Q=we,W=xe,X=ge,j=Be,q=Le,L=Ae,J=Ie,Y=Pe,Z=ze,ee=Ne,te=De;return m(),w(P,null,[e(j,null,{default:d(()=>[e(X,{border:!1,"left-arrow":"",onClickLeft:b[1]||(b[1]=o=>r(he)())},{title:d(()=>[r(y)?(m(),$(W,{key:0,ref_key:"vipTypeTabsRef",ref:p,active:r(i),"onUpdate:active":b[0]||(b[0]=o=>E(i)?i.value=o:null),"line-width":10,onChange:t},{default:d(()=>[(m(!0),w(P,null,O(r(u),o=>(m(),$(Q,{key:o.code},{title:d(()=>[h("div",Ge,B(o.title),1)]),_:2},1024))),128))]),_:1},8,["active"])):H("",!0)]),_:1})]),_:1}),e(r(K)),e(L,{inset:"",border:!0},{default:d(()=>[e(Y,{ref_key:"vipTypeSwipeRef",ref:c,loop:!1,width:"30%","indicator-color":"white",onChange:k},{default:d(()=>[(m(!0),w(P,null,O(r(u),o=>(m(),$(J,{key:o.code},{default:d(()=>[e(L,{inset:""},{default:d(()=>[h("div",Me,[h("div",Qe,[e(q,{round:"",class:"!align-middle",width:"3.2rem",height:"3.2rem",src:r(Se)},null,8,["src"])]),h("div",We,[h("div",Xe,B(r(s).username),1)])])]),_:1})]),_:2},1024))),128))]),_:1},512)]),_:1}),e(r(K)),((D=(U=r(C))==null?void 0:U.items)==null?void 0:D.length)>0?(m(),w("div",je,[(m(!0),w(P,null,O(r(C).items,o=>(m(),w("div",{class:"vip-item",key:o.code},[e(L,{border:!0,inset:"",class:"app-no-margin p-2"},{default:d(()=>[h("div",null,B(o.code),1),h("div",null,B(o.title),1),h("div",null,B(o.listPrice),1),h("div",null,B(o.price),1)]),_:2},1024)]))),128))])):H("",!0),e(Z,{price:r(x),"button-text":l.$t("common.button_renew"),onSubmit:T},null,8,["price","button-text"]),e(te,{show:r(a),"onUpdate:show":b[2]||(b[2]=o=>E(a)?a.value=o:null),"cancel-text":l.$t("common.button_cancel"),"close-on-click-action":"",closeable:"",onCancel:v,onSelect:g},{default:d(()=>[e(L,{inset:"",class:"!my-4"},{default:d(()=>[(m(!0),w(P,null,O(r(S),o=>(m(),$(ee,{key:o.code,"is-link":""},{icon:d(()=>[e(r(ke),{icon:o.icon},null,8,["icon"])]),title:d(()=>[h("div",qe,B(o.title),1)]),_:2},1024))),128))]),_:1})]),_:1},8,["show","cancel-text"])],64)}}}),gt=$e(Je,[["__scopeId","data-v-24234296"]]);export{gt as default};
